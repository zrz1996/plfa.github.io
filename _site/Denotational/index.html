<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Denotational: Denotational semantics of untyped lambda calculus ğŸš§ | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Denotational: Denotational semantics of untyped lambda calculus ğŸš§" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/Denotational/" />
<meta property="og:url" content="https://plfa.github.io/Denotational/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","headline":"Denotational: Denotational semantics of untyped lambda calculus ğŸš§","@type":"WebPage","url":"https://plfa.github.io/Denotational/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">The Book</a>
                <a class="page-link" href="/Announcements/">Announcements</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
                <a class="page-link" href="/Citing/">Citing</a>
                <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">ä¸­æ–‡</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Denotational: Denotational semantics of untyped lambda calculus ğŸš§</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/BigStep/">Prev</a>
    
    
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Denotational.lagda.md">Source</a>
    
    
    &bullet;
    
    
    <a alt="Next chapter" href="/Compositional/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="188" class="Keyword">module</a> <a id="195" href="/Denotational/" class="Module">plfa.part3.Denotational</a> <a id="219" class="Keyword">where</a>
</pre>
<p>The lambda calculus is a language about <em>functions</em>, that is, mappings
from input to output. In computing we often think of such
mappings as being carried out by a sequence of
operations that transform an input into an output.  But
functions can also be represented as data. For example, one
can tabulate a function, that is, create a table where each row has
two entries, an input and the corresponding output for the function.
Function application is then the process of looking up the row for
a given input and reading off the output.</p>

<p>We shall create a semantics for the untyped lambda calculus based on
this idea of functions-as-tables. However, there are two difficulties
that arise. First, functions often have an infinite domain, so it
would seem that we would need infinitely long tables to represent
functions. Second, in the lambda calculus, functions can be applied to
functions. They can even be applied to themselves! So it would seem
that the tables would contain cycles. One might start to worry that
advanced techniques are necessary to address these issues, but
fortunately this is not the case!</p>

<p>The first problem, of functions with infinite domains, is solved by
observing that in the execution of a terminating program, each lambda
abstraction will only be applied to a finite number of distinct
arguments. (We come back later to discuss diverging programs.) This
observation is another way of looking at Dana Scottâ€™s insight that
only continuous functions are needed to model the lambda calculus.</p>

<p>The second problem, that of self-application, is solved by relaxing
the way in which we lookup an argument in a functionâ€™s table.
Naively, one would look in the table for a row in which the input
entry exactly matches the argument. In the case of self-application,
this would require the table to contain a copy of itself. Impossible!
(At least, it is impossible if we want to build tables using inductive
data type definitions, which indeed we do.)  Instead it is sufficient
to find an input such that every row of the input appears as a row of
the argument (that is, the input is a subset of the argument).  In the
case of self-application, the table only needs to contain a smaller
copy of itself, which is fine.</p>

<p>With these two observations in hand, it is straightforward to write
down a denotational semantics of the lambda calculus.</p>

<h2 id="imports">Imports</h2>

<!-- JGS: for equational reasoning
open import Relation.Binary using (Setoid)
-->
<pre class="Agda"><a id="2688" class="Keyword">open</a> <a id="2693" class="Keyword">import</a> <a id="2700" href="Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="2715" class="Keyword">using</a> <a id="2721" class="Symbol">(</a><a id="2722" href="Agda.Primitive.html#611" class="Primitive">lzero</a><a id="2727" class="Symbol">;</a> <a id="2729" href="Agda.Primitive.html#627" class="Primitive">lsuc</a><a id="2733" class="Symbol">)</a>
<a id="2735" class="Keyword">open</a> <a id="2740" class="Keyword">import</a> <a id="2747" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="2758" class="Keyword">using</a> <a id="2764" class="Symbol">(</a><a id="2765" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">âŠ¥-elim</a><a id="2771" class="Symbol">)</a>
<a id="2773" class="Keyword">open</a> <a id="2778" class="Keyword">import</a> <a id="2785" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="2794" class="Keyword">using</a> <a id="2800" class="Symbol">(</a><a id="2801" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="2802" class="Symbol">;</a> <a id="2804" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="2808" class="Symbol">;</a> <a id="2810" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="2813" class="Symbol">)</a>
<a id="2815" class="Keyword">open</a> <a id="2820" class="Keyword">import</a> <a id="2827" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html" class="Module">Data.Product</a> <a id="2840" class="Keyword">using</a> <a id="2846" class="Symbol">(</a><a id="2847" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">_Ã—_</a><a id="2850" class="Symbol">;</a> <a id="2852" href="Agda.Builtin.Sigma.html#139" class="Record">Î£</a><a id="2853" class="Symbol">;</a> <a id="2855" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£-syntax</a><a id="2863" class="Symbol">;</a> <a id="2865" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1364" class="Function">âˆƒ</a><a id="2866" class="Symbol">;</a> <a id="2868" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1783" class="Function">âˆƒ-syntax</a><a id="2876" class="Symbol">;</a> <a id="2878" href="Agda.Builtin.Sigma.html#225" class="Field">projâ‚</a><a id="2883" class="Symbol">;</a> <a id="2885" href="Agda.Builtin.Sigma.html#237" class="Field">projâ‚‚</a><a id="2890" class="Symbol">)</a>
  <a id="2894" class="Keyword">renaming</a> <a id="2903" class="Symbol">(</a><a id="2904" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a> <a id="2908" class="Symbol">to</a> <a id="2911" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨_,_âŸ©</a><a id="2916" class="Symbol">)</a>
<a id="2918" class="Keyword">open</a> <a id="2923" class="Keyword">import</a> <a id="2930" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.html" class="Module">Data.Sum</a>
<a id="2939" class="Keyword">open</a> <a id="2944" class="Keyword">import</a> <a id="2951" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.html" class="Module">Data.Vec</a> <a id="2960" class="Keyword">using</a> <a id="2966" class="Symbol">(</a><a id="2967" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a><a id="2970" class="Symbol">;</a> <a id="2972" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a><a id="2974" class="Symbol">;</a> <a id="2976" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">_âˆ·_</a><a id="2979" class="Symbol">)</a>
<a id="2981" class="Keyword">open</a> <a id="2986" class="Keyword">import</a> <a id="2993" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="3033" class="Keyword">using</a> <a id="3039" class="Symbol">(</a><a id="3040" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_â‰¡_</a><a id="3043" class="Symbol">;</a> <a id="3045" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#799" class="Function Operator">_â‰¢_</a><a id="3048" class="Symbol">;</a> <a id="3050" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="3054" class="Symbol">;</a> <a id="3056" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="3059" class="Symbol">;</a> <a id="3061" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="3065" class="Symbol">;</a> <a id="3067" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">congâ‚‚</a><a id="3072" class="Symbol">;</a> <a id="3074" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a><a id="3082" class="Symbol">)</a>
<a id="3084" class="Keyword">open</a> <a id="3089" class="Keyword">import</a> <a id="3096" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="3113" class="Keyword">using</a> <a id="3119" class="Symbol">(</a><a id="3120" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">Â¬_</a><a id="3122" class="Symbol">)</a>
<a id="3124" class="Keyword">open</a> <a id="3129" class="Keyword">import</a> <a id="3136" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="3162" class="Keyword">using</a> <a id="3168" class="Symbol">(</a><a id="3169" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a><a id="3182" class="Symbol">)</a>
<a id="3184" class="Keyword">open</a> <a id="3189" class="Keyword">import</a> <a id="3196" href="https://agda.github.io/agda-stdlib/v1.1/Function.html" class="Module">Function</a> <a id="3205" class="Keyword">using</a> <a id="3211" class="Symbol">(</a><a id="3212" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">_âˆ˜_</a><a id="3215" class="Symbol">)</a>
<a id="3217" class="Keyword">open</a> <a id="3222" class="Keyword">import</a> <a id="3229" href="/Untyped/" class="Module">plfa.part2.Untyped</a>
  <a id="3250" class="Keyword">using</a> <a id="3256" class="Symbol">(</a><a id="3257" href="/Untyped/#3153" class="Datatype">Context</a><a id="3264" class="Symbol">;</a> <a id="3266" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="3267" class="Symbol">;</a> <a id="3269" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">_âˆ‹_</a><a id="3272" class="Symbol">;</a> <a id="3274" href="plfa.part2.Untyped.html#3175" class="InductiveConstructor">âˆ…</a><a id="3275" class="Symbol">;</a> <a id="3277" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">_,_</a><a id="3280" class="Symbol">;</a> <a id="3282" href="plfa.part2.Untyped.html#3557" class="InductiveConstructor">Z</a><a id="3283" class="Symbol">;</a> <a id="3285" href="plfa.part2.Untyped.html#3602" class="InductiveConstructor Operator">S_</a><a id="3287" class="Symbol">;</a> <a id="3289" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">_âŠ¢_</a><a id="3292" class="Symbol">;</a> <a id="3294" href="plfa.part2.Untyped.html#4330" class="InductiveConstructor Operator">`_</a><a id="3296" class="Symbol">;</a> <a id="3298" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">_Â·_</a><a id="3301" class="Symbol">;</a> <a id="3303" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">Æ›_</a><a id="3305" class="Symbol">;</a>
         <a id="3316" href="/Untyped/#5111" class="Function Operator">#_</a><a id="3318" class="Symbol">;</a> <a id="3320" href="plfa.part2.Untyped.html#5242" class="Function">twoá¶œ</a><a id="3324" class="Symbol">;</a> <a id="3326" href="plfa.part2.Untyped.html#5925" class="Function">ext</a><a id="3329" class="Symbol">;</a> <a id="3331" href="plfa.part2.Untyped.html#6235" class="Function">rename</a><a id="3337" class="Symbol">;</a> <a id="3339" href="plfa.part2.Untyped.html#6671" class="Function">exts</a><a id="3343" class="Symbol">;</a> <a id="3345" href="plfa.part2.Untyped.html#6963" class="Function">subst</a><a id="3350" class="Symbol">;</a> <a id="3352" href="plfa.part2.Untyped.html#7375" class="Function">subst-zero</a><a id="3362" class="Symbol">;</a> <a id="3364" href="plfa.part2.Untyped.html#7491" class="Function Operator">_[_]</a><a id="3368" class="Symbol">)</a>
<a id="3370" class="Keyword">open</a> <a id="3375" class="Keyword">import</a> <a id="3382" href="/Substitution/" class="Module">plfa.part2.Substitution</a> <a id="3406" class="Keyword">using</a> <a id="3412" class="Symbol">(</a><a id="3413" href="plfa.part2.Substitution.html#2192" class="Function">Rename</a><a id="3419" class="Symbol">;</a> <a id="3421" href="plfa.part2.Substitution.html#1927" class="Postulate">extensionality</a><a id="3435" class="Symbol">;</a> <a id="3437" href="plfa.part2.Substitution.html#17352" class="Function">rename-id</a><a id="3446" class="Symbol">)</a>
</pre>

<h2 id="values">Values</h2>

<p>The <code class="language-plaintext highlighter-rouge">Value</code> data type represents a finite portion of a function.  We
think of a value as a finite set of pairs that represent input-output
mappings. The <code class="language-plaintext highlighter-rouge">Value</code> data type represents the set as a binary tree
whose internal nodes are the union operator and whose leaves represent
either a single mapping or the empty set.</p>

<ul>
  <li>
    <p>The âŠ¥ value provides no information about the computation.</p>
  </li>
  <li>
    <p>A value of the form <code class="language-plaintext highlighter-rouge">v â†¦ w</code> is a single input-output mapping, from
input <code class="language-plaintext highlighter-rouge">v</code> to output <code class="language-plaintext highlighter-rouge">w</code>.</p>
  </li>
  <li>
    <p>A value of the form <code class="language-plaintext highlighter-rouge">v âŠ” w</code> is a function that maps inputs to
outputs according to both <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code>.  Think of it as taking the
union of the two sets.</p>
  </li>
</ul>

<pre class="Agda"><a id="4119" class="Keyword">infixr</a> <a id="4126" class="Number">7</a> <a id="4128" href="/Denotational/#4183" class="InductiveConstructor Operator">_â†¦_</a>
<a id="4132" class="Keyword">infixl</a> <a id="4139" class="Number">5</a> <a id="4141" href="/Denotational/#4213" class="InductiveConstructor Operator">_âŠ”_</a>

<a id="4146" class="Keyword">data</a> <a id="Value"></a><a id="4151" href="/Denotational/#4151" class="Datatype">Value</a> <a id="4157" class="Symbol">:</a> <a id="4159" class="PrimitiveType">Set</a> <a id="4163" class="Keyword">where</a>
  <a id="Value.âŠ¥"></a><a id="4171" href="/Denotational/#4171" class="InductiveConstructor">âŠ¥</a> <a id="4173" class="Symbol">:</a> <a id="4175" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
  <a id="Value._â†¦_"></a><a id="4183" href="/Denotational/#4183" class="InductiveConstructor Operator">_â†¦_</a> <a id="4187" class="Symbol">:</a> <a id="4189" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4195" class="Symbol">â†’</a> <a id="4197" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4203" class="Symbol">â†’</a> <a id="4205" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
  <a id="Value._âŠ”_"></a><a id="4213" href="/Denotational/#4213" class="InductiveConstructor Operator">_âŠ”_</a> <a id="4217" class="Symbol">:</a> <a id="4219" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4225" class="Symbol">â†’</a> <a id="4227" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4233" class="Symbol">â†’</a> <a id="4235" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
</pre>
<p>The <code class="language-plaintext highlighter-rouge">âŠ‘</code> relation adapts the familiar notion of subset to the Value data
type. This relation plays the key role in enabling self-application.
There are two rules that are specific to functions, <code class="language-plaintext highlighter-rouge">âŠ‘-fun</code> and <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code>,
which we discuss below.</p>

<pre class="Agda"><a id="4490" class="Keyword">infix</a> <a id="4496" class="Number">4</a> <a id="4498" href="/Denotational/#4508" class="Datatype Operator">_âŠ‘_</a>

<a id="4503" class="Keyword">data</a> <a id="_âŠ‘_"></a><a id="4508" href="/Denotational/#4508" class="Datatype Operator">_âŠ‘_</a> <a id="4512" class="Symbol">:</a> <a id="4514" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4520" class="Symbol">â†’</a> <a id="4522" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="4528" class="Symbol">â†’</a> <a id="4530" class="PrimitiveType">Set</a> <a id="4534" class="Keyword">where</a>

  <a id="_âŠ‘_.âŠ‘-bot"></a><a id="4543" href="/Denotational/#4543" class="InductiveConstructor">âŠ‘-bot</a> <a id="4549" class="Symbol">:</a> <a id="4551" class="Symbol">âˆ€</a> <a id="4553" class="Symbol">{</a><a id="4554" href="plfa.part3.Denotational.html#4554" class="Bound">v</a><a id="4555" class="Symbol">}</a> <a id="4557" class="Symbol">â†’</a> <a id="4559" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="4561" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4563" href="plfa.part3.Denotational.html#4554" class="Bound">v</a>

  <a id="_âŠ‘_.âŠ‘-conj-L"></a><a id="4568" href="/Denotational/#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="4577" class="Symbol">:</a> <a id="4579" class="Symbol">âˆ€</a> <a id="4581" class="Symbol">{</a><a id="4582" href="plfa.part3.Denotational.html#4582" class="Bound">u</a> <a id="4584" href="plfa.part3.Denotational.html#4584" class="Bound">v</a> <a id="4586" href="plfa.part3.Denotational.html#4586" class="Bound">w</a><a id="4587" class="Symbol">}</a>
    <a id="4593" class="Symbol">â†’</a> <a id="4595" href="/Denotational/#4584" class="Bound">v</a> <a id="4597" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4599" href="plfa.part3.Denotational.html#4582" class="Bound">u</a>
    <a id="4605" class="Symbol">â†’</a> <a id="4607" href="/Denotational/#4586" class="Bound">w</a> <a id="4609" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4611" href="plfa.part3.Denotational.html#4582" class="Bound">u</a>
      <a id="4619" class="Comment">-----------</a>
    <a id="4635" class="Symbol">â†’</a> <a id="4637" class="Symbol">(</a><a id="4638" href="/Denotational/#4584" class="Bound">v</a> <a id="4640" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="4642" href="plfa.part3.Denotational.html#4586" class="Bound">w</a><a id="4643" class="Symbol">)</a> <a id="4645" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4647" href="plfa.part3.Denotational.html#4582" class="Bound">u</a>

  <a id="_âŠ‘_.âŠ‘-conj-R1"></a><a id="4652" href="/Denotational/#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="4662" class="Symbol">:</a> <a id="4664" class="Symbol">âˆ€</a> <a id="4666" class="Symbol">{</a><a id="4667" href="plfa.part3.Denotational.html#4667" class="Bound">u</a> <a id="4669" href="plfa.part3.Denotational.html#4669" class="Bound">v</a> <a id="4671" href="plfa.part3.Denotational.html#4671" class="Bound">w</a><a id="4672" class="Symbol">}</a>
    <a id="4678" class="Symbol">â†’</a> <a id="4680" href="/Denotational/#4667" class="Bound">u</a> <a id="4682" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4684" href="plfa.part3.Denotational.html#4669" class="Bound">v</a>
      <a id="4692" class="Comment">-----------</a>
    <a id="4708" class="Symbol">â†’</a> <a id="4710" href="/Denotational/#4667" class="Bound">u</a> <a id="4712" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4714" class="Symbol">(</a><a id="4715" href="plfa.part3.Denotational.html#4669" class="Bound">v</a> <a id="4717" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="4719" href="plfa.part3.Denotational.html#4671" class="Bound">w</a><a id="4720" class="Symbol">)</a>

  <a id="_âŠ‘_.âŠ‘-conj-R2"></a><a id="4725" href="/Denotational/#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="4735" class="Symbol">:</a> <a id="4737" class="Symbol">âˆ€</a> <a id="4739" class="Symbol">{</a><a id="4740" href="plfa.part3.Denotational.html#4740" class="Bound">u</a> <a id="4742" href="plfa.part3.Denotational.html#4742" class="Bound">v</a> <a id="4744" href="plfa.part3.Denotational.html#4744" class="Bound">w</a><a id="4745" class="Symbol">}</a>
    <a id="4751" class="Symbol">â†’</a> <a id="4753" href="/Denotational/#4740" class="Bound">u</a> <a id="4755" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4757" href="plfa.part3.Denotational.html#4744" class="Bound">w</a>
      <a id="4765" class="Comment">-----------</a>
    <a id="4781" class="Symbol">â†’</a> <a id="4783" href="/Denotational/#4740" class="Bound">u</a> <a id="4785" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4787" class="Symbol">(</a><a id="4788" href="plfa.part3.Denotational.html#4742" class="Bound">v</a> <a id="4790" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="4792" href="plfa.part3.Denotational.html#4744" class="Bound">w</a><a id="4793" class="Symbol">)</a>

  <a id="_âŠ‘_.âŠ‘-trans"></a><a id="4798" href="/Denotational/#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="4806" class="Symbol">:</a> <a id="4808" class="Symbol">âˆ€</a> <a id="4810" class="Symbol">{</a><a id="4811" href="plfa.part3.Denotational.html#4811" class="Bound">u</a> <a id="4813" href="plfa.part3.Denotational.html#4813" class="Bound">v</a> <a id="4815" href="plfa.part3.Denotational.html#4815" class="Bound">w</a><a id="4816" class="Symbol">}</a>
    <a id="4822" class="Symbol">â†’</a> <a id="4824" href="/Denotational/#4811" class="Bound">u</a> <a id="4826" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4828" href="plfa.part3.Denotational.html#4813" class="Bound">v</a>
    <a id="4834" class="Symbol">â†’</a> <a id="4836" href="/Denotational/#4813" class="Bound">v</a> <a id="4838" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4840" href="plfa.part3.Denotational.html#4815" class="Bound">w</a>
      <a id="4848" class="Comment">-----</a>
    <a id="4858" class="Symbol">â†’</a> <a id="4860" href="/Denotational/#4811" class="Bound">u</a> <a id="4862" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4864" href="plfa.part3.Denotational.html#4815" class="Bound">w</a>

  <a id="_âŠ‘_.âŠ‘-fun"></a><a id="4869" href="/Denotational/#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="4875" class="Symbol">:</a> <a id="4877" class="Symbol">âˆ€</a> <a id="4879" class="Symbol">{</a><a id="4880" href="plfa.part3.Denotational.html#4880" class="Bound">v</a> <a id="4882" href="plfa.part3.Denotational.html#4882" class="Bound">w</a> <a id="4884" href="plfa.part3.Denotational.html#4884" class="Bound">vâ€²</a> <a id="4887" href="plfa.part3.Denotational.html#4887" class="Bound">wâ€²</a><a id="4889" class="Symbol">}</a>
    <a id="4895" class="Symbol">â†’</a> <a id="4897" href="/Denotational/#4884" class="Bound">vâ€²</a> <a id="4900" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4902" href="plfa.part3.Denotational.html#4880" class="Bound">v</a>
    <a id="4908" class="Symbol">â†’</a> <a id="4910" href="/Denotational/#4882" class="Bound">w</a> <a id="4912" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4914" href="plfa.part3.Denotational.html#4887" class="Bound">wâ€²</a>
      <a id="4923" class="Comment">-------------------</a>
    <a id="4947" class="Symbol">â†’</a> <a id="4949" class="Symbol">(</a><a id="4950" href="/Denotational/#4880" class="Bound">v</a> <a id="4952" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="4954" href="plfa.part3.Denotational.html#4882" class="Bound">w</a><a id="4955" class="Symbol">)</a> <a id="4957" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="4959" class="Symbol">(</a><a id="4960" href="plfa.part3.Denotational.html#4884" class="Bound">vâ€²</a> <a id="4963" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="4965" href="plfa.part3.Denotational.html#4887" class="Bound">wâ€²</a><a id="4967" class="Symbol">)</a>

  <a id="_âŠ‘_.âŠ‘-dist"></a><a id="4972" href="/Denotational/#4972" class="InductiveConstructor">âŠ‘-dist</a> <a id="4979" class="Symbol">:</a> <a id="4981" class="Symbol">âˆ€{</a><a id="4983" href="plfa.part3.Denotational.html#4983" class="Bound">v</a> <a id="4985" href="plfa.part3.Denotational.html#4985" class="Bound">w</a> <a id="4987" href="plfa.part3.Denotational.html#4987" class="Bound">wâ€²</a><a id="4989" class="Symbol">}</a>
      <a id="4997" class="Comment">---------------------------------</a>
    <a id="5035" class="Symbol">â†’</a> <a id="5037" href="/Denotational/#4983" class="Bound">v</a> <a id="5039" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="5041" class="Symbol">(</a><a id="5042" href="plfa.part3.Denotational.html#4985" class="Bound">w</a> <a id="5044" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="5046" href="plfa.part3.Denotational.html#4987" class="Bound">wâ€²</a><a id="5048" class="Symbol">)</a> <a id="5050" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="5052" class="Symbol">(</a><a id="5053" href="plfa.part3.Denotational.html#4983" class="Bound">v</a> <a id="5055" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="5057" href="plfa.part3.Denotational.html#4985" class="Bound">w</a><a id="5058" class="Symbol">)</a> <a id="5060" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="5062" class="Symbol">(</a><a id="5063" href="plfa.part3.Denotational.html#4983" class="Bound">v</a> <a id="5065" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="5067" href="plfa.part3.Denotational.html#4987" class="Bound">wâ€²</a><a id="5069" class="Symbol">)</a>
</pre>

<p>The first five rules are straightforward.
The rule <code class="language-plaintext highlighter-rouge">âŠ‘-fun</code> captures when it is OK to match a higher-order argument
<code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€²</code> to a table entry whose input is <code class="language-plaintext highlighter-rouge">v â†¦ w</code>.  Considering a
call to the higher-order argument. It is OK to pass a larger argument
than expected, so <code class="language-plaintext highlighter-rouge">v</code> can be larger than <code class="language-plaintext highlighter-rouge">vâ€²</code>. Also, it is OK to
disregard some of the output, so <code class="language-plaintext highlighter-rouge">w</code> can be smaller than <code class="language-plaintext highlighter-rouge">wâ€²</code>.
The rule <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code> says that if you have two entries for the same input,
then you can combine them into a single entry and joins the two
outputs.</p>

<p>The <code class="language-plaintext highlighter-rouge">âŠ‘</code> relation is reflexive.</p>

<pre class="Agda"><a id="âŠ‘-refl"></a><a id="5638" href="/Denotational/#5638" class="Function">âŠ‘-refl</a> <a id="5645" class="Symbol">:</a> <a id="5647" class="Symbol">âˆ€</a> <a id="5649" class="Symbol">{</a><a id="5650" href="plfa.part3.Denotational.html#5650" class="Bound">v</a><a id="5651" class="Symbol">}</a> <a id="5653" class="Symbol">â†’</a> <a id="5655" href="plfa.part3.Denotational.html#5650" class="Bound">v</a> <a id="5657" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="5659" href="plfa.part3.Denotational.html#5650" class="Bound">v</a>
<a id="5661" href="/Denotational/#5638" class="Function">âŠ‘-refl</a> <a id="5668" class="Symbol">{</a><a id="5669" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="5670" class="Symbol">}</a> <a id="5672" class="Symbol">=</a> <a id="5674" href="plfa.part3.Denotational.html#4543" class="InductiveConstructor">âŠ‘-bot</a>
<a id="5680" href="/Denotational/#5638" class="Function">âŠ‘-refl</a> <a id="5687" class="Symbol">{</a><a id="5688" href="plfa.part3.Denotational.html#5688" class="Bound">v</a> <a id="5690" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="5692" href="plfa.part3.Denotational.html#5692" class="Bound">vâ€²</a><a id="5694" class="Symbol">}</a> <a id="5696" class="Symbol">=</a> <a id="5698" href="plfa.part3.Denotational.html#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="5704" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="5711" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>
<a id="5718" href="/Denotational/#5638" class="Function">âŠ‘-refl</a> <a id="5725" class="Symbol">{</a><a id="5726" href="plfa.part3.Denotational.html#5726" class="Bound">vâ‚</a> <a id="5729" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="5731" href="plfa.part3.Denotational.html#5731" class="Bound">vâ‚‚</a><a id="5733" class="Symbol">}</a> <a id="5735" class="Symbol">=</a> <a id="5737" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="5746" class="Symbol">(</a><a id="5747" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="5757" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="5763" class="Symbol">)</a> <a id="5765" class="Symbol">(</a><a id="5766" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="5776" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="5782" class="Symbol">)</a>
</pre>
<p>The <code class="language-plaintext highlighter-rouge">âŠ”</code> operation is monotonic with respect to <code class="language-plaintext highlighter-rouge">âŠ‘</code>, that is, given two
larger values it produces a larger value.</p>

<pre class="Agda"><a id="âŠ”âŠ‘âŠ”"></a><a id="5907" href="/Denotational/#5907" class="Function">âŠ”âŠ‘âŠ”</a> <a id="5911" class="Symbol">:</a> <a id="5913" class="Symbol">âˆ€</a> <a id="5915" class="Symbol">{</a><a id="5916" href="plfa.part3.Denotational.html#5916" class="Bound">v</a> <a id="5918" href="plfa.part3.Denotational.html#5918" class="Bound">w</a> <a id="5920" href="plfa.part3.Denotational.html#5920" class="Bound">vâ€²</a> <a id="5923" href="plfa.part3.Denotational.html#5923" class="Bound">wâ€²</a><a id="5925" class="Symbol">}</a>
  <a id="5929" class="Symbol">â†’</a> <a id="5931" href="/Denotational/#5916" class="Bound">v</a> <a id="5933" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="5935" href="plfa.part3.Denotational.html#5920" class="Bound">vâ€²</a>  <a id="5939" class="Symbol">â†’</a>  <a id="5942" href="plfa.part3.Denotational.html#5918" class="Bound">w</a> <a id="5944" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="5946" href="plfa.part3.Denotational.html#5923" class="Bound">wâ€²</a>
    <a id="5953" class="Comment">-----------------------</a>
  <a id="5979" class="Symbol">â†’</a> <a id="5981" class="Symbol">(</a><a id="5982" href="/Denotational/#5916" class="Bound">v</a> <a id="5984" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="5986" href="plfa.part3.Denotational.html#5918" class="Bound">w</a><a id="5987" class="Symbol">)</a> <a id="5989" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="5991" class="Symbol">(</a><a id="5992" href="plfa.part3.Denotational.html#5920" class="Bound">vâ€²</a> <a id="5995" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="5997" href="plfa.part3.Denotational.html#5923" class="Bound">wâ€²</a><a id="5999" class="Symbol">)</a>
<a id="6001" href="/Denotational/#5907" class="Function">âŠ”âŠ‘âŠ”</a> <a id="6005" href="plfa.part3.Denotational.html#6005" class="Bound">dâ‚</a> <a id="6008" href="plfa.part3.Denotational.html#6008" class="Bound">dâ‚‚</a> <a id="6011" class="Symbol">=</a> <a id="6013" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="6022" class="Symbol">(</a><a id="6023" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="6033" href="plfa.part3.Denotational.html#6005" class="Bound">dâ‚</a><a id="6035" class="Symbol">)</a> <a id="6037" class="Symbol">(</a><a id="6038" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="6048" href="plfa.part3.Denotational.html#6008" class="Bound">dâ‚‚</a><a id="6050" class="Symbol">)</a>
</pre>
<p>The <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code> rule can be used to combine two entries even when the
input values are not identical. One can first combine the two inputs
using âŠ” and then apply the <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code> rule to obtain the following
property.</p>

<pre class="Agda"><a id="âŠ”â†¦âŠ”-dist"></a><a id="6273" href="/Denotational/#6273" class="Function">âŠ”â†¦âŠ”-dist</a> <a id="6282" class="Symbol">:</a> <a id="6284" class="Symbol">âˆ€{</a><a id="6286" href="plfa.part3.Denotational.html#6286" class="Bound">v</a> <a id="6288" href="plfa.part3.Denotational.html#6288" class="Bound">vâ€²</a> <a id="6291" href="plfa.part3.Denotational.html#6291" class="Bound">w</a> <a id="6293" href="plfa.part3.Denotational.html#6293" class="Bound">wâ€²</a> <a id="6296" class="Symbol">:</a> <a id="6298" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="6303" class="Symbol">}</a>
  <a id="6307" class="Symbol">â†’</a> <a id="6309" class="Symbol">(</a><a id="6310" href="/Denotational/#6286" class="Bound">v</a> <a id="6312" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="6314" href="plfa.part3.Denotational.html#6288" class="Bound">vâ€²</a><a id="6316" class="Symbol">)</a> <a id="6318" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="6320" class="Symbol">(</a><a id="6321" href="plfa.part3.Denotational.html#6291" class="Bound">w</a> <a id="6323" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="6325" href="plfa.part3.Denotational.html#6293" class="Bound">wâ€²</a><a id="6327" class="Symbol">)</a> <a id="6329" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="6331" class="Symbol">(</a><a id="6332" href="plfa.part3.Denotational.html#6286" class="Bound">v</a> <a id="6334" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="6336" href="plfa.part3.Denotational.html#6291" class="Bound">w</a><a id="6337" class="Symbol">)</a> <a id="6339" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="6341" class="Symbol">(</a><a id="6342" href="plfa.part3.Denotational.html#6288" class="Bound">vâ€²</a> <a id="6345" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="6347" href="plfa.part3.Denotational.html#6293" class="Bound">wâ€²</a><a id="6349" class="Symbol">)</a>
<a id="6351" href="/Denotational/#6273" class="Function">âŠ”â†¦âŠ”-dist</a> <a id="6360" class="Symbol">=</a> <a id="6362" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="6370" href="plfa.part3.Denotational.html#4972" class="InductiveConstructor">âŠ‘-dist</a> <a id="6377" class="Symbol">(</a><a id="6378" href="plfa.part3.Denotational.html#5907" class="Function">âŠ”âŠ‘âŠ”</a> <a id="6382" class="Symbol">(</a><a id="6383" href="plfa.part3.Denotational.html#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="6389" class="Symbol">(</a><a id="6390" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="6400" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="6406" class="Symbol">)</a> <a id="6408" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="6414" class="Symbol">)</a>
                            <a id="6444" class="Symbol">(</a><a id="6445" href="/Denotational/#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="6451" class="Symbol">(</a><a id="6452" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="6462" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="6468" class="Symbol">)</a> <a id="6470" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="6476" class="Symbol">))</a>
</pre>
<!--
 [PLW: above might read more nicely if we introduce inequational reasoning.]
 -->

<p>If the join <code class="language-plaintext highlighter-rouge">u âŠ” v</code> is less than another value <code class="language-plaintext highlighter-rouge">w</code>,
then both <code class="language-plaintext highlighter-rouge">u</code> and <code class="language-plaintext highlighter-rouge">v</code> are less than <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="âŠ”âŠ‘-invL"></a><a id="6670" href="/Denotational/#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6678" class="Symbol">:</a> <a id="6680" class="Symbol">âˆ€{</a><a id="6682" href="plfa.part3.Denotational.html#6682" class="Bound">u</a> <a id="6684" href="plfa.part3.Denotational.html#6684" class="Bound">v</a> <a id="6686" href="plfa.part3.Denotational.html#6686" class="Bound">w</a> <a id="6688" class="Symbol">:</a> <a id="6690" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="6695" class="Symbol">}</a>
  <a id="6699" class="Symbol">â†’</a> <a id="6701" href="/Denotational/#6682" class="Bound">u</a> <a id="6703" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="6705" href="plfa.part3.Denotational.html#6684" class="Bound">v</a> <a id="6707" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="6709" href="plfa.part3.Denotational.html#6686" class="Bound">w</a>
    <a id="6715" class="Comment">---------</a>
  <a id="6727" class="Symbol">â†’</a> <a id="6729" href="/Denotational/#6682" class="Bound">u</a> <a id="6731" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="6733" href="plfa.part3.Denotational.html#6686" class="Bound">w</a>
<a id="6735" href="/Denotational/#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6743" class="Symbol">(</a><a id="6744" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="6753" href="plfa.part3.Denotational.html#6753" class="Bound">lt1</a> <a id="6757" href="plfa.part3.Denotational.html#6757" class="Bound">lt2</a><a id="6760" class="Symbol">)</a> <a id="6762" class="Symbol">=</a> <a id="6764" href="plfa.part3.Denotational.html#6753" class="Bound">lt1</a>
<a id="6768" href="/Denotational/#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6776" class="Symbol">(</a><a id="6777" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="6787" href="plfa.part3.Denotational.html#6787" class="Bound">lt</a><a id="6789" class="Symbol">)</a> <a id="6791" class="Symbol">=</a> <a id="6793" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="6803" class="Symbol">(</a><a id="6804" href="plfa.part3.Denotational.html#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6812" href="plfa.part3.Denotational.html#6787" class="Bound">lt</a><a id="6814" class="Symbol">)</a>
<a id="6816" href="/Denotational/#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6824" class="Symbol">(</a><a id="6825" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="6835" href="plfa.part3.Denotational.html#6835" class="Bound">lt</a><a id="6837" class="Symbol">)</a> <a id="6839" class="Symbol">=</a> <a id="6841" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="6851" class="Symbol">(</a><a id="6852" href="plfa.part3.Denotational.html#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6860" href="plfa.part3.Denotational.html#6835" class="Bound">lt</a><a id="6862" class="Symbol">)</a>
<a id="6864" href="/Denotational/#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6872" class="Symbol">(</a><a id="6873" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="6881" href="plfa.part3.Denotational.html#6881" class="Bound">lt1</a> <a id="6885" href="plfa.part3.Denotational.html#6885" class="Bound">lt2</a><a id="6888" class="Symbol">)</a> <a id="6890" class="Symbol">=</a> <a id="6892" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="6900" class="Symbol">(</a><a id="6901" href="plfa.part3.Denotational.html#6670" class="Function">âŠ”âŠ‘-invL</a> <a id="6909" href="plfa.part3.Denotational.html#6881" class="Bound">lt1</a><a id="6912" class="Symbol">)</a> <a id="6914" href="plfa.part3.Denotational.html#6885" class="Bound">lt2</a>

<a id="âŠ”âŠ‘-invR"></a><a id="6919" href="/Denotational/#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="6927" class="Symbol">:</a> <a id="6929" class="Symbol">âˆ€{</a><a id="6931" href="plfa.part3.Denotational.html#6931" class="Bound">u</a> <a id="6933" href="plfa.part3.Denotational.html#6933" class="Bound">v</a> <a id="6935" href="plfa.part3.Denotational.html#6935" class="Bound">w</a> <a id="6937" class="Symbol">:</a> <a id="6939" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="6944" class="Symbol">}</a>
  <a id="6948" class="Symbol">â†’</a> <a id="6950" href="/Denotational/#6931" class="Bound">u</a> <a id="6952" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="6954" href="plfa.part3.Denotational.html#6933" class="Bound">v</a> <a id="6956" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="6958" href="plfa.part3.Denotational.html#6935" class="Bound">w</a>
    <a id="6964" class="Comment">---------</a>
  <a id="6976" class="Symbol">â†’</a> <a id="6978" href="/Denotational/#6933" class="Bound">v</a> <a id="6980" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="6982" href="plfa.part3.Denotational.html#6935" class="Bound">w</a>
<a id="6984" href="/Denotational/#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="6992" class="Symbol">(</a><a id="6993" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="7002" href="plfa.part3.Denotational.html#7002" class="Bound">lt1</a> <a id="7006" href="plfa.part3.Denotational.html#7006" class="Bound">lt2</a><a id="7009" class="Symbol">)</a> <a id="7011" class="Symbol">=</a> <a id="7013" href="plfa.part3.Denotational.html#7006" class="Bound">lt2</a>
<a id="7017" href="/Denotational/#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7025" class="Symbol">(</a><a id="7026" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="7036" href="plfa.part3.Denotational.html#7036" class="Bound">lt</a><a id="7038" class="Symbol">)</a> <a id="7040" class="Symbol">=</a> <a id="7042" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="7052" class="Symbol">(</a><a id="7053" href="plfa.part3.Denotational.html#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7061" href="plfa.part3.Denotational.html#7036" class="Bound">lt</a><a id="7063" class="Symbol">)</a>
<a id="7065" href="/Denotational/#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7073" class="Symbol">(</a><a id="7074" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="7084" href="plfa.part3.Denotational.html#7084" class="Bound">lt</a><a id="7086" class="Symbol">)</a> <a id="7088" class="Symbol">=</a> <a id="7090" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="7100" class="Symbol">(</a><a id="7101" href="plfa.part3.Denotational.html#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7109" href="plfa.part3.Denotational.html#7084" class="Bound">lt</a><a id="7111" class="Symbol">)</a>
<a id="7113" href="/Denotational/#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7121" class="Symbol">(</a><a id="7122" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="7130" href="plfa.part3.Denotational.html#7130" class="Bound">lt1</a> <a id="7134" href="plfa.part3.Denotational.html#7134" class="Bound">lt2</a><a id="7137" class="Symbol">)</a> <a id="7139" class="Symbol">=</a> <a id="7141" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="7149" class="Symbol">(</a><a id="7150" href="plfa.part3.Denotational.html#6919" class="Function">âŠ”âŠ‘-invR</a> <a id="7158" href="plfa.part3.Denotational.html#7130" class="Bound">lt1</a><a id="7161" class="Symbol">)</a> <a id="7163" href="plfa.part3.Denotational.html#7134" class="Bound">lt2</a>
</pre>

<h2 id="environments">Environments</h2>

<p>An environment gives meaning to the free variables in a term by
mapping variables to values.</p>

<pre class="Agda"><a id="Env"></a><a id="7288" href="/Denotational/#7288" class="Function">Env</a> <a id="7292" class="Symbol">:</a> <a id="7294" href="/Untyped/#3153" class="Datatype">Context</a> <a id="7302" class="Symbol">â†’</a> <a id="7304" class="PrimitiveType">Set</a>
<a id="7308" href="/Denotational/#7288" class="Function">Env</a> <a id="7312" href="plfa.part3.Denotational.html#7312" class="Bound">Î“</a> <a id="7314" class="Symbol">=</a> <a id="7316" class="Symbol">âˆ€</a> <a id="7318" class="Symbol">(</a><a id="7319" href="plfa.part3.Denotational.html#7319" class="Bound">x</a> <a id="7321" class="Symbol">:</a> <a id="7323" href="plfa.part3.Denotational.html#7312" class="Bound">Î“</a> <a id="7325" href="/Untyped/#3521" class="Datatype Operator">âˆ‹</a> <a id="7327" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7328" class="Symbol">)</a> <a id="7330" class="Symbol">â†’</a> <a id="7332" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
</pre>
<p>We have the empty environment, and we can extend an environment.</p>
<pre class="Agda"><a id="`âˆ…"></a><a id="7412" href="/Denotational/#7412" class="Function">`âˆ…</a> <a id="7415" class="Symbol">:</a> <a id="7417" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7421" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a>
<a id="7423" href="/Denotational/#7412" class="Function">`âˆ…</a> <a id="7426" class="Symbol">()</a>

<a id="7430" class="Keyword">infixl</a> <a id="7437" class="Number">5</a> <a id="7439" href="/Denotational/#7445" class="Function Operator">_`,_</a>

<a id="_`,_"></a><a id="7445" href="/Denotational/#7445" class="Function Operator">_`,_</a> <a id="7450" class="Symbol">:</a> <a id="7452" class="Symbol">âˆ€</a> <a id="7454" class="Symbol">{</a><a id="7455" href="plfa.part3.Denotational.html#7455" class="Bound">Î“</a><a id="7456" class="Symbol">}</a> <a id="7458" class="Symbol">â†’</a> <a id="7460" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7464" href="plfa.part3.Denotational.html#7455" class="Bound">Î“</a> <a id="7466" class="Symbol">â†’</a> <a id="7468" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="7474" class="Symbol">â†’</a> <a id="7476" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7480" class="Symbol">(</a><a id="7481" href="plfa.part3.Denotational.html#7455" class="Bound">Î“</a> <a id="7483" href="/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="7485" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7486" class="Symbol">)</a>
<a id="7488" class="Symbol">(</a><a id="7489" href="/Denotational/#7489" class="Bound">Î³</a> <a id="7491" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="7494" href="plfa.part3.Denotational.html#7494" class="Bound">v</a><a id="7495" class="Symbol">)</a> <a id="7497" href="/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="7499" class="Symbol">=</a> <a id="7501" href="plfa.part3.Denotational.html#7494" class="Bound">v</a>
<a id="7503" class="Symbol">(</a><a id="7504" href="/Denotational/#7504" class="Bound">Î³</a> <a id="7506" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="7509" href="plfa.part3.Denotational.html#7509" class="Bound">v</a><a id="7510" class="Symbol">)</a> <a id="7512" class="Symbol">(</a><a id="7513" href="/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="7515" href="plfa.part3.Denotational.html#7515" class="Bound">x</a><a id="7516" class="Symbol">)</a> <a id="7518" class="Symbol">=</a> <a id="7520" href="plfa.part3.Denotational.html#7504" class="Bound">Î³</a> <a id="7522" href="plfa.part3.Denotational.html#7515" class="Bound">x</a>
</pre>
<p>We can recover the previous environment from an extended environment,
and the last value. Putting them together again takes us back to where we started.</p>
<pre class="Agda"><a id="init"></a><a id="7686" href="/Denotational/#7686" class="Function">init</a> <a id="7691" class="Symbol">:</a> <a id="7693" class="Symbol">âˆ€</a> <a id="7695" class="Symbol">{</a><a id="7696" href="plfa.part3.Denotational.html#7696" class="Bound">Î“</a><a id="7697" class="Symbol">}</a> <a id="7699" class="Symbol">â†’</a> <a id="7701" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7705" class="Symbol">(</a><a id="7706" href="plfa.part3.Denotational.html#7696" class="Bound">Î“</a> <a id="7708" href="/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="7710" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7711" class="Symbol">)</a> <a id="7713" class="Symbol">â†’</a> <a id="7715" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7719" href="plfa.part3.Denotational.html#7696" class="Bound">Î“</a>
<a id="7721" href="/Denotational/#7686" class="Function">init</a> <a id="7726" href="plfa.part3.Denotational.html#7726" class="Bound">Î³</a> <a id="7728" href="plfa.part3.Denotational.html#7728" class="Bound">x</a> <a id="7730" class="Symbol">=</a> <a id="7732" href="plfa.part3.Denotational.html#7726" class="Bound">Î³</a> <a id="7734" class="Symbol">(</a><a id="7735" href="/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="7737" href="plfa.part3.Denotational.html#7728" class="Bound">x</a><a id="7738" class="Symbol">)</a>

<a id="last"></a><a id="7741" href="/Denotational/#7741" class="Function">last</a> <a id="7746" class="Symbol">:</a> <a id="7748" class="Symbol">âˆ€</a> <a id="7750" class="Symbol">{</a><a id="7751" href="plfa.part3.Denotational.html#7751" class="Bound">Î“</a><a id="7752" class="Symbol">}</a> <a id="7754" class="Symbol">â†’</a> <a id="7756" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7760" class="Symbol">(</a><a id="7761" href="plfa.part3.Denotational.html#7751" class="Bound">Î“</a> <a id="7763" href="/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="7765" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7766" class="Symbol">)</a> <a id="7768" class="Symbol">â†’</a> <a id="7770" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="7776" href="/Denotational/#7741" class="Function">last</a> <a id="7781" href="plfa.part3.Denotational.html#7781" class="Bound">Î³</a> <a id="7783" class="Symbol">=</a> <a id="7785" href="plfa.part3.Denotational.html#7781" class="Bound">Î³</a> <a id="7787" href="/Untyped/#3557" class="InductiveConstructor">Z</a>

<a id="init-last"></a><a id="7790" href="/Denotational/#7790" class="Function">init-last</a> <a id="7800" class="Symbol">:</a> <a id="7802" class="Symbol">âˆ€</a> <a id="7804" class="Symbol">{</a><a id="7805" href="plfa.part3.Denotational.html#7805" class="Bound">Î“</a><a id="7806" class="Symbol">}</a> <a id="7808" class="Symbol">â†’</a> <a id="7810" class="Symbol">(</a><a id="7811" href="plfa.part3.Denotational.html#7811" class="Bound">Î³</a> <a id="7813" class="Symbol">:</a> <a id="7815" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="7819" class="Symbol">(</a><a id="7820" href="plfa.part3.Denotational.html#7805" class="Bound">Î“</a> <a id="7822" href="/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="7824" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7825" class="Symbol">))</a> <a id="7828" class="Symbol">â†’</a> <a id="7830" href="plfa.part3.Denotational.html#7811" class="Bound">Î³</a> <a id="7832" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="7834" class="Symbol">(</a><a id="7835" href="plfa.part3.Denotational.html#7686" class="Function">init</a> <a id="7840" href="plfa.part3.Denotational.html#7811" class="Bound">Î³</a> <a id="7842" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="7845" href="plfa.part3.Denotational.html#7741" class="Function">last</a> <a id="7850" href="plfa.part3.Denotational.html#7811" class="Bound">Î³</a><a id="7851" class="Symbol">)</a>
<a id="7853" href="/Denotational/#7790" class="Function">init-last</a> <a id="7863" class="Symbol">{</a><a id="7864" href="plfa.part3.Denotational.html#7864" class="Bound">Î“</a><a id="7865" class="Symbol">}</a> <a id="7867" href="plfa.part3.Denotational.html#7867" class="Bound">Î³</a> <a id="7869" class="Symbol">=</a> <a id="7871" href="/Substitution/#1927" class="Postulate">extensionality</a> <a id="7886" href="plfa.part3.Denotational.html#7900" class="Function">lemma</a>
  <a id="7894" class="Keyword">where</a> <a id="7900" href="/Denotational/#7900" class="Function">lemma</a> <a id="7906" class="Symbol">:</a> <a id="7908" class="Symbol">âˆ€</a> <a id="7910" class="Symbol">(</a><a id="7911" href="plfa.part3.Denotational.html#7911" class="Bound">x</a> <a id="7913" class="Symbol">:</a> <a id="7915" href="plfa.part3.Denotational.html#7864" class="Bound">Î“</a> <a id="7917" href="/Untyped/#3191" class="InductiveConstructor Operator">,</a> <a id="7919" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a> <a id="7921" href="plfa.part2.Untyped.html#3521" class="Datatype Operator">âˆ‹</a> <a id="7923" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="7924" class="Symbol">)</a> <a id="7926" class="Symbol">â†’</a> <a id="7928" href="plfa.part3.Denotational.html#7867" class="Bound">Î³</a> <a id="7930" href="plfa.part3.Denotational.html#7911" class="Bound">x</a> <a id="7932" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="7934" class="Symbol">(</a><a id="7935" href="plfa.part3.Denotational.html#7686" class="Function">init</a> <a id="7940" href="plfa.part3.Denotational.html#7867" class="Bound">Î³</a> <a id="7942" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="7945" href="plfa.part3.Denotational.html#7741" class="Function">last</a> <a id="7950" href="plfa.part3.Denotational.html#7867" class="Bound">Î³</a><a id="7951" class="Symbol">)</a> <a id="7953" href="plfa.part3.Denotational.html#7911" class="Bound">x</a>
        <a id="7963" href="/Denotational/#7900" class="Function">lemma</a> <a id="7969" href="/Untyped/#3557" class="InductiveConstructor">Z</a>      <a id="7976" class="Symbol">=</a>  <a id="7979" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
        <a id="7992" href="/Denotational/#7900" class="Function">lemma</a> <a id="7998" class="Symbol">(</a><a id="7999" href="/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="8001" href="plfa.part3.Denotational.html#8001" class="Bound">x</a><a id="8002" class="Symbol">)</a>  <a id="8005" class="Symbol">=</a>  <a id="8008" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre>
<p>We extend the <code class="language-plaintext highlighter-rouge">âŠ‘</code> relation point-wise to environments with the
following definition.</p>

<pre class="Agda"><a id="_`âŠ‘_"></a><a id="8108" href="/Denotational/#8108" class="Function Operator">_`âŠ‘_</a> <a id="8113" class="Symbol">:</a> <a id="8115" class="Symbol">âˆ€</a> <a id="8117" class="Symbol">{</a><a id="8118" href="plfa.part3.Denotational.html#8118" class="Bound">Î“</a><a id="8119" class="Symbol">}</a> <a id="8121" class="Symbol">â†’</a> <a id="8123" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8127" href="plfa.part3.Denotational.html#8118" class="Bound">Î“</a> <a id="8129" class="Symbol">â†’</a> <a id="8131" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8135" href="plfa.part3.Denotational.html#8118" class="Bound">Î“</a> <a id="8137" class="Symbol">â†’</a> <a id="8139" class="PrimitiveType">Set</a>
<a id="8143" href="/Denotational/#8108" class="Function Operator">_`âŠ‘_</a> <a id="8148" class="Symbol">{</a><a id="8149" href="plfa.part3.Denotational.html#8149" class="Bound">Î“</a><a id="8150" class="Symbol">}</a> <a id="8152" href="plfa.part3.Denotational.html#8152" class="Bound">Î³</a> <a id="8154" href="plfa.part3.Denotational.html#8154" class="Bound">Î´</a> <a id="8156" class="Symbol">=</a> <a id="8158" class="Symbol">âˆ€</a> <a id="8160" class="Symbol">(</a><a id="8161" href="plfa.part3.Denotational.html#8161" class="Bound">x</a> <a id="8163" class="Symbol">:</a> <a id="8165" href="plfa.part3.Denotational.html#8149" class="Bound">Î“</a> <a id="8167" href="/Untyped/#3521" class="Datatype Operator">âˆ‹</a> <a id="8169" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="8170" class="Symbol">)</a> <a id="8172" class="Symbol">â†’</a> <a id="8174" href="plfa.part3.Denotational.html#8152" class="Bound">Î³</a> <a id="8176" href="plfa.part3.Denotational.html#8161" class="Bound">x</a> <a id="8178" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="8180" href="plfa.part3.Denotational.html#8154" class="Bound">Î´</a> <a id="8182" href="plfa.part3.Denotational.html#8161" class="Bound">x</a>
</pre>
<p>We define a bottom environment and a join operator on environments,
which takes the point-wise join of their values.</p>

<pre class="Agda"><a id="`âŠ¥"></a><a id="8311" href="/Denotational/#8311" class="Function">`âŠ¥</a> <a id="8314" class="Symbol">:</a> <a id="8316" class="Symbol">âˆ€</a> <a id="8318" class="Symbol">{</a><a id="8319" href="plfa.part3.Denotational.html#8319" class="Bound">Î“</a><a id="8320" class="Symbol">}</a> <a id="8322" class="Symbol">â†’</a> <a id="8324" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8328" href="plfa.part3.Denotational.html#8319" class="Bound">Î“</a>
<a id="8330" href="/Denotational/#8311" class="Function">`âŠ¥</a> <a id="8333" href="plfa.part3.Denotational.html#8333" class="Bound">x</a> <a id="8335" class="Symbol">=</a> <a id="8337" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>

<a id="_`âŠ”_"></a><a id="8340" href="/Denotational/#8340" class="Function Operator">_`âŠ”_</a> <a id="8345" class="Symbol">:</a> <a id="8347" class="Symbol">âˆ€</a> <a id="8349" class="Symbol">{</a><a id="8350" href="plfa.part3.Denotational.html#8350" class="Bound">Î“</a><a id="8351" class="Symbol">}</a> <a id="8353" class="Symbol">â†’</a> <a id="8355" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8359" href="plfa.part3.Denotational.html#8350" class="Bound">Î“</a> <a id="8361" class="Symbol">â†’</a> <a id="8363" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8367" href="plfa.part3.Denotational.html#8350" class="Bound">Î“</a> <a id="8369" class="Symbol">â†’</a> <a id="8371" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8375" href="plfa.part3.Denotational.html#8350" class="Bound">Î“</a>
<a id="8377" class="Symbol">(</a><a id="8378" href="/Denotational/#8378" class="Bound">Î³</a> <a id="8380" href="plfa.part3.Denotational.html#8340" class="Function Operator">`âŠ”</a> <a id="8383" href="plfa.part3.Denotational.html#8383" class="Bound">Î´</a><a id="8384" class="Symbol">)</a> <a id="8386" href="plfa.part3.Denotational.html#8386" class="Bound">x</a> <a id="8388" class="Symbol">=</a> <a id="8390" href="plfa.part3.Denotational.html#8378" class="Bound">Î³</a> <a id="8392" href="plfa.part3.Denotational.html#8386" class="Bound">x</a> <a id="8394" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="8396" href="plfa.part3.Denotational.html#8383" class="Bound">Î´</a> <a id="8398" href="plfa.part3.Denotational.html#8386" class="Bound">x</a>
</pre>
<p>The <code class="language-plaintext highlighter-rouge">âŠ‘-refl</code>, <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R1</code>, and <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R2</code> rules lift to environments.  So
the join of two environments <code class="language-plaintext highlighter-rouge">Î³</code> and <code class="language-plaintext highlighter-rouge">Î´</code> is greater than the first
environment <code class="language-plaintext highlighter-rouge">Î³</code> or the second environment <code class="language-plaintext highlighter-rouge">Î´</code>.</p>

<pre class="Agda"><a id="`âŠ‘-refl"></a><a id="8599" href="/Denotational/#8599" class="Function">`âŠ‘-refl</a> <a id="8607" class="Symbol">:</a> <a id="8609" class="Symbol">âˆ€</a> <a id="8611" class="Symbol">{</a><a id="8612" href="plfa.part3.Denotational.html#8612" class="Bound">Î“</a><a id="8613" class="Symbol">}</a> <a id="8615" class="Symbol">{</a><a id="8616" href="plfa.part3.Denotational.html#8616" class="Bound">Î³</a> <a id="8618" class="Symbol">:</a> <a id="8620" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8624" href="plfa.part3.Denotational.html#8612" class="Bound">Î“</a><a id="8625" class="Symbol">}</a> <a id="8627" class="Symbol">â†’</a> <a id="8629" href="plfa.part3.Denotational.html#8616" class="Bound">Î³</a> <a id="8631" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="8634" href="plfa.part3.Denotational.html#8616" class="Bound">Î³</a>
<a id="8636" href="/Denotational/#8599" class="Function">`âŠ‘-refl</a> <a id="8644" class="Symbol">{</a><a id="8645" href="plfa.part3.Denotational.html#8645" class="Bound">Î“</a><a id="8646" class="Symbol">}</a> <a id="8648" class="Symbol">{</a><a id="8649" href="plfa.part3.Denotational.html#8649" class="Bound">Î³</a><a id="8650" class="Symbol">}</a> <a id="8652" href="plfa.part3.Denotational.html#8652" class="Bound">x</a> <a id="8654" class="Symbol">=</a> <a id="8656" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="8663" class="Symbol">{</a><a id="8664" href="plfa.part3.Denotational.html#8649" class="Bound">Î³</a> <a id="8666" href="plfa.part3.Denotational.html#8652" class="Bound">x</a><a id="8667" class="Symbol">}</a>

<a id="âŠ‘-env-conj-R1"></a><a id="8670" href="/Denotational/#8670" class="Function">âŠ‘-env-conj-R1</a> <a id="8684" class="Symbol">:</a> <a id="8686" class="Symbol">âˆ€</a> <a id="8688" class="Symbol">{</a><a id="8689" href="plfa.part3.Denotational.html#8689" class="Bound">Î“</a><a id="8690" class="Symbol">}</a> <a id="8692" class="Symbol">â†’</a> <a id="8694" class="Symbol">(</a><a id="8695" href="plfa.part3.Denotational.html#8695" class="Bound">Î³</a> <a id="8697" class="Symbol">:</a> <a id="8699" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8703" href="plfa.part3.Denotational.html#8689" class="Bound">Î“</a><a id="8704" class="Symbol">)</a> <a id="8706" class="Symbol">â†’</a> <a id="8708" class="Symbol">(</a><a id="8709" href="plfa.part3.Denotational.html#8709" class="Bound">Î´</a> <a id="8711" class="Symbol">:</a> <a id="8713" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8717" href="plfa.part3.Denotational.html#8689" class="Bound">Î“</a><a id="8718" class="Symbol">)</a> <a id="8720" class="Symbol">â†’</a> <a id="8722" href="plfa.part3.Denotational.html#8695" class="Bound">Î³</a> <a id="8724" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="8727" class="Symbol">(</a><a id="8728" href="plfa.part3.Denotational.html#8695" class="Bound">Î³</a> <a id="8730" href="plfa.part3.Denotational.html#8340" class="Function Operator">`âŠ”</a> <a id="8733" href="plfa.part3.Denotational.html#8709" class="Bound">Î´</a><a id="8734" class="Symbol">)</a>
<a id="8736" href="/Denotational/#8670" class="Function">âŠ‘-env-conj-R1</a> <a id="8750" href="plfa.part3.Denotational.html#8750" class="Bound">Î³</a> <a id="8752" href="plfa.part3.Denotational.html#8752" class="Bound">Î´</a> <a id="8754" href="plfa.part3.Denotational.html#8754" class="Bound">x</a> <a id="8756" class="Symbol">=</a> <a id="8758" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="8768" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>

<a id="âŠ‘-env-conj-R2"></a><a id="8776" href="/Denotational/#8776" class="Function">âŠ‘-env-conj-R2</a> <a id="8790" class="Symbol">:</a> <a id="8792" class="Symbol">âˆ€</a> <a id="8794" class="Symbol">{</a><a id="8795" href="plfa.part3.Denotational.html#8795" class="Bound">Î“</a><a id="8796" class="Symbol">}</a> <a id="8798" class="Symbol">â†’</a> <a id="8800" class="Symbol">(</a><a id="8801" href="plfa.part3.Denotational.html#8801" class="Bound">Î³</a> <a id="8803" class="Symbol">:</a> <a id="8805" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8809" href="plfa.part3.Denotational.html#8795" class="Bound">Î“</a><a id="8810" class="Symbol">)</a> <a id="8812" class="Symbol">â†’</a> <a id="8814" class="Symbol">(</a><a id="8815" href="plfa.part3.Denotational.html#8815" class="Bound">Î´</a> <a id="8817" class="Symbol">:</a> <a id="8819" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="8823" href="plfa.part3.Denotational.html#8795" class="Bound">Î“</a><a id="8824" class="Symbol">)</a> <a id="8826" class="Symbol">â†’</a> <a id="8828" href="plfa.part3.Denotational.html#8815" class="Bound">Î´</a> <a id="8830" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="8833" class="Symbol">(</a><a id="8834" href="plfa.part3.Denotational.html#8801" class="Bound">Î³</a> <a id="8836" href="plfa.part3.Denotational.html#8340" class="Function Operator">`âŠ”</a> <a id="8839" href="plfa.part3.Denotational.html#8815" class="Bound">Î´</a><a id="8840" class="Symbol">)</a>
<a id="8842" href="/Denotational/#8776" class="Function">âŠ‘-env-conj-R2</a> <a id="8856" href="plfa.part3.Denotational.html#8856" class="Bound">Î³</a> <a id="8858" href="plfa.part3.Denotational.html#8858" class="Bound">Î´</a> <a id="8860" href="plfa.part3.Denotational.html#8860" class="Bound">x</a> <a id="8862" class="Symbol">=</a> <a id="8864" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="8874" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>
</pre>
<h2 id="denotational-semantics">Denotational Semantics</h2>

<p>We define the semantics with a judgment of the form <code class="language-plaintext highlighter-rouge">Ï âŠ¢ M â†“ v</code>,
where <code class="language-plaintext highlighter-rouge">Ï</code> is the environment, <code class="language-plaintext highlighter-rouge">M</code> the program, and <code class="language-plaintext highlighter-rouge">v</code> is a result value.
For readers familiar with big-step semantics, this notation will feel
quite natural, but donâ€™t let the similarity fool you.  There are
subtle but important differences! So here is the definition of the
semantics, which we discuss in detail in the following paragraphs.</p>

<pre class="Agda"><a id="9326" class="Keyword">infix</a> <a id="9332" class="Number">3</a> <a id="9334" href="/Denotational/#9346" class="Datatype Operator">_âŠ¢_â†“_</a>

<a id="9341" class="Keyword">data</a> <a id="_âŠ¢_â†“_"></a><a id="9346" href="/Denotational/#9346" class="Datatype Operator">_âŠ¢_â†“_</a> <a id="9352" class="Symbol">:</a> <a id="9354" class="Symbol">âˆ€{</a><a id="9356" href="plfa.part3.Denotational.html#9356" class="Bound">Î“</a><a id="9357" class="Symbol">}</a> <a id="9359" class="Symbol">â†’</a> <a id="9361" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9365" href="plfa.part3.Denotational.html#9356" class="Bound">Î“</a> <a id="9367" class="Symbol">â†’</a> <a id="9369" class="Symbol">(</a><a id="9370" href="plfa.part3.Denotational.html#9356" class="Bound">Î“</a> <a id="9372" href="/Untyped/#4294" class="Datatype Operator">âŠ¢</a> <a id="9374" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="9375" class="Symbol">)</a> <a id="9377" class="Symbol">â†’</a> <a id="9379" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="9385" class="Symbol">â†’</a> <a id="9387" class="PrimitiveType">Set</a> <a id="9391" class="Keyword">where</a>

  <a id="_âŠ¢_â†“_.var"></a><a id="9400" href="/Denotational/#9400" class="InductiveConstructor">var</a> <a id="9404" class="Symbol">:</a> <a id="9406" class="Symbol">âˆ€</a> <a id="9408" class="Symbol">{</a><a id="9409" href="plfa.part3.Denotational.html#9409" class="Bound">Î“</a><a id="9410" class="Symbol">}</a> <a id="9412" class="Symbol">{</a><a id="9413" href="plfa.part3.Denotational.html#9413" class="Bound">Î³</a> <a id="9415" class="Symbol">:</a> <a id="9417" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9421" href="plfa.part3.Denotational.html#9409" class="Bound">Î“</a><a id="9422" class="Symbol">}</a> <a id="9424" class="Symbol">{</a><a id="9425" href="plfa.part3.Denotational.html#9425" class="Bound">x</a><a id="9426" class="Symbol">}</a>
      <a id="9434" class="Comment">---------------</a>
    <a id="9454" class="Symbol">â†’</a> <a id="9456" href="/Denotational/#9413" class="Bound">Î³</a> <a id="9458" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9460" class="Symbol">(</a><a id="9461" href="/Untyped/#4330" class="InductiveConstructor Operator">`</a> <a id="9463" href="plfa.part3.Denotational.html#9425" class="Bound">x</a><a id="9464" class="Symbol">)</a> <a id="9466" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9468" href="plfa.part3.Denotational.html#9413" class="Bound">Î³</a> <a id="9470" href="plfa.part3.Denotational.html#9425" class="Bound">x</a>

  <a id="_âŠ¢_â†“_.â†¦-elim"></a><a id="9475" href="/Denotational/#9475" class="InductiveConstructor">â†¦-elim</a> <a id="9482" class="Symbol">:</a> <a id="9484" class="Symbol">âˆ€</a> <a id="9486" class="Symbol">{</a><a id="9487" href="plfa.part3.Denotational.html#9487" class="Bound">Î“</a><a id="9488" class="Symbol">}</a> <a id="9490" class="Symbol">{</a><a id="9491" href="plfa.part3.Denotational.html#9491" class="Bound">Î³</a> <a id="9493" class="Symbol">:</a> <a id="9495" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9499" href="plfa.part3.Denotational.html#9487" class="Bound">Î“</a><a id="9500" class="Symbol">}</a> <a id="9502" class="Symbol">{</a><a id="9503" href="plfa.part3.Denotational.html#9503" class="Bound">L</a> <a id="9505" href="plfa.part3.Denotational.html#9505" class="Bound">M</a> <a id="9507" href="plfa.part3.Denotational.html#9507" class="Bound">v</a> <a id="9509" href="plfa.part3.Denotational.html#9509" class="Bound">w</a><a id="9510" class="Symbol">}</a>
    <a id="9516" class="Symbol">â†’</a> <a id="9518" href="/Denotational/#9491" class="Bound">Î³</a> <a id="9520" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9522" href="plfa.part3.Denotational.html#9503" class="Bound">L</a> <a id="9524" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9526" class="Symbol">(</a><a id="9527" href="plfa.part3.Denotational.html#9507" class="Bound">v</a> <a id="9529" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="9531" href="plfa.part3.Denotational.html#9509" class="Bound">w</a><a id="9532" class="Symbol">)</a>
    <a id="9538" class="Symbol">â†’</a> <a id="9540" href="/Denotational/#9491" class="Bound">Î³</a> <a id="9542" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9544" href="plfa.part3.Denotational.html#9505" class="Bound">M</a> <a id="9546" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9548" href="plfa.part3.Denotational.html#9507" class="Bound">v</a>
      <a id="9556" class="Comment">---------------</a>
    <a id="9576" class="Symbol">â†’</a> <a id="9578" href="/Denotational/#9491" class="Bound">Î³</a> <a id="9580" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9582" class="Symbol">(</a><a id="9583" href="plfa.part3.Denotational.html#9503" class="Bound">L</a> <a id="9585" href="/Untyped/#4442" class="InductiveConstructor Operator">Â·</a> <a id="9587" href="plfa.part3.Denotational.html#9505" class="Bound">M</a><a id="9588" class="Symbol">)</a> <a id="9590" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9592" href="plfa.part3.Denotational.html#9509" class="Bound">w</a>

  <a id="_âŠ¢_â†“_.â†¦-intro"></a><a id="9597" href="/Denotational/#9597" class="InductiveConstructor">â†¦-intro</a> <a id="9605" class="Symbol">:</a> <a id="9607" class="Symbol">âˆ€</a> <a id="9609" class="Symbol">{</a><a id="9610" href="plfa.part3.Denotational.html#9610" class="Bound">Î“</a><a id="9611" class="Symbol">}</a> <a id="9613" class="Symbol">{</a><a id="9614" href="plfa.part3.Denotational.html#9614" class="Bound">Î³</a> <a id="9616" class="Symbol">:</a> <a id="9618" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9622" href="plfa.part3.Denotational.html#9610" class="Bound">Î“</a><a id="9623" class="Symbol">}</a> <a id="9625" class="Symbol">{</a><a id="9626" href="plfa.part3.Denotational.html#9626" class="Bound">N</a> <a id="9628" href="plfa.part3.Denotational.html#9628" class="Bound">v</a> <a id="9630" href="plfa.part3.Denotational.html#9630" class="Bound">w</a><a id="9631" class="Symbol">}</a>
    <a id="9637" class="Symbol">â†’</a> <a id="9639" href="/Denotational/#9614" class="Bound">Î³</a> <a id="9641" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="9644" href="plfa.part3.Denotational.html#9628" class="Bound">v</a> <a id="9646" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9648" href="plfa.part3.Denotational.html#9626" class="Bound">N</a> <a id="9650" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9652" href="plfa.part3.Denotational.html#9630" class="Bound">w</a>
      <a id="9660" class="Comment">-------------------</a>
    <a id="9684" class="Symbol">â†’</a> <a id="9686" href="/Denotational/#9614" class="Bound">Î³</a> <a id="9688" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9690" class="Symbol">(</a><a id="9691" href="/Untyped/#4382" class="InductiveConstructor Operator">Æ›</a> <a id="9693" href="plfa.part3.Denotational.html#9626" class="Bound">N</a><a id="9694" class="Symbol">)</a> <a id="9696" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9698" class="Symbol">(</a><a id="9699" href="plfa.part3.Denotational.html#9628" class="Bound">v</a> <a id="9701" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="9703" href="plfa.part3.Denotational.html#9630" class="Bound">w</a><a id="9704" class="Symbol">)</a>

  <a id="_âŠ¢_â†“_.âŠ¥-intro"></a><a id="9709" href="/Denotational/#9709" class="InductiveConstructor">âŠ¥-intro</a> <a id="9717" class="Symbol">:</a> <a id="9719" class="Symbol">âˆ€</a> <a id="9721" class="Symbol">{</a><a id="9722" href="plfa.part3.Denotational.html#9722" class="Bound">Î“</a><a id="9723" class="Symbol">}</a> <a id="9725" class="Symbol">{</a><a id="9726" href="plfa.part3.Denotational.html#9726" class="Bound">Î³</a> <a id="9728" class="Symbol">:</a> <a id="9730" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9734" href="plfa.part3.Denotational.html#9722" class="Bound">Î“</a><a id="9735" class="Symbol">}</a> <a id="9737" class="Symbol">{</a><a id="9738" href="plfa.part3.Denotational.html#9738" class="Bound">M</a><a id="9739" class="Symbol">}</a>
      <a id="9747" class="Comment">---------</a>
    <a id="9761" class="Symbol">â†’</a> <a id="9763" href="/Denotational/#9726" class="Bound">Î³</a> <a id="9765" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9767" href="plfa.part3.Denotational.html#9738" class="Bound">M</a> <a id="9769" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9771" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>

  <a id="_âŠ¢_â†“_.âŠ”-intro"></a><a id="9776" href="/Denotational/#9776" class="InductiveConstructor">âŠ”-intro</a> <a id="9784" class="Symbol">:</a> <a id="9786" class="Symbol">âˆ€</a> <a id="9788" class="Symbol">{</a><a id="9789" href="plfa.part3.Denotational.html#9789" class="Bound">Î“</a><a id="9790" class="Symbol">}</a> <a id="9792" class="Symbol">{</a><a id="9793" href="plfa.part3.Denotational.html#9793" class="Bound">Î³</a> <a id="9795" class="Symbol">:</a> <a id="9797" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9801" href="plfa.part3.Denotational.html#9789" class="Bound">Î“</a><a id="9802" class="Symbol">}</a> <a id="9804" class="Symbol">{</a><a id="9805" href="plfa.part3.Denotational.html#9805" class="Bound">M</a> <a id="9807" href="plfa.part3.Denotational.html#9807" class="Bound">v</a> <a id="9809" href="plfa.part3.Denotational.html#9809" class="Bound">w</a><a id="9810" class="Symbol">}</a>
    <a id="9816" class="Symbol">â†’</a> <a id="9818" href="/Denotational/#9793" class="Bound">Î³</a> <a id="9820" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9822" href="plfa.part3.Denotational.html#9805" class="Bound">M</a> <a id="9824" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9826" href="plfa.part3.Denotational.html#9807" class="Bound">v</a>
    <a id="9832" class="Symbol">â†’</a> <a id="9834" href="/Denotational/#9793" class="Bound">Î³</a> <a id="9836" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9838" href="plfa.part3.Denotational.html#9805" class="Bound">M</a> <a id="9840" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9842" href="plfa.part3.Denotational.html#9809" class="Bound">w</a>
      <a id="9850" class="Comment">---------------</a>
    <a id="9870" class="Symbol">â†’</a> <a id="9872" href="/Denotational/#9793" class="Bound">Î³</a> <a id="9874" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9876" href="plfa.part3.Denotational.html#9805" class="Bound">M</a> <a id="9878" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9880" class="Symbol">(</a><a id="9881" href="plfa.part3.Denotational.html#9807" class="Bound">v</a> <a id="9883" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="9885" href="plfa.part3.Denotational.html#9809" class="Bound">w</a><a id="9886" class="Symbol">)</a>

  <a id="_âŠ¢_â†“_.sub"></a><a id="9891" href="/Denotational/#9891" class="InductiveConstructor">sub</a> <a id="9895" class="Symbol">:</a> <a id="9897" class="Symbol">âˆ€</a> <a id="9899" class="Symbol">{</a><a id="9900" href="plfa.part3.Denotational.html#9900" class="Bound">Î“</a><a id="9901" class="Symbol">}</a> <a id="9903" class="Symbol">{</a><a id="9904" href="plfa.part3.Denotational.html#9904" class="Bound">Î³</a> <a id="9906" class="Symbol">:</a> <a id="9908" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="9912" href="plfa.part3.Denotational.html#9900" class="Bound">Î“</a><a id="9913" class="Symbol">}</a> <a id="9915" class="Symbol">{</a><a id="9916" href="plfa.part3.Denotational.html#9916" class="Bound">M</a> <a id="9918" href="plfa.part3.Denotational.html#9918" class="Bound">v</a> <a id="9920" href="plfa.part3.Denotational.html#9920" class="Bound">w</a><a id="9921" class="Symbol">}</a>
    <a id="9927" class="Symbol">â†’</a> <a id="9929" href="/Denotational/#9904" class="Bound">Î³</a> <a id="9931" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9933" href="plfa.part3.Denotational.html#9916" class="Bound">M</a> <a id="9935" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9937" href="plfa.part3.Denotational.html#9918" class="Bound">v</a>
    <a id="9943" class="Symbol">â†’</a> <a id="9945" href="/Denotational/#9920" class="Bound">w</a> <a id="9947" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="9949" href="plfa.part3.Denotational.html#9918" class="Bound">v</a>
      <a id="9957" class="Comment">---------</a>
    <a id="9971" class="Symbol">â†’</a> <a id="9973" href="/Denotational/#9904" class="Bound">Î³</a> <a id="9975" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="9977" href="plfa.part3.Denotational.html#9916" class="Bound">M</a> <a id="9979" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="9981" href="plfa.part3.Denotational.html#9920" class="Bound">w</a>
</pre>
<p>Consider the rule for lambda abstractions, <code class="language-plaintext highlighter-rouge">â†¦-intro</code>.  It says that a
lambda abstraction results in a single-entry table that maps the input
<code class="language-plaintext highlighter-rouge">v</code> to the output <code class="language-plaintext highlighter-rouge">w</code>, provided that evaluating the body in an
environment with <code class="language-plaintext highlighter-rouge">v</code> bound to its parameter produces the output <code class="language-plaintext highlighter-rouge">w</code>.
As a simple example of this rule, we can see that the identity function
maps <code class="language-plaintext highlighter-rouge">âŠ¥</code> to <code class="language-plaintext highlighter-rouge">âŠ¥</code> and also that it maps <code class="language-plaintext highlighter-rouge">âŠ¥ â†¦ âŠ¥</code> to <code class="language-plaintext highlighter-rouge">âŠ¥ â†¦ âŠ¥</code>.</p>

<pre class="Agda"><a id="id"></a><a id="10396" href="/Denotational/#10396" class="Function">id</a> <a id="10399" class="Symbol">:</a> <a id="10401" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a> <a id="10403" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">âŠ¢</a> <a id="10405" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a>
<a id="10407" href="/Denotational/#10396" class="Function">id</a> <a id="10410" class="Symbol">=</a> <a id="10412" href="/Untyped/#4382" class="InductiveConstructor Operator">Æ›</a> <a id="10414" href="plfa.part2.Untyped.html#5111" class="Function Operator">#</a> <a id="10416" class="Number">0</a>
</pre>
<pre class="Agda"><a id="denot-id1"></a><a id="10427" href="/Denotational/#10427" class="Function">denot-id1</a> <a id="10437" class="Symbol">:</a> <a id="10439" class="Symbol">âˆ€</a> <a id="10441" class="Symbol">{</a><a id="10442" href="plfa.part3.Denotational.html#10442" class="Bound">Î³</a><a id="10443" class="Symbol">}</a> <a id="10445" class="Symbol">â†’</a> <a id="10447" href="plfa.part3.Denotational.html#10442" class="Bound">Î³</a> <a id="10449" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="10451" href="plfa.part3.Denotational.html#10396" class="Function">id</a> <a id="10454" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="10456" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="10458" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="10460" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="10462" href="/Denotational/#10427" class="Function">denot-id1</a> <a id="10472" class="Symbol">=</a> <a id="10474" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="10482" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a>

<a id="denot-id2"></a><a id="10487" href="/Denotational/#10487" class="Function">denot-id2</a> <a id="10497" class="Symbol">:</a> <a id="10499" class="Symbol">âˆ€</a> <a id="10501" class="Symbol">{</a><a id="10502" href="plfa.part3.Denotational.html#10502" class="Bound">Î³</a><a id="10503" class="Symbol">}</a> <a id="10505" class="Symbol">â†’</a> <a id="10507" href="plfa.part3.Denotational.html#10502" class="Bound">Î³</a> <a id="10509" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="10511" href="plfa.part3.Denotational.html#10396" class="Function">id</a> <a id="10514" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="10516" class="Symbol">(</a><a id="10517" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="10519" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="10521" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="10522" class="Symbol">)</a> <a id="10524" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="10526" class="Symbol">(</a><a id="10527" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="10529" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="10531" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="10532" class="Symbol">)</a>
<a id="10534" href="/Denotational/#10487" class="Function">denot-id2</a> <a id="10544" class="Symbol">=</a> <a id="10546" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="10554" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a>
</pre>
<p>Of course, we will need tables with many rows to capture the meaning
of lambda abstractions. These can be constructed using the <code class="language-plaintext highlighter-rouge">âŠ”-intro</code>
rule.  If term M (typically a lambda abstraction) can produce both
tables <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code>, then it produces the combined table <code class="language-plaintext highlighter-rouge">v âŠ” w</code>. One
can take an operational view of the rules <code class="language-plaintext highlighter-rouge">â†¦-intro</code> and <code class="language-plaintext highlighter-rouge">âŠ”-intro</code> by
imagining that when an interpreter first comes to a lambda
abstraction, it pre-evaluates the function on a bunch of randomly
chosen arguments, using many instances of the rule <code class="language-plaintext highlighter-rouge">â†¦-intro</code>, and then
joins them into a big table using many instances of the rule <code class="language-plaintext highlighter-rouge">âŠ”-intro</code>.
In the following we show that the identity function produces a table
containing both of the previous results, <code class="language-plaintext highlighter-rouge">âŠ¥ â†¦ âŠ¥</code> and
<code class="language-plaintext highlighter-rouge">(âŠ¥ â†¦ âŠ¥) â†¦ (âŠ¥ â†¦ âŠ¥)</code>.</p>

<pre class="Agda"><a id="denot-id3"></a><a id="11322" href="/Denotational/#11322" class="Function">denot-id3</a> <a id="11332" class="Symbol">:</a> <a id="11334" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="11337" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="11339" href="plfa.part3.Denotational.html#10396" class="Function">id</a> <a id="11342" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="11344" class="Symbol">(</a><a id="11345" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="11347" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="11349" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="11350" class="Symbol">)</a> <a id="11352" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="11354" class="Symbol">(</a><a id="11355" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="11357" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="11359" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="11360" class="Symbol">)</a> <a id="11362" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="11364" class="Symbol">(</a><a id="11365" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="11367" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="11369" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="11370" class="Symbol">)</a>
<a id="11372" href="/Denotational/#11322" class="Function">denot-id3</a> <a id="11382" class="Symbol">=</a> <a id="11384" href="plfa.part3.Denotational.html#9776" class="InductiveConstructor">âŠ”-intro</a> <a id="11392" href="plfa.part3.Denotational.html#10427" class="Function">denot-id1</a> <a id="11402" href="plfa.part3.Denotational.html#10487" class="Function">denot-id2</a>
</pre>
<p>We most often think of the judgment <code class="language-plaintext highlighter-rouge">Î³ âŠ¢ M â†“ v</code> as taking the
environment <code class="language-plaintext highlighter-rouge">Î³</code> and term <code class="language-plaintext highlighter-rouge">M</code> as input, producing the result <code class="language-plaintext highlighter-rouge">v</code>.  However,
it is worth emphasizing that the semantics is a <em>relation</em>.  The above
results for the identity function show that the same environment and
term can be mapped to different results. However, the results for a
given <code class="language-plaintext highlighter-rouge">Î³</code> and <code class="language-plaintext highlighter-rouge">M</code> are not <em>too</em> different, they are all finite
approximations of the same function. Perhaps a better way of thinking
about the judgment <code class="language-plaintext highlighter-rouge">Î³ âŠ¢ M â†“ v</code> is that the <code class="language-plaintext highlighter-rouge">Î³</code>, <code class="language-plaintext highlighter-rouge">M</code>, and <code class="language-plaintext highlighter-rouge">v</code> are all inputs
and the semantics either confirms or denies whether <code class="language-plaintext highlighter-rouge">v</code> is an accurate
partial description of the result of <code class="language-plaintext highlighter-rouge">M</code> in environment <code class="language-plaintext highlighter-rouge">Î³</code>.</p>

<p>Next we consider the meaning of function application as given by the
<code class="language-plaintext highlighter-rouge">â†¦-elim</code> rule. In the premise of the rule we have that <code class="language-plaintext highlighter-rouge">L</code> maps <code class="language-plaintext highlighter-rouge">v</code> to
<code class="language-plaintext highlighter-rouge">w</code>. So if <code class="language-plaintext highlighter-rouge">M</code> produces <code class="language-plaintext highlighter-rouge">v</code>, then the application of <code class="language-plaintext highlighter-rouge">L</code> to <code class="language-plaintext highlighter-rouge">M</code>
produces <code class="language-plaintext highlighter-rouge">w</code>.</p>

<p>As an example of function application and the <code class="language-plaintext highlighter-rouge">â†¦-elim</code> rule, we apply
the identity function to itself.  Indeed, we have both that
<code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ id â†“ (u â†¦ u) â†¦ (u â†¦ u)</code> and also <code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ id â†“ (u â†¦ u)</code>, so we can
apply the rule <code class="language-plaintext highlighter-rouge">â†¦-elim</code>.</p>

<pre class="Agda"><a id="id-app-id"></a><a id="12551" href="/Denotational/#12551" class="Function">id-app-id</a> <a id="12561" class="Symbol">:</a> <a id="12563" class="Symbol">âˆ€</a> <a id="12565" class="Symbol">{</a><a id="12566" href="plfa.part3.Denotational.html#12566" class="Bound">u</a> <a id="12568" class="Symbol">:</a> <a id="12570" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="12575" class="Symbol">}</a> <a id="12577" class="Symbol">â†’</a> <a id="12579" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="12582" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="12584" href="plfa.part3.Denotational.html#10396" class="Function">id</a> <a id="12587" href="/Untyped/#4442" class="InductiveConstructor Operator">Â·</a> <a id="12589" href="plfa.part3.Denotational.html#10396" class="Function">id</a> <a id="12592" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="12594" class="Symbol">(</a><a id="12595" href="plfa.part3.Denotational.html#12566" class="Bound">u</a> <a id="12597" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="12599" href="plfa.part3.Denotational.html#12566" class="Bound">u</a><a id="12600" class="Symbol">)</a>
<a id="12602" href="/Denotational/#12551" class="Function">id-app-id</a> <a id="12612" class="Symbol">{</a><a id="12613" href="plfa.part3.Denotational.html#12613" class="Bound">u</a><a id="12614" class="Symbol">}</a> <a id="12616" class="Symbol">=</a> <a id="12618" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="12625" class="Symbol">(</a><a id="12626" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="12634" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a><a id="12637" class="Symbol">)</a> <a id="12639" class="Symbol">(</a><a id="12640" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="12648" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a><a id="12651" class="Symbol">)</a>
</pre>
<p>Next we revisit the Church numeral two: <code class="language-plaintext highlighter-rouge">Î» f. Î» u. (f (f u))</code>.
This function has two parameters: a function <code class="language-plaintext highlighter-rouge">f</code> and an arbitrary value
<code class="language-plaintext highlighter-rouge">u</code>, and it applies <code class="language-plaintext highlighter-rouge">f</code> twice. So <code class="language-plaintext highlighter-rouge">f</code> must map <code class="language-plaintext highlighter-rouge">u</code> to some value, which
weâ€™ll name <code class="language-plaintext highlighter-rouge">v</code>. Then for the second application,
<code class="language-plaintext highlighter-rouge">f</code> must map <code class="language-plaintext highlighter-rouge">v</code> to some value. Letâ€™s name it <code class="language-plaintext highlighter-rouge">w</code>. So the functionâ€™s
table must include two entries, both <code class="language-plaintext highlighter-rouge">u â†¦ v</code> and <code class="language-plaintext highlighter-rouge">v â†¦ w</code>. For each
application of the table, we extract the appropriate entry from it
using the <code class="language-plaintext highlighter-rouge">sub</code> rule.  In particular, we use the âŠ‘-conj-R1 and
âŠ‘-conj-R2 to select <code class="language-plaintext highlighter-rouge">u â†¦ v</code> and <code class="language-plaintext highlighter-rouge">v â†¦ w</code>, respectively, from the table
<code class="language-plaintext highlighter-rouge">u â†¦ v âŠ” v â†¦ w</code>. So the meaning of twoá¶œ is that it takes this table
and parameter <code class="language-plaintext highlighter-rouge">u</code>, and it returns <code class="language-plaintext highlighter-rouge">w</code>.  Indeed we derive this as
follows.</p>

<pre class="Agda"><a id="denot-twoá¶œ"></a><a id="13397" href="/Denotational/#13397" class="Function">denot-twoá¶œ</a> <a id="13408" class="Symbol">:</a> <a id="13410" class="Symbol">âˆ€{</a><a id="13412" href="plfa.part3.Denotational.html#13412" class="Bound">u</a> <a id="13414" href="plfa.part3.Denotational.html#13414" class="Bound">v</a> <a id="13416" href="plfa.part3.Denotational.html#13416" class="Bound">w</a> <a id="13418" class="Symbol">:</a> <a id="13420" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="13425" class="Symbol">}</a> <a id="13427" class="Symbol">â†’</a> <a id="13429" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="13432" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="13434" href="/Untyped/#5242" class="Function">twoá¶œ</a> <a id="13439" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="13441" class="Symbol">((</a><a id="13443" href="plfa.part3.Denotational.html#13412" class="Bound">u</a> <a id="13445" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13447" href="plfa.part3.Denotational.html#13414" class="Bound">v</a> <a id="13449" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="13451" href="plfa.part3.Denotational.html#13414" class="Bound">v</a> <a id="13453" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13455" href="plfa.part3.Denotational.html#13416" class="Bound">w</a><a id="13456" class="Symbol">)</a> <a id="13458" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13460" href="plfa.part3.Denotational.html#13412" class="Bound">u</a> <a id="13462" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13464" href="plfa.part3.Denotational.html#13416" class="Bound">w</a><a id="13465" class="Symbol">)</a>
<a id="13467" href="/Denotational/#13397" class="Function">denot-twoá¶œ</a> <a id="13478" class="Symbol">{</a><a id="13479" href="plfa.part3.Denotational.html#13479" class="Bound">u</a><a id="13480" class="Symbol">}{</a><a id="13482" href="plfa.part3.Denotational.html#13482" class="Bound">v</a><a id="13483" class="Symbol">}{</a><a id="13485" href="plfa.part3.Denotational.html#13485" class="Bound">w</a><a id="13486" class="Symbol">}</a> <a id="13488" class="Symbol">=</a>
  <a id="13492" href="/Denotational/#9597" class="InductiveConstructor">â†¦-intro</a> <a id="13500" class="Symbol">(</a><a id="13501" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="13509" class="Symbol">(</a><a id="13510" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="13517" class="Symbol">(</a><a id="13518" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="13522" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="13526" href="plfa.part3.Denotational.html#13568" class="Function">lt1</a><a id="13529" class="Symbol">)</a> <a id="13531" class="Symbol">(</a><a id="13532" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="13539" class="Symbol">(</a><a id="13540" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="13544" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="13548" href="plfa.part3.Denotational.html#13651" class="Function">lt2</a><a id="13551" class="Symbol">)</a> <a id="13553" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a><a id="13556" class="Symbol">)))</a>
  <a id="13562" class="Keyword">where</a> <a id="13568" href="/Denotational/#13568" class="Function">lt1</a> <a id="13572" class="Symbol">:</a> <a id="13574" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13576" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13578" href="plfa.part3.Denotational.html#13485" class="Bound">w</a> <a id="13580" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="13582" href="plfa.part3.Denotational.html#13479" class="Bound">u</a> <a id="13584" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13586" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13588" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="13590" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13592" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13594" href="plfa.part3.Denotational.html#13485" class="Bound">w</a>
        <a id="13604" href="/Denotational/#13568" class="Function">lt1</a> <a id="13608" class="Symbol">=</a> <a id="13610" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="13620" class="Symbol">(</a><a id="13621" href="plfa.part3.Denotational.html#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="13627" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="13634" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="13640" class="Symbol">)</a>

        <a id="13651" href="/Denotational/#13651" class="Function">lt2</a> <a id="13655" class="Symbol">:</a> <a id="13657" href="plfa.part3.Denotational.html#13479" class="Bound">u</a> <a id="13659" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13661" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13663" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="13665" href="plfa.part3.Denotational.html#13479" class="Bound">u</a> <a id="13667" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13669" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13671" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="13673" href="plfa.part3.Denotational.html#13482" class="Bound">v</a> <a id="13675" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="13677" href="plfa.part3.Denotational.html#13485" class="Bound">w</a>
        <a id="13687" href="/Denotational/#13651" class="Function">lt2</a> <a id="13691" class="Symbol">=</a> <a id="13693" class="Symbol">(</a><a id="13694" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="13704" class="Symbol">(</a><a id="13705" href="plfa.part3.Denotational.html#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="13711" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="13718" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="13724" class="Symbol">))</a>
</pre>

<p>Next we have a classic example of self application: <code class="language-plaintext highlighter-rouge">Î” = Î»x. (x x)</code>.
The input value for <code class="language-plaintext highlighter-rouge">x</code> needs to be a table, and it needs to have an
entry that maps a smaller version of itself, call it <code class="language-plaintext highlighter-rouge">v</code>, to some value
<code class="language-plaintext highlighter-rouge">w</code>. So the input value looks like <code class="language-plaintext highlighter-rouge">v â†¦ w âŠ” v</code>. Of course, then the
output of <code class="language-plaintext highlighter-rouge">Î”</code> is <code class="language-plaintext highlighter-rouge">w</code>. The derivation is given below.  The first occurrences
of <code class="language-plaintext highlighter-rouge">x</code> evaluates to <code class="language-plaintext highlighter-rouge">v â†¦ w</code>, the second occurrence of <code class="language-plaintext highlighter-rouge">x</code> evaluates to <code class="language-plaintext highlighter-rouge">v</code>,
and then the result of the application is <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="Î”"></a><a id="14215" href="/Denotational/#14215" class="Function">Î”</a> <a id="14217" class="Symbol">:</a> <a id="14219" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a> <a id="14221" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">âŠ¢</a> <a id="14223" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a>
<a id="14225" href="/Denotational/#14215" class="Function">Î”</a> <a id="14227" class="Symbol">=</a> <a id="14229" class="Symbol">(</a><a id="14230" href="/Untyped/#4382" class="InductiveConstructor Operator">Æ›</a> <a id="14232" class="Symbol">(</a><a id="14233" href="plfa.part2.Untyped.html#5111" class="Function Operator">#</a> <a id="14235" class="Number">0</a><a id="14236" class="Symbol">)</a> <a id="14238" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">Â·</a> <a id="14240" class="Symbol">(</a><a id="14241" href="plfa.part2.Untyped.html#5111" class="Function Operator">#</a> <a id="14243" class="Number">0</a><a id="14244" class="Symbol">))</a>

<a id="denot-Î”"></a><a id="14248" href="/Denotational/#14248" class="Function">denot-Î”</a> <a id="14256" class="Symbol">:</a> <a id="14258" class="Symbol">âˆ€</a> <a id="14260" class="Symbol">{</a><a id="14261" href="plfa.part3.Denotational.html#14261" class="Bound">v</a> <a id="14263" href="plfa.part3.Denotational.html#14263" class="Bound">w</a><a id="14264" class="Symbol">}</a> <a id="14266" class="Symbol">â†’</a> <a id="14268" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="14271" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="14273" href="plfa.part3.Denotational.html#14215" class="Function">Î”</a> <a id="14275" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="14277" class="Symbol">((</a><a id="14279" href="plfa.part3.Denotational.html#14261" class="Bound">v</a> <a id="14281" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="14283" href="plfa.part3.Denotational.html#14263" class="Bound">w</a> <a id="14285" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="14287" href="plfa.part3.Denotational.html#14261" class="Bound">v</a><a id="14288" class="Symbol">)</a> <a id="14290" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="14292" href="plfa.part3.Denotational.html#14263" class="Bound">w</a><a id="14293" class="Symbol">)</a>
<a id="14295" href="/Denotational/#14248" class="Function">denot-Î”</a> <a id="14303" class="Symbol">=</a> <a id="14305" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="14313" class="Symbol">(</a><a id="14314" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="14321" class="Symbol">(</a><a id="14322" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="14326" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="14330" class="Symbol">(</a><a id="14331" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="14341" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="14347" class="Symbol">))</a>
                          <a id="14376" class="Symbol">(</a><a id="14377" href="/Denotational/#9891" class="InductiveConstructor">sub</a> <a id="14381" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="14385" class="Symbol">(</a><a id="14386" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="14396" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a><a id="14402" class="Symbol">)))</a>
</pre>
<p>One might worry whether this semantics can deal with diverging
programs.  The <code class="language-plaintext highlighter-rouge">âŠ¥</code> value and the <code class="language-plaintext highlighter-rouge">âŠ¥-intro</code> rule provide a way to handle
them. (The <code class="language-plaintext highlighter-rouge">âŠ¥-intro</code> rule is also what enables Î² reduction on
non-terminating arguments.)  The classic <code class="language-plaintext highlighter-rouge">Î©</code> program is a particularly
simple program that diverges. It applies <code class="language-plaintext highlighter-rouge">Î”</code> to itself. The semantics
assigns to <code class="language-plaintext highlighter-rouge">Î©</code> the meaning <code class="language-plaintext highlighter-rouge">âŠ¥</code>. There are several ways to derive this, we
shall start with one that makes use of the <code class="language-plaintext highlighter-rouge">âŠ”-intro</code> rule.  First,
<code class="language-plaintext highlighter-rouge">denot-Î”</code> tells us that <code class="language-plaintext highlighter-rouge">Î”</code> evaluates to <code class="language-plaintext highlighter-rouge">((âŠ¥ â†¦ âŠ¥) âŠ” âŠ¥) â†¦ âŠ¥</code>
(choose <code class="language-plaintext highlighter-rouge">vâ‚ = vâ‚‚ = âŠ¥</code>).  Next, <code class="language-plaintext highlighter-rouge">Î”</code> also evaluates to <code class="language-plaintext highlighter-rouge">âŠ¥ â†¦ âŠ¥</code> by use of
<code class="language-plaintext highlighter-rouge">â†¦-intro</code> and <code class="language-plaintext highlighter-rouge">âŠ¥-intro</code> and to <code class="language-plaintext highlighter-rouge">âŠ¥</code> by <code class="language-plaintext highlighter-rouge">âŠ¥-intro</code>. As we saw previously,
whenever we can show that a program evaluates to two values, we can apply
<code class="language-plaintext highlighter-rouge">âŠ”-intro</code> to join them together, so <code class="language-plaintext highlighter-rouge">Î”</code> evaluates to <code class="language-plaintext highlighter-rouge">(âŠ¥ â†¦ âŠ¥) âŠ” âŠ¥</code>. This
matches the input of the first occurrence of <code class="language-plaintext highlighter-rouge">Î”</code>, so we can conclude that
the result of the application is <code class="language-plaintext highlighter-rouge">âŠ¥</code>.</p>

<pre class="Agda"><a id="Î©"></a><a id="15357" href="/Denotational/#15357" class="Function">Î©</a> <a id="15359" class="Symbol">:</a> <a id="15361" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a> <a id="15363" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">âŠ¢</a> <a id="15365" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a>
<a id="15367" href="/Denotational/#15357" class="Function">Î©</a> <a id="15369" class="Symbol">=</a> <a id="15371" href="plfa.part3.Denotational.html#14215" class="Function">Î”</a> <a id="15373" href="/Untyped/#4442" class="InductiveConstructor Operator">Â·</a> <a id="15375" href="plfa.part3.Denotational.html#14215" class="Function">Î”</a>

<a id="denot-Î©"></a><a id="15378" href="/Denotational/#15378" class="Function">denot-Î©</a> <a id="15386" class="Symbol">:</a> <a id="15388" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="15391" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="15393" href="plfa.part3.Denotational.html#15357" class="Function">Î©</a> <a id="15395" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="15397" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="15399" href="/Denotational/#15378" class="Function">denot-Î©</a> <a id="15407" class="Symbol">=</a> <a id="15409" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="15416" href="plfa.part3.Denotational.html#14248" class="Function">denot-Î”</a> <a id="15424" class="Symbol">(</a><a id="15425" href="plfa.part3.Denotational.html#9776" class="InductiveConstructor">âŠ”-intro</a> <a id="15433" class="Symbol">(</a><a id="15434" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="15442" href="plfa.part3.Denotational.html#9709" class="InductiveConstructor">âŠ¥-intro</a><a id="15449" class="Symbol">)</a> <a id="15451" href="plfa.part3.Denotational.html#9709" class="InductiveConstructor">âŠ¥-intro</a><a id="15458" class="Symbol">)</a>
</pre>
<p>A shorter derivation of the same result is by just one use of the
<code class="language-plaintext highlighter-rouge">âŠ¥-intro</code> rule.</p>

<pre class="Agda"><a id="denot-Î©&#39;"></a><a id="15552" href="/Denotational/#15552" class="Function">denot-Î©&#39;</a> <a id="15561" class="Symbol">:</a> <a id="15563" href="plfa.part3.Denotational.html#7412" class="Function">`âˆ…</a> <a id="15566" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="15568" href="plfa.part3.Denotational.html#15357" class="Function">Î©</a> <a id="15570" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="15572" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="15574" href="/Denotational/#15552" class="Function">denot-Î©&#39;</a> <a id="15583" class="Symbol">=</a> <a id="15585" href="plfa.part3.Denotational.html#9709" class="InductiveConstructor">âŠ¥-intro</a>
</pre>
<p>Just because one can derive <code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ M â†“ âŠ¥</code> for some closed term <code class="language-plaintext highlighter-rouge">M</code> doesnâ€™t mean
that <code class="language-plaintext highlighter-rouge">M</code> necessarily diverges. There may be other derivations that
conclude with <code class="language-plaintext highlighter-rouge">M</code> producing some more informative value.  However, if
the only thing that a term evaluates to is <code class="language-plaintext highlighter-rouge">âŠ¥</code>, then it indeed diverges.</p>

<p>An attentive reader may have noticed a disconnect earlier in the way
we planned to solve the self-application problem and the actual
<code class="language-plaintext highlighter-rouge">â†¦-elim</code> rule for application. We said at the beginning that we would
relax the notion of table lookup, allowing an argument to match an
input entry if the argument is equal or greater than the input entry.
Instead, the <code class="language-plaintext highlighter-rouge">â†¦-elim</code> rule seems to require an exact match.  However,
because of the <code class="language-plaintext highlighter-rouge">sub</code> rule, application really does allow larger
arguments.</p>

<pre class="Agda"><a id="â†¦-elim2"></a><a id="16377" href="/Denotational/#16377" class="Function">â†¦-elim2</a> <a id="16385" class="Symbol">:</a> <a id="16387" class="Symbol">âˆ€</a> <a id="16389" class="Symbol">{</a><a id="16390" href="plfa.part3.Denotational.html#16390" class="Bound">Î“</a><a id="16391" class="Symbol">}</a> <a id="16393" class="Symbol">{</a><a id="16394" href="plfa.part3.Denotational.html#16394" class="Bound">Î³</a> <a id="16396" class="Symbol">:</a> <a id="16398" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="16402" href="plfa.part3.Denotational.html#16390" class="Bound">Î“</a><a id="16403" class="Symbol">}</a> <a id="16405" class="Symbol">{</a><a id="16406" href="plfa.part3.Denotational.html#16406" class="Bound">Mâ‚</a> <a id="16409" href="plfa.part3.Denotational.html#16409" class="Bound">Mâ‚‚</a> <a id="16412" href="plfa.part3.Denotational.html#16412" class="Bound">vâ‚</a> <a id="16415" href="plfa.part3.Denotational.html#16415" class="Bound">vâ‚‚</a> <a id="16418" href="plfa.part3.Denotational.html#16418" class="Bound">vâ‚ƒ</a><a id="16420" class="Symbol">}</a>
  <a id="16424" class="Symbol">â†’</a> <a id="16426" href="/Denotational/#16394" class="Bound">Î³</a> <a id="16428" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="16430" href="plfa.part3.Denotational.html#16406" class="Bound">Mâ‚</a> <a id="16433" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="16435" class="Symbol">(</a><a id="16436" href="plfa.part3.Denotational.html#16412" class="Bound">vâ‚</a> <a id="16439" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="16441" href="plfa.part3.Denotational.html#16418" class="Bound">vâ‚ƒ</a><a id="16443" class="Symbol">)</a>
  <a id="16447" class="Symbol">â†’</a> <a id="16449" href="/Denotational/#16394" class="Bound">Î³</a> <a id="16451" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="16453" href="plfa.part3.Denotational.html#16409" class="Bound">Mâ‚‚</a> <a id="16456" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="16458" href="plfa.part3.Denotational.html#16415" class="Bound">vâ‚‚</a>
  <a id="16463" class="Symbol">â†’</a> <a id="16465" href="/Denotational/#16412" class="Bound">vâ‚</a> <a id="16468" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="16470" href="plfa.part3.Denotational.html#16415" class="Bound">vâ‚‚</a>
    <a id="16477" class="Comment">------------------</a>
  <a id="16498" class="Symbol">â†’</a> <a id="16500" href="/Denotational/#16394" class="Bound">Î³</a> <a id="16502" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="16504" class="Symbol">(</a><a id="16505" href="plfa.part3.Denotational.html#16406" class="Bound">Mâ‚</a> <a id="16508" href="/Untyped/#4442" class="InductiveConstructor Operator">Â·</a> <a id="16510" href="plfa.part3.Denotational.html#16409" class="Bound">Mâ‚‚</a><a id="16512" class="Symbol">)</a> <a id="16514" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="16516" href="plfa.part3.Denotational.html#16418" class="Bound">vâ‚ƒ</a>
<a id="16519" href="/Denotational/#16377" class="Function">â†¦-elim2</a> <a id="16527" href="plfa.part3.Denotational.html#16527" class="Bound">dâ‚</a> <a id="16530" href="plfa.part3.Denotational.html#16530" class="Bound">dâ‚‚</a> <a id="16533" href="plfa.part3.Denotational.html#16533" class="Bound">lt</a> <a id="16536" class="Symbol">=</a> <a id="16538" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="16545" href="plfa.part3.Denotational.html#16527" class="Bound">dâ‚</a> <a id="16548" class="Symbol">(</a><a id="16549" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="16553" href="plfa.part3.Denotational.html#16530" class="Bound">dâ‚‚</a> <a id="16556" href="plfa.part3.Denotational.html#16533" class="Bound">lt</a><a id="16558" class="Symbol">)</a>
</pre>
<h4 id="exercise-denot-plusá¶œ-practice">Exercise <code class="language-plaintext highlighter-rouge">denot-plusá¶œ</code> (practice)</h4>

<p>What is a denotation for <code class="language-plaintext highlighter-rouge">plusá¶œ</code>? That is, find a value <code class="language-plaintext highlighter-rouge">v</code> (other than <code class="language-plaintext highlighter-rouge">âŠ¥</code>)
such that <code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ plusá¶œ â†“ v</code>. Also, give the proof of <code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ plusá¶œ â†“ v</code>
for your choice of <code class="language-plaintext highlighter-rouge">v</code>.</p>

<pre class="Agda"><a id="16778" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-denot-church-recommended">Exercise <code class="language-plaintext highlighter-rouge">denot-church</code> (recommended)</h4>

<p>Church numerals are more general than natural numbers in that they
represent paths. A path consists of <code class="language-plaintext highlighter-rouge">n</code> edges and <code class="language-plaintext highlighter-rouge">n + 1</code> vertices.
We store the vertices in a vector of length <code class="language-plaintext highlighter-rouge">n + 1</code> in reverse
order. The edges in the path map the ith vertex to the <code class="language-plaintext highlighter-rouge">i + 1</code> vertex.
The following function <code class="language-plaintext highlighter-rouge">D^suc</code> (for denotation of successor) constructs
a table whose entries are all the edges in the path.</p>

<pre class="Agda"><a id="D^suc"></a><a id="17249" href="/Denotational/#17249" class="Function">D^suc</a> <a id="17255" class="Symbol">:</a> <a id="17257" class="Symbol">(</a><a id="17258" href="plfa.part3.Denotational.html#17258" class="Bound">n</a> <a id="17260" class="Symbol">:</a> <a id="17262" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="17263" class="Symbol">)</a> <a id="17265" class="Symbol">â†’</a> <a id="17267" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="17271" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="17277" class="Symbol">(</a><a id="17278" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17282" href="plfa.part3.Denotational.html#17258" class="Bound">n</a><a id="17283" class="Symbol">)</a> <a id="17285" class="Symbol">â†’</a> <a id="17287" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="17293" href="/Denotational/#17249" class="Function">D^suc</a> <a id="17299" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a> <a id="17304" class="Symbol">(</a><a id="17305" href="plfa.part3.Denotational.html#17305" class="Bound">a[0]</a> <a id="17310" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17312" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a><a id="17314" class="Symbol">)</a> <a id="17316" class="Symbol">=</a> <a id="17318" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="17320" href="/Denotational/#17249" class="Function">D^suc</a> <a id="17326" class="Symbol">(</a><a id="17327" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17331" href="plfa.part3.Denotational.html#17331" class="Bound">i</a><a id="17332" class="Symbol">)</a> <a id="17334" class="Symbol">(</a><a id="17335" href="plfa.part3.Denotational.html#17335" class="Bound">a[i+1]</a> <a id="17342" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17344" href="plfa.part3.Denotational.html#17344" class="Bound">a[i]</a> <a id="17349" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17351" href="plfa.part3.Denotational.html#17351" class="Bound">ls</a><a id="17353" class="Symbol">)</a> <a id="17355" class="Symbol">=</a>  <a id="17358" href="plfa.part3.Denotational.html#17344" class="Bound">a[i]</a> <a id="17363" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="17365" href="plfa.part3.Denotational.html#17335" class="Bound">a[i+1]</a>  <a id="17373" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a>  <a id="17376" href="plfa.part3.Denotational.html#17249" class="Function">D^suc</a> <a id="17382" href="plfa.part3.Denotational.html#17331" class="Bound">i</a> <a id="17384" class="Symbol">(</a><a id="17385" href="plfa.part3.Denotational.html#17344" class="Bound">a[i]</a> <a id="17390" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17392" href="plfa.part3.Denotational.html#17351" class="Bound">ls</a><a id="17394" class="Symbol">)</a>
</pre>
<p>We use the following auxilliary function to obtain the last element of
a non-empty vector. (This formulation is more convenient for our
purposes than the one in the Agda standard library.)</p>

<pre class="Agda"><a id="vec-last"></a><a id="17595" href="/Denotational/#17595" class="Function">vec-last</a> <a id="17604" class="Symbol">:</a> <a id="17606" class="Symbol">âˆ€{</a><a id="17608" href="plfa.part3.Denotational.html#17608" class="Bound">n</a> <a id="17610" class="Symbol">:</a> <a id="17612" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="17613" class="Symbol">}</a> <a id="17615" class="Symbol">â†’</a> <a id="17617" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="17621" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="17627" class="Symbol">(</a><a id="17628" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17632" href="plfa.part3.Denotational.html#17608" class="Bound">n</a><a id="17633" class="Symbol">)</a> <a id="17635" class="Symbol">â†’</a> <a id="17637" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="17643" href="/Denotational/#17595" class="Function">vec-last</a> <a id="17652" class="Symbol">{</a><a id="17653" class="Number">0</a><a id="17654" class="Symbol">}</a> <a id="17656" class="Symbol">(</a><a id="17657" href="plfa.part3.Denotational.html#17657" class="Bound">a</a> <a id="17659" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17661" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a><a id="17663" class="Symbol">)</a> <a id="17665" class="Symbol">=</a> <a id="17667" href="plfa.part3.Denotational.html#17657" class="Bound">a</a>
<a id="17669" href="/Denotational/#17595" class="Function">vec-last</a> <a id="17678" class="Symbol">{</a><a id="17679" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17683" href="plfa.part3.Denotational.html#17683" class="Bound">n</a><a id="17684" class="Symbol">}</a> <a id="17686" class="Symbol">(</a><a id="17687" href="plfa.part3.Denotational.html#17687" class="Bound">a</a> <a id="17689" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17691" href="plfa.part3.Denotational.html#17691" class="Bound">b</a> <a id="17693" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17695" href="plfa.part3.Denotational.html#17695" class="Bound">ls</a><a id="17697" class="Symbol">)</a> <a id="17699" class="Symbol">=</a> <a id="17701" href="plfa.part3.Denotational.html#17595" class="Function">vec-last</a> <a id="17710" class="Symbol">(</a><a id="17711" href="plfa.part3.Denotational.html#17691" class="Bound">b</a> <a id="17713" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17715" href="plfa.part3.Denotational.html#17695" class="Bound">ls</a><a id="17717" class="Symbol">)</a>
</pre>
<p>The function <code class="language-plaintext highlighter-rouge">Dá¶œ</code> computes the denotation of the nth Church numeral
for a given path.</p>

<pre class="Agda"><a id="Dá¶œ"></a><a id="17815" href="/Denotational/#17815" class="Function">Dá¶œ</a> <a id="17818" class="Symbol">:</a> <a id="17820" class="Symbol">(</a><a id="17821" href="plfa.part3.Denotational.html#17821" class="Bound">n</a> <a id="17823" class="Symbol">:</a> <a id="17825" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="17826" class="Symbol">)</a> <a id="17828" class="Symbol">â†’</a> <a id="17830" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="17834" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="17840" class="Symbol">(</a><a id="17841" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17845" href="plfa.part3.Denotational.html#17821" class="Bound">n</a><a id="17846" class="Symbol">)</a> <a id="17848" class="Symbol">â†’</a> <a id="17850" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="17856" href="/Denotational/#17815" class="Function">Dá¶œ</a> <a id="17859" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a> <a id="17864" class="Symbol">(</a><a id="17865" href="plfa.part3.Denotational.html#17865" class="Bound">a[0]</a> <a id="17870" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17872" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a><a id="17874" class="Symbol">)</a> <a id="17876" class="Symbol">=</a> <a id="17878" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="17880" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="17882" href="plfa.part3.Denotational.html#17865" class="Bound">a[0]</a> <a id="17887" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="17889" href="plfa.part3.Denotational.html#17865" class="Bound">a[0]</a>
<a id="17894" href="/Denotational/#17815" class="Function">Dá¶œ</a> <a id="17897" class="Symbol">(</a><a id="17898" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17902" href="plfa.part3.Denotational.html#17902" class="Bound">n</a><a id="17903" class="Symbol">)</a> <a id="17905" class="Symbol">(</a><a id="17906" href="plfa.part3.Denotational.html#17906" class="Bound">a[n+1]</a> <a id="17913" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17915" href="plfa.part3.Denotational.html#17915" class="Bound">a[n]</a> <a id="17920" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17922" href="plfa.part3.Denotational.html#17922" class="Bound">ls</a><a id="17924" class="Symbol">)</a> <a id="17926" class="Symbol">=</a>
  <a id="17930" class="Symbol">(</a><a id="17931" href="/Denotational/#17249" class="Function">D^suc</a> <a id="17937" class="Symbol">(</a><a id="17938" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="17942" href="plfa.part3.Denotational.html#17902" class="Bound">n</a><a id="17943" class="Symbol">)</a> <a id="17945" class="Symbol">(</a><a id="17946" href="plfa.part3.Denotational.html#17906" class="Bound">a[n+1]</a> <a id="17953" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17955" href="plfa.part3.Denotational.html#17915" class="Bound">a[n]</a> <a id="17960" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17962" href="plfa.part3.Denotational.html#17922" class="Bound">ls</a><a id="17964" class="Symbol">))</a> <a id="17967" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="17969" class="Symbol">(</a><a id="17970" href="plfa.part3.Denotational.html#17595" class="Function">vec-last</a> <a id="17979" class="Symbol">(</a><a id="17980" href="plfa.part3.Denotational.html#17915" class="Bound">a[n]</a> <a id="17985" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">âˆ·</a> <a id="17987" href="plfa.part3.Denotational.html#17922" class="Bound">ls</a><a id="17989" class="Symbol">))</a> <a id="17992" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="17994" href="plfa.part3.Denotational.html#17906" class="Bound">a[n+1]</a>
</pre>
<ul>
  <li>
    <p>The Church numeral for 0 ignores its first argument and returns
its second argument, so for the singleton path consisting of
just <code class="language-plaintext highlighter-rouge">a[0]</code>, its denotation is</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  âŠ¥ â†¦ a[0] â†¦ a[0]
</code></pre></div>    </div>
  </li>
  <li>
    <p>The Church numeral for <code class="language-plaintext highlighter-rouge">suc n</code> takes two arguments:
a successor function whose denotation is given by <code class="language-plaintext highlighter-rouge">D^suc</code>,
and the start of the path (last of the vector).
It returns the <code class="language-plaintext highlighter-rouge">n + 1</code> vertex in the path.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (D^suc (suc n) (a[n+1] âˆ· a[n] âˆ· ls)) â†¦ (vec-last (a[n] âˆ· ls)) â†¦ a[n+1]
</code></pre></div>    </div>
  </li>
</ul>

<p>The exercise is to prove that for any path <code class="language-plaintext highlighter-rouge">ls</code>, the meaning of the
Church numeral <code class="language-plaintext highlighter-rouge">n</code> is <code class="language-plaintext highlighter-rouge">Dá¶œ n ls</code>.</p>

<p>To fascilitate talking about arbitrary Church numerals, the following
<code class="language-plaintext highlighter-rouge">church</code> function builds the term for the nth Church numeral,
using the auxilliary function <code class="language-plaintext highlighter-rouge">apply-n</code>.</p>

<pre class="Agda"><a id="apply-n"></a><a id="18767" href="/Denotational/#18767" class="Function">apply-n</a> <a id="18775" class="Symbol">:</a> <a id="18777" class="Symbol">(</a><a id="18778" href="plfa.part3.Denotational.html#18778" class="Bound">n</a> <a id="18780" class="Symbol">:</a> <a id="18782" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="18783" class="Symbol">)</a> <a id="18785" class="Symbol">â†’</a> <a id="18787" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a> <a id="18789" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="18791" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a> <a id="18793" href="plfa.part2.Untyped.html#3191" class="InductiveConstructor Operator">,</a> <a id="18795" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a> <a id="18797" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">âŠ¢</a> <a id="18799" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a>
<a id="18801" href="/Denotational/#18767" class="Function">apply-n</a> <a id="18809" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a> <a id="18814" class="Symbol">=</a> <a id="18816" href="/Untyped/#5111" class="Function Operator">#</a> <a id="18818" class="Number">0</a>
<a id="18820" href="/Denotational/#18767" class="Function">apply-n</a> <a id="18828" class="Symbol">(</a><a id="18829" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="18833" href="plfa.part3.Denotational.html#18833" class="Bound">n</a><a id="18834" class="Symbol">)</a> <a id="18836" class="Symbol">=</a> <a id="18838" href="/Untyped/#5111" class="Function Operator">#</a> <a id="18840" class="Number">1</a> <a id="18842" href="plfa.part2.Untyped.html#4442" class="InductiveConstructor Operator">Â·</a> <a id="18844" href="plfa.part3.Denotational.html#18767" class="Function">apply-n</a> <a id="18852" href="plfa.part3.Denotational.html#18833" class="Bound">n</a>

<a id="church"></a><a id="18855" href="/Denotational/#18855" class="Function">church</a> <a id="18862" class="Symbol">:</a> <a id="18864" class="Symbol">(</a><a id="18865" href="plfa.part3.Denotational.html#18865" class="Bound">n</a> <a id="18867" class="Symbol">:</a> <a id="18869" href="Agda.Builtin.Nat.html#165" class="Datatype">â„•</a><a id="18870" class="Symbol">)</a> <a id="18872" class="Symbol">â†’</a> <a id="18874" href="/Untyped/#3175" class="InductiveConstructor">âˆ…</a> <a id="18876" href="plfa.part2.Untyped.html#4294" class="Datatype Operator">âŠ¢</a> <a id="18878" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a>
<a id="18880" href="/Denotational/#18855" class="Function">church</a> <a id="18887" href="plfa.part3.Denotational.html#18887" class="Bound">n</a> <a id="18889" class="Symbol">=</a> <a id="18891" href="/Untyped/#4382" class="InductiveConstructor Operator">Æ›</a> <a id="18893" href="plfa.part2.Untyped.html#4382" class="InductiveConstructor Operator">Æ›</a> <a id="18895" href="plfa.part3.Denotational.html#18767" class="Function">apply-n</a> <a id="18903" href="plfa.part3.Denotational.html#18887" class="Bound">n</a> 
</pre>
<p>Prove the following theorem.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>denot-church : âˆ€{n : â„•}{ls : Vec Value (suc n)}
   â†’ `âˆ… âŠ¢ church n â†“ Dá¶œ n ls
</code></pre></div></div>

<pre class="Agda"><a id="19031" class="Comment">-- Your code goes here</a>
</pre>
<h2 id="denotations-and-denotational-equality">Denotations and denotational equality</h2>

<p>Next we define a notion of denotational equality based on the above
semantics. Its statement makes use of an if-and-only-if, which we
define as follows.</p>

<pre class="Agda"><a id="_iff_"></a><a id="19259" href="/Denotational/#19259" class="Function Operator">_iff_</a> <a id="19265" class="Symbol">:</a> <a id="19267" class="PrimitiveType">Set</a> <a id="19271" class="Symbol">â†’</a> <a id="19273" class="PrimitiveType">Set</a> <a id="19277" class="Symbol">â†’</a> <a id="19279" class="PrimitiveType">Set</a>
<a id="19283" href="/Denotational/#19283" class="Bound">P</a> <a id="19285" href="plfa.part3.Denotational.html#19259" class="Function Operator">iff</a> <a id="19289" href="plfa.part3.Denotational.html#19289" class="Bound">Q</a> <a id="19291" class="Symbol">=</a> <a id="19293" class="Symbol">(</a><a id="19294" href="plfa.part3.Denotational.html#19283" class="Bound">P</a> <a id="19296" class="Symbol">â†’</a> <a id="19298" href="plfa.part3.Denotational.html#19289" class="Bound">Q</a><a id="19299" class="Symbol">)</a> <a id="19301" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a> <a id="19303" class="Symbol">(</a><a id="19304" href="plfa.part3.Denotational.html#19289" class="Bound">Q</a> <a id="19306" class="Symbol">â†’</a> <a id="19308" href="plfa.part3.Denotational.html#19283" class="Bound">P</a><a id="19309" class="Symbol">)</a>
</pre>
<p>Another way to view the denotational semantics is as a function that
maps a term to a relation from environments to values.  That is, the
<em>denotation</em> of a term is a relation from environments to values.</p>

<pre class="Agda"><a id="Denotation"></a><a id="19525" href="/Denotational/#19525" class="Function">Denotation</a> <a id="19536" class="Symbol">:</a> <a id="19538" href="/Untyped/#3153" class="Datatype">Context</a> <a id="19546" class="Symbol">â†’</a> <a id="19548" class="PrimitiveType">Setâ‚</a>
<a id="19553" href="/Denotational/#19525" class="Function">Denotation</a> <a id="19564" href="plfa.part3.Denotational.html#19564" class="Bound">Î“</a> <a id="19566" class="Symbol">=</a> <a id="19568" class="Symbol">(</a><a id="19569" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="19573" href="plfa.part3.Denotational.html#19564" class="Bound">Î“</a> <a id="19575" class="Symbol">â†’</a> <a id="19577" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="19583" class="Symbol">â†’</a> <a id="19585" class="PrimitiveType">Set</a><a id="19588" class="Symbol">)</a>
</pre>
<p>The following function â„° gives this alternative view of the semantics,
which really just amounts to changing the order of the parameters.</p>

<pre class="Agda"><a id="â„°"></a><a id="19738" href="/Denotational/#19738" class="Function">â„°</a> <a id="19740" class="Symbol">:</a> <a id="19742" class="Symbol">âˆ€{</a><a id="19744" href="plfa.part3.Denotational.html#19744" class="Bound">Î“</a><a id="19745" class="Symbol">}</a> <a id="19747" class="Symbol">â†’</a> <a id="19749" class="Symbol">(</a><a id="19750" href="plfa.part3.Denotational.html#19750" class="Bound">M</a> <a id="19752" class="Symbol">:</a> <a id="19754" href="plfa.part3.Denotational.html#19744" class="Bound">Î“</a> <a id="19756" href="/Untyped/#4294" class="Datatype Operator">âŠ¢</a> <a id="19758" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="19759" class="Symbol">)</a> <a id="19761" class="Symbol">â†’</a> <a id="19763" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="19774" href="plfa.part3.Denotational.html#19744" class="Bound">Î“</a>
<a id="19776" href="/Denotational/#19738" class="Function">â„°</a> <a id="19778" href="plfa.part3.Denotational.html#19778" class="Bound">M</a> <a id="19780" class="Symbol">=</a> <a id="19782" class="Symbol">Î»</a> <a id="19784" href="plfa.part3.Denotational.html#19784" class="Bound">Î³</a> <a id="19786" href="plfa.part3.Denotational.html#19786" class="Bound">v</a> <a id="19788" class="Symbol">â†’</a> <a id="19790" href="plfa.part3.Denotational.html#19784" class="Bound">Î³</a> <a id="19792" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="19794" href="plfa.part3.Denotational.html#19778" class="Bound">M</a> <a id="19796" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="19798" href="plfa.part3.Denotational.html#19786" class="Bound">v</a>
</pre>
<p>In general, two denotations are equal when they produce the same
values in the same environment.</p>

<pre class="Agda"><a id="19907" class="Keyword">infix</a> <a id="19913" class="Number">3</a> <a id="19915" href="/Denotational/#19920" class="Function Operator">_â‰ƒ_</a>

<a id="_â‰ƒ_"></a><a id="19920" href="/Denotational/#19920" class="Function Operator">_â‰ƒ_</a> <a id="19924" class="Symbol">:</a> <a id="19926" class="Symbol">âˆ€</a> <a id="19928" class="Symbol">{</a><a id="19929" href="plfa.part3.Denotational.html#19929" class="Bound">Î“</a><a id="19930" class="Symbol">}</a> <a id="19932" class="Symbol">â†’</a> <a id="19934" class="Symbol">(</a><a id="19935" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="19946" href="plfa.part3.Denotational.html#19929" class="Bound">Î“</a><a id="19947" class="Symbol">)</a> <a id="19949" class="Symbol">â†’</a> <a id="19951" class="Symbol">(</a><a id="19952" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="19963" href="plfa.part3.Denotational.html#19929" class="Bound">Î“</a><a id="19964" class="Symbol">)</a> <a id="19966" class="Symbol">â†’</a> <a id="19968" class="PrimitiveType">Set</a>
<a id="19972" class="Symbol">(</a><a id="19973" href="/Denotational/#19920" class="Function Operator">_â‰ƒ_</a> <a id="19977" class="Symbol">{</a><a id="19978" href="plfa.part3.Denotational.html#19978" class="Bound">Î“</a><a id="19979" class="Symbol">}</a> <a id="19981" href="plfa.part3.Denotational.html#19981" class="Bound">Dâ‚</a> <a id="19984" href="plfa.part3.Denotational.html#19984" class="Bound">Dâ‚‚</a><a id="19986" class="Symbol">)</a> <a id="19988" class="Symbol">=</a> <a id="19990" class="Symbol">(</a><a id="19991" href="plfa.part3.Denotational.html#19991" class="Bound">Î³</a> <a id="19993" class="Symbol">:</a> <a id="19995" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="19999" href="plfa.part3.Denotational.html#19978" class="Bound">Î“</a><a id="20000" class="Symbol">)</a> <a id="20002" class="Symbol">â†’</a> <a id="20004" class="Symbol">(</a><a id="20005" href="plfa.part3.Denotational.html#20005" class="Bound">v</a> <a id="20007" class="Symbol">:</a> <a id="20009" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="20014" class="Symbol">)</a> <a id="20016" class="Symbol">â†’</a> <a id="20018" href="plfa.part3.Denotational.html#19981" class="Bound">Dâ‚</a> <a id="20021" href="plfa.part3.Denotational.html#19991" class="Bound">Î³</a> <a id="20023" href="plfa.part3.Denotational.html#20005" class="Bound">v</a> <a id="20025" href="plfa.part3.Denotational.html#19259" class="Function Operator">iff</a> <a id="20029" href="plfa.part3.Denotational.html#19984" class="Bound">Dâ‚‚</a> <a id="20032" href="plfa.part3.Denotational.html#19991" class="Bound">Î³</a> <a id="20034" href="plfa.part3.Denotational.html#20005" class="Bound">v</a>
</pre>
<p>Denotational equality is an equivalence relation.</p>

<pre class="Agda"><a id="â‰ƒ-refl"></a><a id="20096" href="/Denotational/#20096" class="Function">â‰ƒ-refl</a> <a id="20103" class="Symbol">:</a> <a id="20105" class="Symbol">âˆ€</a> <a id="20107" class="Symbol">{</a><a id="20108" href="plfa.part3.Denotational.html#20108" class="Bound">Î“</a> <a id="20110" class="Symbol">:</a> <a id="20112" href="/Untyped/#3153" class="Datatype">Context</a><a id="20119" class="Symbol">}</a> <a id="20121" class="Symbol">â†’</a> <a id="20123" class="Symbol">{</a><a id="20124" href="plfa.part3.Denotational.html#20124" class="Bound">M</a> <a id="20126" class="Symbol">:</a> <a id="20128" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="20139" href="plfa.part3.Denotational.html#20108" class="Bound">Î“</a><a id="20140" class="Symbol">}</a>
  <a id="20144" class="Symbol">â†’</a> <a id="20146" href="/Denotational/#20124" class="Bound">M</a> <a id="20148" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20150" href="plfa.part3.Denotational.html#20124" class="Bound">M</a>
<a id="20152" href="/Denotational/#20096" class="Function">â‰ƒ-refl</a> <a id="20159" href="plfa.part3.Denotational.html#20159" class="Bound">Î³</a> <a id="20161" href="plfa.part3.Denotational.html#20161" class="Bound">v</a> <a id="20163" class="Symbol">=</a> <a id="20165" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="20167" class="Symbol">(Î»</a> <a id="20170" href="plfa.part3.Denotational.html#20170" class="Bound">x</a> <a id="20172" class="Symbol">â†’</a> <a id="20174" href="plfa.part3.Denotational.html#20170" class="Bound">x</a><a id="20175" class="Symbol">)</a> <a id="20177" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="20179" class="Symbol">(Î»</a> <a id="20182" href="plfa.part3.Denotational.html#20182" class="Bound">x</a> <a id="20184" class="Symbol">â†’</a> <a id="20186" href="plfa.part3.Denotational.html#20182" class="Bound">x</a><a id="20187" class="Symbol">)</a> <a id="20189" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>

<a id="â‰ƒ-sym"></a><a id="20192" href="/Denotational/#20192" class="Function">â‰ƒ-sym</a> <a id="20198" class="Symbol">:</a> <a id="20200" class="Symbol">âˆ€</a> <a id="20202" class="Symbol">{</a><a id="20203" href="plfa.part3.Denotational.html#20203" class="Bound">Î“</a> <a id="20205" class="Symbol">:</a> <a id="20207" href="/Untyped/#3153" class="Datatype">Context</a><a id="20214" class="Symbol">}</a> <a id="20216" class="Symbol">â†’</a> <a id="20218" class="Symbol">{</a><a id="20219" href="plfa.part3.Denotational.html#20219" class="Bound">M</a> <a id="20221" href="plfa.part3.Denotational.html#20221" class="Bound">N</a> <a id="20223" class="Symbol">:</a> <a id="20225" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="20236" href="plfa.part3.Denotational.html#20203" class="Bound">Î“</a><a id="20237" class="Symbol">}</a>
  <a id="20241" class="Symbol">â†’</a> <a id="20243" href="/Denotational/#20219" class="Bound">M</a> <a id="20245" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20247" href="plfa.part3.Denotational.html#20221" class="Bound">N</a>
    <a id="20253" class="Comment">-----</a>
  <a id="20261" class="Symbol">â†’</a> <a id="20263" href="/Denotational/#20221" class="Bound">N</a> <a id="20265" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20267" href="plfa.part3.Denotational.html#20219" class="Bound">M</a>
<a id="20269" href="/Denotational/#20192" class="Function">â‰ƒ-sym</a> <a id="20275" href="plfa.part3.Denotational.html#20275" class="Bound">eq</a> <a id="20278" href="plfa.part3.Denotational.html#20278" class="Bound">Î³</a> <a id="20280" href="plfa.part3.Denotational.html#20280" class="Bound">v</a> <a id="20282" class="Symbol">=</a> <a id="20284" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="20286" class="Symbol">(</a><a id="20287" href="Agda.Builtin.Sigma.html#237" class="Field">projâ‚‚</a> <a id="20293" class="Symbol">(</a><a id="20294" href="plfa.part3.Denotational.html#20275" class="Bound">eq</a> <a id="20297" href="plfa.part3.Denotational.html#20278" class="Bound">Î³</a> <a id="20299" href="plfa.part3.Denotational.html#20280" class="Bound">v</a><a id="20300" class="Symbol">))</a> <a id="20303" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="20305" class="Symbol">(</a><a id="20306" href="Agda.Builtin.Sigma.html#225" class="Field">projâ‚</a> <a id="20312" class="Symbol">(</a><a id="20313" href="plfa.part3.Denotational.html#20275" class="Bound">eq</a> <a id="20316" href="plfa.part3.Denotational.html#20278" class="Bound">Î³</a> <a id="20318" href="plfa.part3.Denotational.html#20280" class="Bound">v</a><a id="20319" class="Symbol">))</a> <a id="20322" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>

<a id="â‰ƒ-trans"></a><a id="20325" href="/Denotational/#20325" class="Function">â‰ƒ-trans</a> <a id="20333" class="Symbol">:</a> <a id="20335" class="Symbol">âˆ€</a> <a id="20337" class="Symbol">{</a><a id="20338" href="plfa.part3.Denotational.html#20338" class="Bound">Î“</a> <a id="20340" class="Symbol">:</a> <a id="20342" href="/Untyped/#3153" class="Datatype">Context</a><a id="20349" class="Symbol">}</a> <a id="20351" class="Symbol">â†’</a> <a id="20353" class="Symbol">{</a><a id="20354" href="plfa.part3.Denotational.html#20354" class="Bound">Mâ‚</a> <a id="20357" href="plfa.part3.Denotational.html#20357" class="Bound">Mâ‚‚</a> <a id="20360" href="plfa.part3.Denotational.html#20360" class="Bound">Mâ‚ƒ</a> <a id="20363" class="Symbol">:</a> <a id="20365" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="20376" href="plfa.part3.Denotational.html#20338" class="Bound">Î“</a><a id="20377" class="Symbol">}</a>
  <a id="20381" class="Symbol">â†’</a> <a id="20383" href="/Denotational/#20354" class="Bound">Mâ‚</a> <a id="20386" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20388" href="plfa.part3.Denotational.html#20357" class="Bound">Mâ‚‚</a>
  <a id="20393" class="Symbol">â†’</a> <a id="20395" href="/Denotational/#20357" class="Bound">Mâ‚‚</a> <a id="20398" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20400" href="plfa.part3.Denotational.html#20360" class="Bound">Mâ‚ƒ</a>
    <a id="20407" class="Comment">-------</a>
  <a id="20417" class="Symbol">â†’</a> <a id="20419" href="/Denotational/#20354" class="Bound">Mâ‚</a> <a id="20422" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="20424" href="plfa.part3.Denotational.html#20360" class="Bound">Mâ‚ƒ</a>
<a id="20427" href="/Denotational/#20325" class="Function">â‰ƒ-trans</a> <a id="20435" href="plfa.part3.Denotational.html#20435" class="Bound">eq1</a> <a id="20439" href="plfa.part3.Denotational.html#20439" class="Bound">eq2</a> <a id="20443" href="plfa.part3.Denotational.html#20443" class="Bound">Î³</a> <a id="20445" href="plfa.part3.Denotational.html#20445" class="Bound">v</a> <a id="20447" class="Symbol">=</a> <a id="20449" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="20451" class="Symbol">(Î»</a> <a id="20454" href="plfa.part3.Denotational.html#20454" class="Bound">z</a> <a id="20456" class="Symbol">â†’</a> <a id="20458" href="Agda.Builtin.Sigma.html#225" class="Field">projâ‚</a> <a id="20464" class="Symbol">(</a><a id="20465" href="plfa.part3.Denotational.html#20439" class="Bound">eq2</a> <a id="20469" href="plfa.part3.Denotational.html#20443" class="Bound">Î³</a> <a id="20471" href="plfa.part3.Denotational.html#20445" class="Bound">v</a><a id="20472" class="Symbol">)</a> <a id="20474" class="Symbol">(</a><a id="20475" href="Agda.Builtin.Sigma.html#225" class="Field">projâ‚</a> <a id="20481" class="Symbol">(</a><a id="20482" href="plfa.part3.Denotational.html#20435" class="Bound">eq1</a> <a id="20486" href="plfa.part3.Denotational.html#20443" class="Bound">Î³</a> <a id="20488" href="plfa.part3.Denotational.html#20445" class="Bound">v</a><a id="20489" class="Symbol">)</a> <a id="20491" href="plfa.part3.Denotational.html#20454" class="Bound">z</a><a id="20492" class="Symbol">))</a> <a id="20495" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
                        <a id="20521" class="Symbol">(Î»</a> <a id="20524" href="/Denotational/#20524" class="Bound">z</a> <a id="20526" class="Symbol">â†’</a> <a id="20528" href="Agda.Builtin.Sigma.html#237" class="Field">projâ‚‚</a> <a id="20534" class="Symbol">(</a><a id="20535" href="plfa.part3.Denotational.html#20435" class="Bound">eq1</a> <a id="20539" href="plfa.part3.Denotational.html#20443" class="Bound">Î³</a> <a id="20541" href="plfa.part3.Denotational.html#20445" class="Bound">v</a><a id="20542" class="Symbol">)</a> <a id="20544" class="Symbol">(</a><a id="20545" href="Agda.Builtin.Sigma.html#237" class="Field">projâ‚‚</a> <a id="20551" class="Symbol">(</a><a id="20552" href="plfa.part3.Denotational.html#20439" class="Bound">eq2</a> <a id="20556" href="plfa.part3.Denotational.html#20443" class="Bound">Î³</a> <a id="20558" href="plfa.part3.Denotational.html#20445" class="Bound">v</a><a id="20559" class="Symbol">)</a> <a id="20561" href="plfa.part3.Denotational.html#20524" class="Bound">z</a><a id="20562" class="Symbol">))</a> <a id="20565" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
</pre>
<p>Two terms <code class="language-plaintext highlighter-rouge">M</code> and <code class="language-plaintext highlighter-rouge">N</code> are denotational equal when their denotations are
equal, that is, <code class="language-plaintext highlighter-rouge">â„° M â‰ƒ â„° N</code>.</p>

<p>The following submodule introduces equational reasoning for the <code class="language-plaintext highlighter-rouge">â‰ƒ</code>
relation.</p>

<!--

JGS: I couldn't get this to work. The definitions here were accepted
by Agda, but then the uses in the Compositional chapter got rejected.

denotation-setoid : Context â†’ Setoid (lsuc lzero) lzero
denotation-setoid Î“ = record
  { Carrier = Denotation Î“
  ; _â‰ˆ_ = _â‰ƒ_
  ; isEquivalence = record { refl = â‰ƒ-refl ; sym = â‰ƒ-sym ; trans = â‰ƒ-trans } }
-->
<!--
  The following went inside the module â‰ƒ-Reasoning:
  
  open import Relation.Binary.Reasoning.Setoid (denotation-setoid Î“)
    renaming (begin_ to start_; _â‰ˆâŸ¨_âŸ©_ to _â‰ƒâŸ¨_âŸ©_; _âˆ to _â˜) public
-->
<pre class="Agda">
<a id="21313" class="Keyword">module</a> <a id="â‰ƒ-Reasoning"></a><a id="21320" href="/Denotational/#21320" class="Module">â‰ƒ-Reasoning</a> <a id="21332" class="Symbol">{</a><a id="21333" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a> <a id="21335" class="Symbol">:</a> <a id="21337" href="/Untyped/#3153" class="Datatype">Context</a><a id="21344" class="Symbol">}</a> <a id="21346" class="Keyword">where</a>

  <a id="21355" class="Keyword">infix</a>  <a id="21362" class="Number">1</a> <a id="21364" href="/Denotational/#21412" class="Function Operator">start_</a>
  <a id="21373" class="Keyword">infixr</a> <a id="21380" class="Number">2</a> <a id="21382" href="/Denotational/#21643" class="Function Operator">_â‰ƒâŸ¨âŸ©_</a> <a id="21388" href="plfa.part3.Denotational.html#21503" class="Function Operator">_â‰ƒâŸ¨_âŸ©_</a>
  <a id="21397" class="Keyword">infix</a>  <a id="21404" class="Number">3</a> <a id="21406" href="/Denotational/#21750" class="Function Operator">_â˜</a>

  <a id="â‰ƒ-Reasoning.start_"></a><a id="21412" href="/Denotational/#21412" class="Function Operator">start_</a> <a id="21419" class="Symbol">:</a> <a id="21421" class="Symbol">âˆ€</a> <a id="21423" class="Symbol">{</a><a id="21424" href="plfa.part3.Denotational.html#21424" class="Bound">x</a> <a id="21426" href="plfa.part3.Denotational.html#21426" class="Bound">y</a> <a id="21428" class="Symbol">:</a> <a id="21430" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21441" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21442" class="Symbol">}</a>
    <a id="21448" class="Symbol">â†’</a> <a id="21450" href="/Denotational/#21424" class="Bound">x</a> <a id="21452" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21454" href="plfa.part3.Denotational.html#21426" class="Bound">y</a>
      <a id="21462" class="Comment">-----</a>
    <a id="21472" class="Symbol">â†’</a> <a id="21474" href="/Denotational/#21424" class="Bound">x</a> <a id="21476" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21478" href="plfa.part3.Denotational.html#21426" class="Bound">y</a>
  <a id="21482" href="/Denotational/#21412" class="Function Operator">start</a> <a id="21488" href="plfa.part3.Denotational.html#21488" class="Bound">xâ‰ƒy</a>  <a id="21493" class="Symbol">=</a>  <a id="21496" href="plfa.part3.Denotational.html#21488" class="Bound">xâ‰ƒy</a>

  <a id="â‰ƒ-Reasoning._â‰ƒâŸ¨_âŸ©_"></a><a id="21503" href="/Denotational/#21503" class="Function Operator">_â‰ƒâŸ¨_âŸ©_</a> <a id="21510" class="Symbol">:</a> <a id="21512" class="Symbol">âˆ€</a> <a id="21514" class="Symbol">(</a><a id="21515" href="plfa.part3.Denotational.html#21515" class="Bound">x</a> <a id="21517" class="Symbol">:</a> <a id="21519" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21530" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21531" class="Symbol">)</a> <a id="21533" class="Symbol">{</a><a id="21534" href="plfa.part3.Denotational.html#21534" class="Bound">y</a> <a id="21536" href="plfa.part3.Denotational.html#21536" class="Bound">z</a> <a id="21538" class="Symbol">:</a> <a id="21540" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21551" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21552" class="Symbol">}</a>
    <a id="21558" class="Symbol">â†’</a> <a id="21560" href="/Denotational/#21515" class="Bound">x</a> <a id="21562" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21564" href="plfa.part3.Denotational.html#21534" class="Bound">y</a>
    <a id="21570" class="Symbol">â†’</a> <a id="21572" href="/Denotational/#21534" class="Bound">y</a> <a id="21574" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21576" href="plfa.part3.Denotational.html#21536" class="Bound">z</a>
      <a id="21584" class="Comment">-----</a>
    <a id="21594" class="Symbol">â†’</a> <a id="21596" href="/Denotational/#21515" class="Bound">x</a> <a id="21598" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21600" href="plfa.part3.Denotational.html#21536" class="Bound">z</a>
  <a id="21604" class="Symbol">(</a><a id="21605" href="/Denotational/#21605" class="Bound">x</a> <a id="21607" href="plfa.part3.Denotational.html#21503" class="Function Operator">â‰ƒâŸ¨</a> <a id="21610" href="plfa.part3.Denotational.html#21610" class="Bound">xâ‰ƒy</a> <a id="21614" href="plfa.part3.Denotational.html#21503" class="Function Operator">âŸ©</a> <a id="21616" href="plfa.part3.Denotational.html#21616" class="Bound">yâ‰ƒz</a><a id="21619" class="Symbol">)</a> <a id="21621" class="Symbol">=</a>  <a id="21624" href="plfa.part3.Denotational.html#20325" class="Function">â‰ƒ-trans</a> <a id="21632" href="plfa.part3.Denotational.html#21610" class="Bound">xâ‰ƒy</a> <a id="21636" href="plfa.part3.Denotational.html#21616" class="Bound">yâ‰ƒz</a>

  <a id="â‰ƒ-Reasoning._â‰ƒâŸ¨âŸ©_"></a><a id="21643" href="/Denotational/#21643" class="Function Operator">_â‰ƒâŸ¨âŸ©_</a> <a id="21649" class="Symbol">:</a> <a id="21651" class="Symbol">âˆ€</a> <a id="21653" class="Symbol">(</a><a id="21654" href="plfa.part3.Denotational.html#21654" class="Bound">x</a> <a id="21656" class="Symbol">:</a> <a id="21658" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21669" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21670" class="Symbol">)</a> <a id="21672" class="Symbol">{</a><a id="21673" href="plfa.part3.Denotational.html#21673" class="Bound">y</a> <a id="21675" class="Symbol">:</a> <a id="21677" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21688" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21689" class="Symbol">}</a>
    <a id="21695" class="Symbol">â†’</a> <a id="21697" href="/Denotational/#21654" class="Bound">x</a> <a id="21699" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21701" href="plfa.part3.Denotational.html#21673" class="Bound">y</a>
      <a id="21709" class="Comment">-----</a>
    <a id="21719" class="Symbol">â†’</a> <a id="21721" href="/Denotational/#21654" class="Bound">x</a> <a id="21723" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21725" href="plfa.part3.Denotational.html#21673" class="Bound">y</a>
  <a id="21729" href="/Denotational/#21729" class="Bound">x</a> <a id="21731" href="plfa.part3.Denotational.html#21643" class="Function Operator">â‰ƒâŸ¨âŸ©</a> <a id="21735" href="plfa.part3.Denotational.html#21735" class="Bound">xâ‰ƒy</a>  <a id="21740" class="Symbol">=</a>  <a id="21743" href="plfa.part3.Denotational.html#21735" class="Bound">xâ‰ƒy</a>

  <a id="â‰ƒ-Reasoning._â˜"></a><a id="21750" href="/Denotational/#21750" class="Function Operator">_â˜</a> <a id="21753" class="Symbol">:</a> <a id="21755" class="Symbol">âˆ€</a> <a id="21757" class="Symbol">(</a><a id="21758" href="plfa.part3.Denotational.html#21758" class="Bound">x</a> <a id="21760" class="Symbol">:</a> <a id="21762" href="plfa.part3.Denotational.html#19525" class="Function">Denotation</a> <a id="21773" href="plfa.part3.Denotational.html#21333" class="Bound">Î“</a><a id="21774" class="Symbol">)</a>
      <a id="21782" class="Comment">-----</a>
    <a id="21792" class="Symbol">â†’</a> <a id="21794" href="/Denotational/#21758" class="Bound">x</a> <a id="21796" href="plfa.part3.Denotational.html#19920" class="Function Operator">â‰ƒ</a> <a id="21798" href="plfa.part3.Denotational.html#21758" class="Bound">x</a>
  <a id="21802" class="Symbol">(</a><a id="21803" href="/Denotational/#21803" class="Bound">x</a> <a id="21805" href="plfa.part3.Denotational.html#21750" class="Function Operator">â˜</a><a id="21806" class="Symbol">)</a>  <a id="21809" class="Symbol">=</a>  <a id="21812" href="plfa.part3.Denotational.html#20096" class="Function">â‰ƒ-refl</a>
</pre>
<h2 id="road-map-for-the-following-chapters">Road map for the following chapters</h2>

<p>The subsequent chapters prove that the denotational semantics has
several desirable properties. First, we prove that the semantics is
compositional, i.e., that the denotation of a term is a function of
the denotations of its subterms. To do this we shall prove equations
of the following shape.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â„° (` x) â‰ƒ ...
â„° (Æ› M) â‰ƒ ... â„° M ...
â„° (M Â· N) â‰ƒ ... â„° M ... â„° N ...
</code></pre></div></div>

<p>The compositionality property is not trivial because the semantics we
have defined includes three rules that are not syntax directed:
<code class="language-plaintext highlighter-rouge">âŠ¥-intro</code>, <code class="language-plaintext highlighter-rouge">âŠ”-intro</code>, and <code class="language-plaintext highlighter-rouge">sub</code>. The above equations suggest that the
dentoational semantics can be defined as a recursive function, and
indeed, we give such a definition and prove that it is equivalent to
â„°.</p>

<p>Next we investigate whether the denotational semantics and the
reduction semantics are equivalent. Recall that the job of a language
semantics is to describe the observable behavior of a given program
<code class="language-plaintext highlighter-rouge">M</code>. For the lambda calculus there are several choices that one can
make, but they usually boil down to a single bit of information:</p>

<ul>
  <li>divergence: the program <code class="language-plaintext highlighter-rouge">M</code> executes forever.</li>
  <li>termination: the program <code class="language-plaintext highlighter-rouge">M</code> halts.</li>
</ul>

<p>We can characterize divergence and termination in terms of reduction.</p>

<ul>
  <li>divergence: <code class="language-plaintext highlighter-rouge">Â¬ (M â€”â†  Æ› N)</code> for any term <code class="language-plaintext highlighter-rouge">N</code>.</li>
  <li>termination: <code class="language-plaintext highlighter-rouge">M â€”â†  Æ› N</code> for some term <code class="language-plaintext highlighter-rouge">N</code>.</li>
</ul>

<p>We can also characterize divergence and termination using denotations.</p>

<ul>
  <li>divergence: <code class="language-plaintext highlighter-rouge">Â¬ (âˆ… âŠ¢ M â†“ v â†¦ w)</code> for any <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code>.</li>
  <li>termination: <code class="language-plaintext highlighter-rouge">âˆ… âŠ¢ M â†“ v â†¦ w</code> for some <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code>.</li>
</ul>

<p>Alternatively, we can use the denotation function <code class="language-plaintext highlighter-rouge">â„°</code>.</p>

<ul>
  <li>divergence: <code class="language-plaintext highlighter-rouge">Â¬ (â„° M â‰ƒ â„° (Æ› N))</code> for any term <code class="language-plaintext highlighter-rouge">N</code>.</li>
  <li>termination: <code class="language-plaintext highlighter-rouge">â„° M â‰ƒ â„° (Æ› N)</code> for some term <code class="language-plaintext highlighter-rouge">N</code>.</li>
</ul>

<p>So the question is whether the reduction semantics and denotational
semantics are equivalent.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(âˆƒ N. M â€”â†  Æ› N)  iff  (âˆƒ N. â„° M â‰ƒ â„° (Æ› N))
</code></pre></div></div>

<p>We address each direction of the equivalence in the second and third
chapters. In the second chapter we prove that reduction to a lambda
abstraction implies denotational equality to a lambda
abstraction. This property is called the <em>soundness</em> in the
literature.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M â€”â†  Æ› N  implies  â„° M â‰ƒ â„° (Æ› N)
</code></pre></div></div>

<p>In the third chapter we prove that denotational equality to a lambda
abstraction implies reduction to a lambda abstraction. This property
is called <em>adequacy</em> in the literature.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â„° M â‰ƒ â„° (Æ› N)  implies M â€”â†  Æ› Nâ€² for some Nâ€²
</code></pre></div></div>

<p>The fourth chapter applies the results of the three preceeding
chapters (compositionality, soundness, and adequacy) to prove that
denotational equality implies a property called <em>contextual
equivalence</em>. This property is important because it justifies the use
of denotational equality in proving the correctness of program
transformations such as performance optimizations.</p>

<p>The proofs of all of these properties rely on some basic results about
the denotational semantics, which we establish in the rest of this
chapter.  We start with some lemmas about renaming, which are quite
similar to the renaming lemmas that we have seen in previous chapters.
We conclude with a proof of an important inversion lemma for the
less-than relation regarding function values.</p>

<h2 id="renaming-preserves-denotations">Renaming preserves denotations</h2>

<p>We shall prove that renaming variables, and changing the environment
accordingly, preserves the meaning of a term. We generalize the
renaming lemma to allow the values in the new environment to be the
same or larger than the original values. This generalization is useful
in proving that reduction implies denotational equality.</p>

<p>As before, we need an extension lemma to handle the case where we
proceed underneath a lambda abstraction. Suppose that <code class="language-plaintext highlighter-rouge">Ï</code> is a
renaming that maps variables in <code class="language-plaintext highlighter-rouge">Î³</code> into variables with equal or
larger values in <code class="language-plaintext highlighter-rouge">Î´</code>. This lemmas says that extending the renaming
producing a renaming <code class="language-plaintext highlighter-rouge">ext r</code> that maps <code class="language-plaintext highlighter-rouge">Î³ , v</code> to <code class="language-plaintext highlighter-rouge">Î´ , v</code>.</p>

<pre class="Agda"><a id="ext-âŠ‘"></a><a id="25656" href="/Denotational/#25656" class="Function">ext-âŠ‘</a> <a id="25662" class="Symbol">:</a> <a id="25664" class="Symbol">âˆ€</a> <a id="25666" class="Symbol">{</a><a id="25667" href="plfa.part3.Denotational.html#25667" class="Bound">Î“</a> <a id="25669" href="plfa.part3.Denotational.html#25669" class="Bound">Î”</a> <a id="25671" href="plfa.part3.Denotational.html#25671" class="Bound">v</a><a id="25672" class="Symbol">}</a> <a id="25674" class="Symbol">{</a><a id="25675" href="plfa.part3.Denotational.html#25675" class="Bound">Î³</a> <a id="25677" class="Symbol">:</a> <a id="25679" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="25683" href="plfa.part3.Denotational.html#25667" class="Bound">Î“</a><a id="25684" class="Symbol">}</a> <a id="25686" class="Symbol">{</a><a id="25687" href="plfa.part3.Denotational.html#25687" class="Bound">Î´</a> <a id="25689" class="Symbol">:</a> <a id="25691" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="25695" href="plfa.part3.Denotational.html#25669" class="Bound">Î”</a><a id="25696" class="Symbol">}</a>
  <a id="25700" class="Symbol">â†’</a> <a id="25702" class="Symbol">(</a><a id="25703" href="/Denotational/#25703" class="Bound">Ï</a> <a id="25705" class="Symbol">:</a> <a id="25707" href="/Substitution/#2192" class="Function">Rename</a> <a id="25714" href="plfa.part3.Denotational.html#25667" class="Bound">Î“</a> <a id="25716" href="plfa.part3.Denotational.html#25669" class="Bound">Î”</a><a id="25717" class="Symbol">)</a>
  <a id="25721" class="Symbol">â†’</a> <a id="25723" href="/Denotational/#25675" class="Bound">Î³</a> <a id="25725" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="25728" class="Symbol">(</a><a id="25729" href="plfa.part3.Denotational.html#25687" class="Bound">Î´</a> <a id="25731" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">âˆ˜</a> <a id="25733" href="plfa.part3.Denotational.html#25703" class="Bound">Ï</a><a id="25734" class="Symbol">)</a>
    <a id="25740" class="Comment">------------------------------</a>
  <a id="25773" class="Symbol">â†’</a> <a id="25775" class="Symbol">(</a><a id="25776" href="/Denotational/#25675" class="Bound">Î³</a> <a id="25778" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="25781" href="plfa.part3.Denotational.html#25671" class="Bound">v</a><a id="25782" class="Symbol">)</a> <a id="25784" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="25787" class="Symbol">((</a><a id="25789" href="plfa.part3.Denotational.html#25687" class="Bound">Î´</a> <a id="25791" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="25794" href="plfa.part3.Denotational.html#25671" class="Bound">v</a><a id="25795" class="Symbol">)</a> <a id="25797" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">âˆ˜</a> <a id="25799" href="/Untyped/#5925" class="Function">ext</a> <a id="25803" href="plfa.part3.Denotational.html#25703" class="Bound">Ï</a><a id="25804" class="Symbol">)</a>
<a id="25806" href="/Denotational/#25656" class="Function">ext-âŠ‘</a> <a id="25812" href="plfa.part3.Denotational.html#25812" class="Bound">Ï</a> <a id="25814" href="plfa.part3.Denotational.html#25814" class="Bound">lt</a> <a id="25817" href="/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="25819" class="Symbol">=</a> <a id="25821" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>
<a id="25828" href="/Denotational/#25656" class="Function">ext-âŠ‘</a> <a id="25834" href="plfa.part3.Denotational.html#25834" class="Bound">Ï</a> <a id="25836" href="plfa.part3.Denotational.html#25836" class="Bound">lt</a> <a id="25839" class="Symbol">(</a><a id="25840" href="/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="25842" href="plfa.part3.Denotational.html#25842" class="Bound">nâ€²</a><a id="25844" class="Symbol">)</a> <a id="25846" class="Symbol">=</a> <a id="25848" href="plfa.part3.Denotational.html#25836" class="Bound">lt</a> <a id="25851" href="plfa.part3.Denotational.html#25842" class="Bound">nâ€²</a>
</pre>
<p>We proceed by cases on the de Bruijn index <code class="language-plaintext highlighter-rouge">n</code>.</p>

<ul>
  <li>
    <p>If it is <code class="language-plaintext highlighter-rouge">Z</code>, then we just need to show that <code class="language-plaintext highlighter-rouge">v â‰¡ v</code>, which we have by <code class="language-plaintext highlighter-rouge">refl</code>.</p>
  </li>
  <li>
    <p>If it is <code class="language-plaintext highlighter-rouge">S nâ€²</code>, then the goal simplifies to <code class="language-plaintext highlighter-rouge">Î³ nâ€² â‰¡ Î´ (Ï nâ€²)</code>,
which is an instance of the premise.</p>
  </li>
</ul>

<p>Now for the renaming lemma. Suppose we have a renaming that maps
variables in <code class="language-plaintext highlighter-rouge">Î³</code> into variables with the same values in <code class="language-plaintext highlighter-rouge">Î´</code>.  If <code class="language-plaintext highlighter-rouge">M</code>
results in <code class="language-plaintext highlighter-rouge">v</code> when evaluated in environment <code class="language-plaintext highlighter-rouge">Î³</code>, then applying the
renaming to <code class="language-plaintext highlighter-rouge">M</code> produces a program that results in the same value <code class="language-plaintext highlighter-rouge">v</code> when
evaluated in <code class="language-plaintext highlighter-rouge">Î´</code>.</p>

<pre class="Agda"><a id="rename-pres"></a><a id="26396" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26408" class="Symbol">:</a> <a id="26410" class="Symbol">âˆ€</a> <a id="26412" class="Symbol">{</a><a id="26413" href="plfa.part3.Denotational.html#26413" class="Bound">Î“</a> <a id="26415" href="plfa.part3.Denotational.html#26415" class="Bound">Î”</a> <a id="26417" href="plfa.part3.Denotational.html#26417" class="Bound">v</a><a id="26418" class="Symbol">}</a> <a id="26420" class="Symbol">{</a><a id="26421" href="plfa.part3.Denotational.html#26421" class="Bound">Î³</a> <a id="26423" class="Symbol">:</a> <a id="26425" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="26429" href="plfa.part3.Denotational.html#26413" class="Bound">Î“</a><a id="26430" class="Symbol">}</a> <a id="26432" class="Symbol">{</a><a id="26433" href="plfa.part3.Denotational.html#26433" class="Bound">Î´</a> <a id="26435" class="Symbol">:</a> <a id="26437" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="26441" href="plfa.part3.Denotational.html#26415" class="Bound">Î”</a><a id="26442" class="Symbol">}</a> <a id="26444" class="Symbol">{</a><a id="26445" href="plfa.part3.Denotational.html#26445" class="Bound">M</a> <a id="26447" class="Symbol">:</a> <a id="26449" href="plfa.part3.Denotational.html#26413" class="Bound">Î“</a> <a id="26451" href="/Untyped/#4294" class="Datatype Operator">âŠ¢</a> <a id="26453" href="plfa.part2.Untyped.html#2888" class="InductiveConstructor">â˜…</a><a id="26454" class="Symbol">}</a>
  <a id="26458" class="Symbol">â†’</a> <a id="26460" class="Symbol">(</a><a id="26461" href="/Denotational/#26461" class="Bound">Ï</a> <a id="26463" class="Symbol">:</a> <a id="26465" href="/Substitution/#2192" class="Function">Rename</a> <a id="26472" href="plfa.part3.Denotational.html#26413" class="Bound">Î“</a> <a id="26474" href="plfa.part3.Denotational.html#26415" class="Bound">Î”</a><a id="26475" class="Symbol">)</a>
  <a id="26479" class="Symbol">â†’</a> <a id="26481" href="/Denotational/#26421" class="Bound">Î³</a> <a id="26483" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="26486" class="Symbol">(</a><a id="26487" href="plfa.part3.Denotational.html#26433" class="Bound">Î´</a> <a id="26489" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">âˆ˜</a> <a id="26491" href="plfa.part3.Denotational.html#26461" class="Bound">Ï</a><a id="26492" class="Symbol">)</a>
  <a id="26496" class="Symbol">â†’</a> <a id="26498" href="/Denotational/#26421" class="Bound">Î³</a> <a id="26500" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="26502" href="plfa.part3.Denotational.html#26445" class="Bound">M</a> <a id="26504" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="26506" href="plfa.part3.Denotational.html#26417" class="Bound">v</a>
    <a id="26512" class="Comment">---------------------</a>
  <a id="26536" class="Symbol">â†’</a> <a id="26538" href="/Denotational/#26433" class="Bound">Î´</a> <a id="26540" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="26542" class="Symbol">(</a><a id="26543" href="/Untyped/#6235" class="Function">rename</a> <a id="26550" href="plfa.part3.Denotational.html#26461" class="Bound">Ï</a> <a id="26552" href="plfa.part3.Denotational.html#26445" class="Bound">M</a><a id="26553" class="Symbol">)</a> <a id="26555" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="26557" href="plfa.part3.Denotational.html#26417" class="Bound">v</a>
<a id="26559" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26571" href="plfa.part3.Denotational.html#26571" class="Bound">Ï</a> <a id="26573" href="plfa.part3.Denotational.html#26573" class="Bound">lt</a> <a id="26576" class="Symbol">(</a><a id="26577" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="26581" class="Symbol">{</a><a id="26582" class="Argument">x</a> <a id="26584" class="Symbol">=</a> <a id="26586" href="plfa.part3.Denotational.html#26586" class="Bound">x</a><a id="26587" class="Symbol">})</a> <a id="26590" class="Symbol">=</a> <a id="26592" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="26596" href="plfa.part3.Denotational.html#9400" class="InductiveConstructor">var</a> <a id="26600" class="Symbol">(</a><a id="26601" href="plfa.part3.Denotational.html#26573" class="Bound">lt</a> <a id="26604" href="plfa.part3.Denotational.html#26586" class="Bound">x</a><a id="26605" class="Symbol">)</a>
<a id="26607" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26619" href="plfa.part3.Denotational.html#26619" class="Bound">Ï</a> <a id="26621" href="plfa.part3.Denotational.html#26621" class="Bound">lt</a> <a id="26624" class="Symbol">(</a><a id="26625" href="plfa.part3.Denotational.html#9475" class="InductiveConstructor">â†¦-elim</a> <a id="26632" href="plfa.part3.Denotational.html#26632" class="Bound">d</a> <a id="26634" href="plfa.part3.Denotational.html#26634" class="Bound">dâ‚</a><a id="26636" class="Symbol">)</a> <a id="26638" class="Symbol">=</a>
   <a id="26643" href="/Denotational/#9475" class="InductiveConstructor">â†¦-elim</a> <a id="26650" class="Symbol">(</a><a id="26651" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26663" href="plfa.part3.Denotational.html#26619" class="Bound">Ï</a> <a id="26665" href="plfa.part3.Denotational.html#26621" class="Bound">lt</a> <a id="26668" href="plfa.part3.Denotational.html#26632" class="Bound">d</a><a id="26669" class="Symbol">)</a> <a id="26671" class="Symbol">(</a><a id="26672" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26684" href="plfa.part3.Denotational.html#26619" class="Bound">Ï</a> <a id="26686" href="plfa.part3.Denotational.html#26621" class="Bound">lt</a> <a id="26689" href="plfa.part3.Denotational.html#26634" class="Bound">dâ‚</a><a id="26691" class="Symbol">)</a>
<a id="26693" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26705" href="plfa.part3.Denotational.html#26705" class="Bound">Ï</a> <a id="26707" href="plfa.part3.Denotational.html#26707" class="Bound">lt</a> <a id="26710" class="Symbol">(</a><a id="26711" href="plfa.part3.Denotational.html#9597" class="InductiveConstructor">â†¦-intro</a> <a id="26719" href="plfa.part3.Denotational.html#26719" class="Bound">d</a><a id="26720" class="Symbol">)</a> <a id="26722" class="Symbol">=</a>
   <a id="26727" href="/Denotational/#9597" class="InductiveConstructor">â†¦-intro</a> <a id="26735" class="Symbol">(</a><a id="26736" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26748" class="Symbol">(</a><a id="26749" href="/Untyped/#5925" class="Function">ext</a> <a id="26753" href="plfa.part3.Denotational.html#26705" class="Bound">Ï</a><a id="26754" class="Symbol">)</a> <a id="26756" class="Symbol">(</a><a id="26757" href="plfa.part3.Denotational.html#25656" class="Function">ext-âŠ‘</a> <a id="26763" href="plfa.part3.Denotational.html#26705" class="Bound">Ï</a> <a id="26765" href="plfa.part3.Denotational.html#26707" class="Bound">lt</a><a id="26767" class="Symbol">)</a> <a id="26769" href="plfa.part3.Denotational.html#26719" class="Bound">d</a><a id="26770" class="Symbol">)</a>
<a id="26772" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26784" href="plfa.part3.Denotational.html#26784" class="Bound">Ï</a> <a id="26786" href="plfa.part3.Denotational.html#26786" class="Bound">lt</a> <a id="26789" href="plfa.part3.Denotational.html#9709" class="InductiveConstructor">âŠ¥-intro</a> <a id="26797" class="Symbol">=</a> <a id="26799" href="plfa.part3.Denotational.html#9709" class="InductiveConstructor">âŠ¥-intro</a>
<a id="26807" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26819" href="plfa.part3.Denotational.html#26819" class="Bound">Ï</a> <a id="26821" href="plfa.part3.Denotational.html#26821" class="Bound">lt</a> <a id="26824" class="Symbol">(</a><a id="26825" href="plfa.part3.Denotational.html#9776" class="InductiveConstructor">âŠ”-intro</a> <a id="26833" href="plfa.part3.Denotational.html#26833" class="Bound">d</a> <a id="26835" href="plfa.part3.Denotational.html#26835" class="Bound">dâ‚</a><a id="26837" class="Symbol">)</a> <a id="26839" class="Symbol">=</a>
   <a id="26844" href="/Denotational/#9776" class="InductiveConstructor">âŠ”-intro</a> <a id="26852" class="Symbol">(</a><a id="26853" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26865" href="plfa.part3.Denotational.html#26819" class="Bound">Ï</a> <a id="26867" href="plfa.part3.Denotational.html#26821" class="Bound">lt</a> <a id="26870" href="plfa.part3.Denotational.html#26833" class="Bound">d</a><a id="26871" class="Symbol">)</a> <a id="26873" class="Symbol">(</a><a id="26874" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26886" href="plfa.part3.Denotational.html#26819" class="Bound">Ï</a> <a id="26888" href="plfa.part3.Denotational.html#26821" class="Bound">lt</a> <a id="26891" href="plfa.part3.Denotational.html#26835" class="Bound">dâ‚</a><a id="26893" class="Symbol">)</a>
<a id="26895" href="/Denotational/#26396" class="Function">rename-pres</a> <a id="26907" href="plfa.part3.Denotational.html#26907" class="Bound">Ï</a> <a id="26909" href="plfa.part3.Denotational.html#26909" class="Bound">lt</a> <a id="26912" class="Symbol">(</a><a id="26913" href="plfa.part3.Denotational.html#9891" class="InductiveConstructor">sub</a> <a id="26917" href="plfa.part3.Denotational.html#26917" class="Bound">d</a> <a id="26919" href="plfa.part3.Denotational.html#26919" class="Bound">ltâ€²</a><a id="26922" class="Symbol">)</a> <a id="26924" class="Symbol">=</a>
   <a id="26929" href="/Denotational/#9891" class="InductiveConstructor">sub</a> <a id="26933" class="Symbol">(</a><a id="26934" href="plfa.part3.Denotational.html#26396" class="Function">rename-pres</a> <a id="26946" href="plfa.part3.Denotational.html#26907" class="Bound">Ï</a> <a id="26948" href="plfa.part3.Denotational.html#26909" class="Bound">lt</a> <a id="26951" href="plfa.part3.Denotational.html#26917" class="Bound">d</a><a id="26952" class="Symbol">)</a> <a id="26954" href="plfa.part3.Denotational.html#26919" class="Bound">ltâ€²</a>
</pre>
<p>The proof is by induction on the semantics of <code class="language-plaintext highlighter-rouge">M</code>.  As you can see, all
of the cases are trivial except the cases for variables and lambda.</p>

<ul>
  <li>
    <p>For a variable <code class="language-plaintext highlighter-rouge">x</code>, we make use of the premise to show that
<code class="language-plaintext highlighter-rouge">Î³ x â‰¡ Î´ (Ï x)</code>.</p>
  </li>
  <li>
    <p>For a lambda abstraction, the induction hypothesis requires us to
extend the renaming. We do so, and use the <code class="language-plaintext highlighter-rouge">ext-âŠ‘</code> lemma to show
that the extended renaming maps variables to ones with equivalent
values.</p>
  </li>
</ul>

<h2 id="environment-strengthening-and-identity-renaming">Environment strengthening and identity renaming</h2>

<p>We shall need a corollary of the renaming lemma that says that
replacing the environment with a larger one (a stronger one) does not
change whether a term <code class="language-plaintext highlighter-rouge">M</code> results in particular value <code class="language-plaintext highlighter-rouge">v</code>. In
particular, if <code class="language-plaintext highlighter-rouge">Î³ âŠ¢ M â†“ v</code> and <code class="language-plaintext highlighter-rouge">Î³ âŠ‘ Î´</code>, then <code class="language-plaintext highlighter-rouge">Î´ âŠ¢ M â†“ v</code>.  What does
this have to do with renaming?  Itâ€™s renaming with the identity
function.  We apply the renaming lemma with the identity renaming,
which gives us <code class="language-plaintext highlighter-rouge">Î´ âŠ¢ rename (Î» {A} x â†’ x) M â†“ v</code>, and then we apply the
<code class="language-plaintext highlighter-rouge">rename-id</code> lemma to obtain <code class="language-plaintext highlighter-rouge">Î´ âŠ¢ M â†“ v</code>.</p>

<pre class="Agda"><a id="âŠ‘-env"></a><a id="27965" href="/Denotational/#27965" class="Function">âŠ‘-env</a> <a id="27971" class="Symbol">:</a> <a id="27973" class="Symbol">âˆ€</a> <a id="27975" class="Symbol">{</a><a id="27976" href="plfa.part3.Denotational.html#27976" class="Bound">Î“</a><a id="27977" class="Symbol">}</a> <a id="27979" class="Symbol">{</a><a id="27980" href="plfa.part3.Denotational.html#27980" class="Bound">Î³</a> <a id="27982" class="Symbol">:</a> <a id="27984" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="27988" href="plfa.part3.Denotational.html#27976" class="Bound">Î“</a><a id="27989" class="Symbol">}</a> <a id="27991" class="Symbol">{</a><a id="27992" href="plfa.part3.Denotational.html#27992" class="Bound">Î´</a> <a id="27994" class="Symbol">:</a> <a id="27996" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="28000" href="plfa.part3.Denotational.html#27976" class="Bound">Î“</a><a id="28001" class="Symbol">}</a> <a id="28003" class="Symbol">{</a><a id="28004" href="plfa.part3.Denotational.html#28004" class="Bound">M</a> <a id="28006" href="plfa.part3.Denotational.html#28006" class="Bound">v</a><a id="28007" class="Symbol">}</a>
  <a id="28011" class="Symbol">â†’</a> <a id="28013" href="/Denotational/#27980" class="Bound">Î³</a> <a id="28015" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="28017" href="plfa.part3.Denotational.html#28004" class="Bound">M</a> <a id="28019" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="28021" href="plfa.part3.Denotational.html#28006" class="Bound">v</a>
  <a id="28025" class="Symbol">â†’</a> <a id="28027" href="/Denotational/#27980" class="Bound">Î³</a> <a id="28029" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="28032" href="plfa.part3.Denotational.html#27992" class="Bound">Î´</a>
    <a id="28038" class="Comment">----------</a>
  <a id="28051" class="Symbol">â†’</a> <a id="28053" href="/Denotational/#27992" class="Bound">Î´</a> <a id="28055" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="28057" href="plfa.part3.Denotational.html#28004" class="Bound">M</a> <a id="28059" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="28061" href="plfa.part3.Denotational.html#28006" class="Bound">v</a>
<a id="28063" href="/Denotational/#27965" class="Function">âŠ‘-env</a><a id="28068" class="Symbol">{</a><a id="28069" href="plfa.part3.Denotational.html#28069" class="Bound">Î“</a><a id="28070" class="Symbol">}{</a><a id="28072" href="plfa.part3.Denotational.html#28072" class="Bound">Î³</a><a id="28073" class="Symbol">}{</a><a id="28075" href="plfa.part3.Denotational.html#28075" class="Bound">Î´</a><a id="28076" class="Symbol">}{</a><a id="28078" href="plfa.part3.Denotational.html#28078" class="Bound">M</a><a id="28079" class="Symbol">}{</a><a id="28081" href="plfa.part3.Denotational.html#28081" class="Bound">v</a><a id="28082" class="Symbol">}</a> <a id="28084" href="plfa.part3.Denotational.html#28084" class="Bound">d</a> <a id="28086" href="plfa.part3.Denotational.html#28086" class="Bound">lt</a>
      <a id="28095" class="Keyword">with</a> <a id="28100" href="/Denotational/#26396" class="Function">rename-pres</a><a id="28111" class="Symbol">{</a><a id="28112" href="plfa.part3.Denotational.html#28069" class="Bound">Î“</a><a id="28113" class="Symbol">}{</a><a id="28115" href="plfa.part3.Denotational.html#28069" class="Bound">Î“</a><a id="28116" class="Symbol">}{</a><a id="28118" href="plfa.part3.Denotational.html#28081" class="Bound">v</a><a id="28119" class="Symbol">}{</a><a id="28121" href="plfa.part3.Denotational.html#28072" class="Bound">Î³</a><a id="28122" class="Symbol">}{</a><a id="28124" href="plfa.part3.Denotational.html#28075" class="Bound">Î´</a><a id="28125" class="Symbol">}{</a><a id="28127" href="plfa.part3.Denotational.html#28078" class="Bound">M</a><a id="28128" class="Symbol">}</a> <a id="28130" class="Symbol">(Î»</a> <a id="28133" class="Symbol">{</a><a id="28134" href="plfa.part3.Denotational.html#28134" class="Bound">A</a><a id="28135" class="Symbol">}</a> <a id="28137" href="plfa.part3.Denotational.html#28137" class="Bound">x</a> <a id="28139" class="Symbol">â†’</a> <a id="28141" href="plfa.part3.Denotational.html#28137" class="Bound">x</a><a id="28142" class="Symbol">)</a> <a id="28144" href="plfa.part3.Denotational.html#28086" class="Bound">lt</a> <a id="28147" href="plfa.part3.Denotational.html#28084" class="Bound">d</a>
<a id="28149" class="Symbol">...</a> <a id="28153" class="Symbol">|</a> <a id="28155" href="/Denotational/#28155" class="Bound">Î´âŠ¢id[M]â†“v</a> <a id="28165" class="Keyword">rewrite</a> <a id="28173" href="/Substitution/#17352" class="Function">rename-id</a> <a id="28183" class="Symbol">{</a><a id="28184" class="Bound">Î“</a><a id="28185" class="Symbol">}{</a><a id="28187" href="/Untyped/#2888" class="InductiveConstructor">â˜…</a><a id="28188" class="Symbol">}{</a><a id="28190" class="Bound">M</a><a id="28191" class="Symbol">}</a> <a id="28193" class="Symbol">=</a>
      <a id="28201" href="/Denotational/#28155" class="Bound">Î´âŠ¢id[M]â†“v</a>
</pre>
<p>In the proof that substitution reflects denotations, in the case for
lambda abstraction, we use a minor variation of <code class="language-plaintext highlighter-rouge">âŠ‘-env</code>, in which just
the last element of the environment gets larger.</p>

<pre class="Agda"><a id="up-env"></a><a id="28410" href="/Denotational/#28410" class="Function">up-env</a> <a id="28417" class="Symbol">:</a> <a id="28419" class="Symbol">âˆ€</a> <a id="28421" class="Symbol">{</a><a id="28422" href="plfa.part3.Denotational.html#28422" class="Bound">Î“</a><a id="28423" class="Symbol">}</a> <a id="28425" class="Symbol">{</a><a id="28426" href="plfa.part3.Denotational.html#28426" class="Bound">Î³</a> <a id="28428" class="Symbol">:</a> <a id="28430" href="plfa.part3.Denotational.html#7288" class="Function">Env</a> <a id="28434" href="plfa.part3.Denotational.html#28422" class="Bound">Î“</a><a id="28435" class="Symbol">}</a> <a id="28437" class="Symbol">{</a><a id="28438" href="plfa.part3.Denotational.html#28438" class="Bound">M</a> <a id="28440" href="plfa.part3.Denotational.html#28440" class="Bound">v</a> <a id="28442" href="plfa.part3.Denotational.html#28442" class="Bound">uâ‚</a> <a id="28445" href="plfa.part3.Denotational.html#28445" class="Bound">uâ‚‚</a><a id="28447" class="Symbol">}</a>
  <a id="28451" class="Symbol">â†’</a> <a id="28453" class="Symbol">(</a><a id="28454" href="/Denotational/#28426" class="Bound">Î³</a> <a id="28456" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="28459" href="plfa.part3.Denotational.html#28442" class="Bound">uâ‚</a><a id="28461" class="Symbol">)</a> <a id="28463" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="28465" href="plfa.part3.Denotational.html#28438" class="Bound">M</a> <a id="28467" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="28469" href="plfa.part3.Denotational.html#28440" class="Bound">v</a>
  <a id="28473" class="Symbol">â†’</a> <a id="28475" href="/Denotational/#28442" class="Bound">uâ‚</a> <a id="28478" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="28480" href="plfa.part3.Denotational.html#28445" class="Bound">uâ‚‚</a>
    <a id="28487" class="Comment">-----------------</a>
  <a id="28507" class="Symbol">â†’</a> <a id="28509" class="Symbol">(</a><a id="28510" href="/Denotational/#28426" class="Bound">Î³</a> <a id="28512" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="28515" href="plfa.part3.Denotational.html#28445" class="Bound">uâ‚‚</a><a id="28517" class="Symbol">)</a> <a id="28519" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">âŠ¢</a> <a id="28521" href="plfa.part3.Denotational.html#28438" class="Bound">M</a> <a id="28523" href="plfa.part3.Denotational.html#9346" class="Datatype Operator">â†“</a> <a id="28525" href="plfa.part3.Denotational.html#28440" class="Bound">v</a>
<a id="28527" href="/Denotational/#28410" class="Function">up-env</a> <a id="28534" href="plfa.part3.Denotational.html#28534" class="Bound">d</a> <a id="28536" href="plfa.part3.Denotational.html#28536" class="Bound">lt</a> <a id="28539" class="Symbol">=</a> <a id="28541" href="plfa.part3.Denotational.html#27965" class="Function">âŠ‘-env</a> <a id="28547" href="plfa.part3.Denotational.html#28534" class="Bound">d</a> <a id="28549" class="Symbol">(</a><a id="28550" href="plfa.part3.Denotational.html#28571" class="Function">ext-le</a> <a id="28557" href="plfa.part3.Denotational.html#28536" class="Bound">lt</a><a id="28559" class="Symbol">)</a>
  <a id="28563" class="Keyword">where</a>
  <a id="28571" href="/Denotational/#28571" class="Function">ext-le</a> <a id="28578" class="Symbol">:</a> <a id="28580" class="Symbol">âˆ€</a> <a id="28582" class="Symbol">{</a><a id="28583" href="plfa.part3.Denotational.html#28583" class="Bound">Î³</a> <a id="28585" href="plfa.part3.Denotational.html#28585" class="Bound">uâ‚</a> <a id="28588" href="plfa.part3.Denotational.html#28588" class="Bound">uâ‚‚</a><a id="28590" class="Symbol">}</a> <a id="28592" class="Symbol">â†’</a> <a id="28594" href="plfa.part3.Denotational.html#28585" class="Bound">uâ‚</a> <a id="28597" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="28599" href="plfa.part3.Denotational.html#28588" class="Bound">uâ‚‚</a> <a id="28602" class="Symbol">â†’</a> <a id="28604" class="Symbol">(</a><a id="28605" href="plfa.part3.Denotational.html#28583" class="Bound">Î³</a> <a id="28607" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="28610" href="plfa.part3.Denotational.html#28585" class="Bound">uâ‚</a><a id="28612" class="Symbol">)</a> <a id="28614" href="plfa.part3.Denotational.html#8108" class="Function Operator">`âŠ‘</a> <a id="28617" class="Symbol">(</a><a id="28618" href="plfa.part3.Denotational.html#28583" class="Bound">Î³</a> <a id="28620" href="plfa.part3.Denotational.html#7445" class="Function Operator">`,</a> <a id="28623" href="plfa.part3.Denotational.html#28588" class="Bound">uâ‚‚</a><a id="28625" class="Symbol">)</a>
  <a id="28629" href="/Denotational/#28571" class="Function">ext-le</a> <a id="28636" href="plfa.part3.Denotational.html#28636" class="Bound">lt</a> <a id="28639" href="/Untyped/#3557" class="InductiveConstructor">Z</a> <a id="28641" class="Symbol">=</a> <a id="28643" href="plfa.part3.Denotational.html#28636" class="Bound">lt</a>
  <a id="28648" href="/Denotational/#28571" class="Function">ext-le</a> <a id="28655" href="plfa.part3.Denotational.html#28655" class="Bound">lt</a> <a id="28658" class="Symbol">(</a><a id="28659" href="/Untyped/#3602" class="InductiveConstructor Operator">S</a> <a id="28661" href="plfa.part3.Denotational.html#28661" class="Bound">n</a><a id="28662" class="Symbol">)</a> <a id="28664" class="Symbol">=</a> <a id="28666" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>
</pre>

<h2 id="inversion-of-the-less-than-relation-for-functions">Inversion of the less-than relation for functions</h2>

<p>What can we deduce from knowing that a function <code class="language-plaintext highlighter-rouge">v â†¦ w</code> is less than
some value <code class="language-plaintext highlighter-rouge">u</code>?  What can we deduce about <code class="language-plaintext highlighter-rouge">u</code>? The answer to this
question is called the inversion property of less-than for functions.
This question is not easy to answer because of the <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code> rule, which
relates a function on the left to a pair of functions on the right.
So <code class="language-plaintext highlighter-rouge">u</code> may include several functions that, as a group, relate to
<code class="language-plaintext highlighter-rouge">v â†¦ w</code>. Furthermore, because of the rules <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R1</code> and <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R2</code>,
there may be other values inside <code class="language-plaintext highlighter-rouge">u</code>, such as <code class="language-plaintext highlighter-rouge">âŠ¥</code>, that have nothing
to do with <code class="language-plaintext highlighter-rouge">v â†¦ w</code>. But in general, we can deduce that <code class="language-plaintext highlighter-rouge">u</code> includes
a collection of functions where the join of their domains is less
than <code class="language-plaintext highlighter-rouge">v</code> and the join of their codomains is greater than <code class="language-plaintext highlighter-rouge">w</code>.</p>

<p>To precisely state and prove this inversion property, we need to
define what it means for a value to <em>include</em> a collection of values.
We also need to define how to compute the join of their domains and
codomains.</p>

<h3 id="value-membership-and-inclusion">Value membership and inclusion</h3>

<p>Recall that we think of a value as a set of entries with the join
operator <code class="language-plaintext highlighter-rouge">v âŠ” w</code> acting like set union. The function value <code class="language-plaintext highlighter-rouge">v â†¦ w</code> and
bottom value <code class="language-plaintext highlighter-rouge">âŠ¥</code> constitute the two kinds of elements of the set.  (In
other contexts one can instead think of <code class="language-plaintext highlighter-rouge">âŠ¥</code> as the empty set, but here
we must think of it as an element.)  We write <code class="language-plaintext highlighter-rouge">u âˆˆ v</code> to say that <code class="language-plaintext highlighter-rouge">u</code> is
an element of <code class="language-plaintext highlighter-rouge">v</code>, as defined below.</p>

<pre class="Agda"><a id="30127" class="Keyword">infix</a> <a id="30133" class="Number">5</a> <a id="30135" href="/Denotational/#30140" class="Function Operator">_âˆˆ_</a>

<a id="_âˆˆ_"></a><a id="30140" href="/Denotational/#30140" class="Function Operator">_âˆˆ_</a> <a id="30144" class="Symbol">:</a> <a id="30146" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="30152" class="Symbol">â†’</a> <a id="30154" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="30160" class="Symbol">â†’</a> <a id="30162" class="PrimitiveType">Set</a>
<a id="30166" href="/Denotational/#30166" class="Bound">u</a> <a id="30168" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30170" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a> <a id="30172" class="Symbol">=</a> <a id="30174" href="plfa.part3.Denotational.html#30166" class="Bound">u</a> <a id="30176" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="30178" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="30180" href="/Denotational/#30180" class="Bound">u</a> <a id="30182" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30184" href="plfa.part3.Denotational.html#30184" class="Bound">v</a> <a id="30186" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30188" href="plfa.part3.Denotational.html#30188" class="Bound">w</a> <a id="30190" class="Symbol">=</a> <a id="30192" href="plfa.part3.Denotational.html#30180" class="Bound">u</a> <a id="30194" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="30196" href="plfa.part3.Denotational.html#30184" class="Bound">v</a> <a id="30198" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30200" href="plfa.part3.Denotational.html#30188" class="Bound">w</a>
<a id="30202" href="/Denotational/#30202" class="Bound">u</a> <a id="30204" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30206" class="Symbol">(</a><a id="30207" href="plfa.part3.Denotational.html#30207" class="Bound">v</a> <a id="30209" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="30211" href="plfa.part3.Denotational.html#30211" class="Bound">w</a><a id="30212" class="Symbol">)</a> <a id="30214" class="Symbol">=</a> <a id="30216" href="plfa.part3.Denotational.html#30202" class="Bound">u</a> <a id="30218" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30220" href="plfa.part3.Denotational.html#30207" class="Bound">v</a> <a id="30222" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#612" class="Datatype Operator">âŠ</a> <a id="30224" href="plfa.part3.Denotational.html#30202" class="Bound">u</a> <a id="30226" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30228" href="plfa.part3.Denotational.html#30211" class="Bound">w</a>
</pre>
<p>So we can represent a collection of values simply as a value.  We
write <code class="language-plaintext highlighter-rouge">v âŠ† w</code> to say that all the elements of <code class="language-plaintext highlighter-rouge">v</code> are also in <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="30373" class="Keyword">infix</a> <a id="30379" class="Number">5</a> <a id="30381" href="/Denotational/#30386" class="Function Operator">_âŠ†_</a>

<a id="_âŠ†_"></a><a id="30386" href="/Denotational/#30386" class="Function Operator">_âŠ†_</a> <a id="30390" class="Symbol">:</a> <a id="30392" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="30398" class="Symbol">â†’</a> <a id="30400" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="30406" class="Symbol">â†’</a> <a id="30408" class="PrimitiveType">Set</a>
<a id="30412" href="/Denotational/#30412" class="Bound">v</a> <a id="30414" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="30416" href="plfa.part3.Denotational.html#30416" class="Bound">w</a> <a id="30418" class="Symbol">=</a> <a id="30420" class="Symbol">âˆ€{</a><a id="30422" href="plfa.part3.Denotational.html#30422" class="Bound">u</a><a id="30423" class="Symbol">}</a> <a id="30425" class="Symbol">â†’</a> <a id="30427" href="plfa.part3.Denotational.html#30422" class="Bound">u</a> <a id="30429" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30431" href="plfa.part3.Denotational.html#30412" class="Bound">v</a> <a id="30433" class="Symbol">â†’</a> <a id="30435" href="plfa.part3.Denotational.html#30422" class="Bound">u</a> <a id="30437" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30439" href="plfa.part3.Denotational.html#30416" class="Bound">w</a>
</pre>
<p>The notions of membership and inclusion for values are closely related
to the less-than relation. They are narrower relations in that they
imply the less-than relation but not the other way around.</p>

<pre class="Agda"><a id="âˆˆâ†’âŠ‘"></a><a id="30649" href="/Denotational/#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30653" class="Symbol">:</a> <a id="30655" class="Symbol">âˆ€{</a><a id="30657" href="plfa.part3.Denotational.html#30657" class="Bound">u</a> <a id="30659" href="plfa.part3.Denotational.html#30659" class="Bound">v</a> <a id="30661" class="Symbol">:</a> <a id="30663" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="30668" class="Symbol">}</a>
    <a id="30674" class="Symbol">â†’</a> <a id="30676" href="/Denotational/#30657" class="Bound">u</a> <a id="30678" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="30680" href="plfa.part3.Denotational.html#30659" class="Bound">v</a>
      <a id="30688" class="Comment">-----</a>
    <a id="30698" class="Symbol">â†’</a> <a id="30700" href="/Denotational/#30657" class="Bound">u</a> <a id="30702" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="30704" href="plfa.part3.Denotational.html#30659" class="Bound">v</a>
<a id="30706" href="/Denotational/#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30710" class="Symbol">{</a><a id="30711" class="DottedPattern Symbol">.</a><a id="30712" href="plfa.part3.Denotational.html#4171" class="DottedPattern InductiveConstructor">âŠ¥</a><a id="30713" class="Symbol">}</a> <a id="30715" class="Symbol">{</a><a id="30716" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="30717" class="Symbol">}</a> <a id="30719" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="30724" class="Symbol">=</a> <a id="30726" href="plfa.part3.Denotational.html#4543" class="InductiveConstructor">âŠ‘-bot</a>
<a id="30732" href="/Denotational/#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30736" class="Symbol">{</a><a id="30737" href="plfa.part3.Denotational.html#30737" class="Bound">v</a> <a id="30739" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30741" href="plfa.part3.Denotational.html#30741" class="Bound">w</a><a id="30742" class="Symbol">}</a> <a id="30744" class="Symbol">{</a><a id="30745" href="plfa.part3.Denotational.html#30737" class="Bound">v</a> <a id="30747" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30749" href="plfa.part3.Denotational.html#30741" class="Bound">w</a><a id="30750" class="Symbol">}</a> <a id="30752" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="30757" class="Symbol">=</a> <a id="30759" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a>
<a id="30766" href="/Denotational/#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30770" class="Symbol">{</a><a id="30771" href="plfa.part3.Denotational.html#30771" class="Bound">u</a><a id="30772" class="Symbol">}</a> <a id="30774" class="Symbol">{</a><a id="30775" href="plfa.part3.Denotational.html#30775" class="Bound">v</a> <a id="30777" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="30779" href="plfa.part3.Denotational.html#30779" class="Bound">w</a><a id="30780" class="Symbol">}</a> <a id="30782" class="Symbol">(</a><a id="30783" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="30788" href="plfa.part3.Denotational.html#30788" class="Bound">x</a><a id="30789" class="Symbol">)</a> <a id="30791" class="Symbol">=</a> <a id="30793" href="plfa.part3.Denotational.html#4652" class="InductiveConstructor">âŠ‘-conj-R1</a> <a id="30803" class="Symbol">(</a><a id="30804" href="plfa.part3.Denotational.html#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30808" href="plfa.part3.Denotational.html#30788" class="Bound">x</a><a id="30809" class="Symbol">)</a>
<a id="30811" href="/Denotational/#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30815" class="Symbol">{</a><a id="30816" href="plfa.part3.Denotational.html#30816" class="Bound">u</a><a id="30817" class="Symbol">}</a> <a id="30819" class="Symbol">{</a><a id="30820" href="plfa.part3.Denotational.html#30820" class="Bound">v</a> <a id="30822" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="30824" href="plfa.part3.Denotational.html#30824" class="Bound">w</a><a id="30825" class="Symbol">}</a> <a id="30827" class="Symbol">(</a><a id="30828" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="30833" href="plfa.part3.Denotational.html#30833" class="Bound">y</a><a id="30834" class="Symbol">)</a> <a id="30836" class="Symbol">=</a> <a id="30838" href="plfa.part3.Denotational.html#4725" class="InductiveConstructor">âŠ‘-conj-R2</a> <a id="30848" class="Symbol">(</a><a id="30849" href="plfa.part3.Denotational.html#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="30853" href="plfa.part3.Denotational.html#30833" class="Bound">y</a><a id="30854" class="Symbol">)</a>

<a id="âŠ†â†’âŠ‘"></a><a id="30857" href="/Denotational/#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="30861" class="Symbol">:</a> <a id="30863" class="Symbol">âˆ€{</a><a id="30865" href="plfa.part3.Denotational.html#30865" class="Bound">u</a> <a id="30867" href="plfa.part3.Denotational.html#30867" class="Bound">v</a> <a id="30869" class="Symbol">:</a> <a id="30871" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="30876" class="Symbol">}</a>
    <a id="30882" class="Symbol">â†’</a> <a id="30884" href="/Denotational/#30865" class="Bound">u</a> <a id="30886" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="30888" href="plfa.part3.Denotational.html#30867" class="Bound">v</a>
      <a id="30896" class="Comment">-----</a>
    <a id="30906" class="Symbol">â†’</a> <a id="30908" href="/Denotational/#30865" class="Bound">u</a> <a id="30910" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="30912" href="plfa.part3.Denotational.html#30867" class="Bound">v</a>
<a id="30914" href="/Denotational/#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="30918" class="Symbol">{</a><a id="30919" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="30920" class="Symbol">}</a> <a id="30922" href="plfa.part3.Denotational.html#30922" class="Bound">s</a> <a id="30924" class="Keyword">with</a> <a id="30929" href="plfa.part3.Denotational.html#30922" class="Bound">s</a> <a id="30931" class="Symbol">{</a><a id="30932" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="30933" class="Symbol">}</a> <a id="30935" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="30940" class="Symbol">...</a> <a id="30944" class="Symbol">|</a> <a id="30946" href="/Denotational/#30946" class="Bound">x</a> <a id="30948" class="Symbol">=</a> <a id="30950" href="plfa.part3.Denotational.html#4543" class="InductiveConstructor">âŠ‘-bot</a>
<a id="30956" href="/Denotational/#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="30960" class="Symbol">{</a><a id="30961" href="plfa.part3.Denotational.html#30961" class="Bound">u</a> <a id="30963" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30965" href="plfa.part3.Denotational.html#30965" class="Bound">uâ€²</a><a id="30967" class="Symbol">}</a> <a id="30969" href="plfa.part3.Denotational.html#30969" class="Bound">s</a> <a id="30971" class="Keyword">with</a> <a id="30976" href="plfa.part3.Denotational.html#30969" class="Bound">s</a> <a id="30978" class="Symbol">{</a><a id="30979" href="plfa.part3.Denotational.html#30961" class="Bound">u</a> <a id="30981" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="30983" href="plfa.part3.Denotational.html#30965" class="Bound">uâ€²</a><a id="30985" class="Symbol">}</a> <a id="30987" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="30992" class="Symbol">...</a> <a id="30996" class="Symbol">|</a> <a id="30998" href="/Denotational/#30998" class="Bound">x</a> <a id="31000" class="Symbol">=</a> <a id="31002" href="plfa.part3.Denotational.html#30649" class="Function">âˆˆâ†’âŠ‘</a> <a id="31006" href="plfa.part3.Denotational.html#30998" class="Bound">x</a>
<a id="31008" href="/Denotational/#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="31012" class="Symbol">{</a><a id="31013" href="plfa.part3.Denotational.html#31013" class="Bound">u</a> <a id="31015" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="31017" href="plfa.part3.Denotational.html#31017" class="Bound">uâ€²</a><a id="31019" class="Symbol">}</a> <a id="31021" href="plfa.part3.Denotational.html#31021" class="Bound">s</a> <a id="31023" class="Symbol">=</a> <a id="31025" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="31034" class="Symbol">(</a><a id="31035" href="plfa.part3.Denotational.html#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="31039" class="Symbol">(Î»</a> <a id="31042" href="plfa.part3.Denotational.html#31042" class="Bound">z</a> <a id="31044" class="Symbol">â†’</a> <a id="31046" href="plfa.part3.Denotational.html#31021" class="Bound">s</a> <a id="31048" class="Symbol">(</a><a id="31049" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="31054" href="plfa.part3.Denotational.html#31042" class="Bound">z</a><a id="31055" class="Symbol">)))</a> <a id="31059" class="Symbol">(</a><a id="31060" href="plfa.part3.Denotational.html#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="31064" class="Symbol">(Î»</a> <a id="31067" href="plfa.part3.Denotational.html#31067" class="Bound">z</a> <a id="31069" class="Symbol">â†’</a> <a id="31071" href="plfa.part3.Denotational.html#31021" class="Bound">s</a> <a id="31073" class="Symbol">(</a><a id="31074" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="31079" href="plfa.part3.Denotational.html#31067" class="Bound">z</a><a id="31080" class="Symbol">)))</a>
</pre>
<p>We shall also need some inversion principles for value inclusion.  If
the union of <code class="language-plaintext highlighter-rouge">u</code> and <code class="language-plaintext highlighter-rouge">v</code> is included in <code class="language-plaintext highlighter-rouge">w</code>, then of course both <code class="language-plaintext highlighter-rouge">u</code> and
<code class="language-plaintext highlighter-rouge">v</code> are each included in <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="âŠ”âŠ†-inv"></a><a id="31267" href="/Denotational/#31267" class="Function">âŠ”âŠ†-inv</a> <a id="31274" class="Symbol">:</a> <a id="31276" class="Symbol">âˆ€{</a><a id="31278" href="plfa.part3.Denotational.html#31278" class="Bound">u</a> <a id="31280" href="plfa.part3.Denotational.html#31280" class="Bound">v</a> <a id="31282" href="plfa.part3.Denotational.html#31282" class="Bound">w</a> <a id="31284" class="Symbol">:</a> <a id="31286" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="31291" class="Symbol">}</a>
       <a id="31300" class="Symbol">â†’</a> <a id="31302" class="Symbol">(</a><a id="31303" href="/Denotational/#31278" class="Bound">u</a> <a id="31305" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="31307" href="plfa.part3.Denotational.html#31280" class="Bound">v</a><a id="31308" class="Symbol">)</a> <a id="31310" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="31312" href="plfa.part3.Denotational.html#31282" class="Bound">w</a>
         <a id="31323" class="Comment">---------------</a>
       <a id="31346" class="Symbol">â†’</a> <a id="31348" href="/Denotational/#31278" class="Bound">u</a> <a id="31350" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="31352" href="plfa.part3.Denotational.html#31282" class="Bound">w</a>  <a id="31355" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a>  <a id="31358" href="plfa.part3.Denotational.html#31280" class="Bound">v</a> <a id="31360" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="31362" href="plfa.part3.Denotational.html#31282" class="Bound">w</a>
<a id="31364" href="/Denotational/#31267" class="Function">âŠ”âŠ†-inv</a> <a id="31371" href="plfa.part3.Denotational.html#31371" class="Bound">uvw</a> <a id="31375" class="Symbol">=</a> <a id="31377" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="31379" class="Symbol">(Î»</a> <a id="31382" href="plfa.part3.Denotational.html#31382" class="Bound">x</a> <a id="31384" class="Symbol">â†’</a> <a id="31386" href="plfa.part3.Denotational.html#31371" class="Bound">uvw</a> <a id="31390" class="Symbol">(</a><a id="31391" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="31396" href="plfa.part3.Denotational.html#31382" class="Bound">x</a><a id="31397" class="Symbol">))</a> <a id="31400" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="31402" class="Symbol">(Î»</a> <a id="31405" href="plfa.part3.Denotational.html#31405" class="Bound">x</a> <a id="31407" class="Symbol">â†’</a> <a id="31409" href="plfa.part3.Denotational.html#31371" class="Bound">uvw</a> <a id="31413" class="Symbol">(</a><a id="31414" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="31419" href="plfa.part3.Denotational.html#31405" class="Bound">x</a><a id="31420" class="Symbol">))</a> <a id="31423" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
</pre>
<p>In our value representation, the function value <code class="language-plaintext highlighter-rouge">v â†¦ w</code> is both an
element and also a singleton set. So if <code class="language-plaintext highlighter-rouge">v â†¦ w</code> is a subset of <code class="language-plaintext highlighter-rouge">u</code>,
then <code class="language-plaintext highlighter-rouge">v â†¦ w</code> must be a member of <code class="language-plaintext highlighter-rouge">u</code>.</p>

<pre class="Agda"><a id="â†¦âŠ†â†’âˆˆ"></a><a id="31608" href="/Denotational/#31608" class="Function">â†¦âŠ†â†’âˆˆ</a> <a id="31613" class="Symbol">:</a> <a id="31615" class="Symbol">âˆ€{</a><a id="31617" href="plfa.part3.Denotational.html#31617" class="Bound">v</a> <a id="31619" href="plfa.part3.Denotational.html#31619" class="Bound">w</a> <a id="31621" href="plfa.part3.Denotational.html#31621" class="Bound">u</a> <a id="31623" class="Symbol">:</a> <a id="31625" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="31630" class="Symbol">}</a>
     <a id="31637" class="Symbol">â†’</a> <a id="31639" href="/Denotational/#31617" class="Bound">v</a> <a id="31641" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="31643" href="plfa.part3.Denotational.html#31619" class="Bound">w</a> <a id="31645" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="31647" href="plfa.part3.Denotational.html#31621" class="Bound">u</a>
       <a id="31656" class="Comment">---------</a>
     <a id="31671" class="Symbol">â†’</a> <a id="31673" href="/Denotational/#31617" class="Bound">v</a> <a id="31675" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="31677" href="plfa.part3.Denotational.html#31619" class="Bound">w</a> <a id="31679" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="31681" href="plfa.part3.Denotational.html#31621" class="Bound">u</a>
<a id="31683" href="/Denotational/#31608" class="Function">â†¦âŠ†â†’âˆˆ</a> <a id="31688" href="plfa.part3.Denotational.html#31688" class="Bound">incl</a> <a id="31693" class="Symbol">=</a> <a id="31695" href="plfa.part3.Denotational.html#31688" class="Bound">incl</a> <a id="31700" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre>

<h3 id="function-values">Function values</h3>

<p>To identify collections of functions, we define the following two
predicates. We write <code class="language-plaintext highlighter-rouge">Fun u</code> if <code class="language-plaintext highlighter-rouge">u</code> is a function value, that is, if
<code class="language-plaintext highlighter-rouge">u â‰¡ v â†¦ w</code> for some values <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code>. We write <code class="language-plaintext highlighter-rouge">all-funs v</code> if all the elements
of <code class="language-plaintext highlighter-rouge">v</code> are functions.</p>

<pre class="Agda"><a id="31977" class="Keyword">data</a> <a id="Fun"></a><a id="31982" href="/Denotational/#31982" class="Datatype">Fun</a> <a id="31986" class="Symbol">:</a> <a id="31988" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="31994" class="Symbol">â†’</a> <a id="31996" class="PrimitiveType">Set</a> <a id="32000" class="Keyword">where</a>
  <a id="Fun.fun"></a><a id="32008" href="/Denotational/#32008" class="InductiveConstructor">fun</a> <a id="32012" class="Symbol">:</a> <a id="32014" class="Symbol">âˆ€{</a><a id="32016" href="plfa.part3.Denotational.html#32016" class="Bound">u</a> <a id="32018" href="plfa.part3.Denotational.html#32018" class="Bound">v</a> <a id="32020" href="plfa.part3.Denotational.html#32020" class="Bound">w</a><a id="32021" class="Symbol">}</a> <a id="32023" class="Symbol">â†’</a> <a id="32025" href="plfa.part3.Denotational.html#32016" class="Bound">u</a> <a id="32027" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="32029" class="Symbol">(</a><a id="32030" href="plfa.part3.Denotational.html#32018" class="Bound">v</a> <a id="32032" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="32034" href="plfa.part3.Denotational.html#32020" class="Bound">w</a><a id="32035" class="Symbol">)</a> <a id="32037" class="Symbol">â†’</a> <a id="32039" href="plfa.part3.Denotational.html#31982" class="Datatype">Fun</a> <a id="32043" href="plfa.part3.Denotational.html#32016" class="Bound">u</a>

<a id="all-funs"></a><a id="32046" href="/Denotational/#32046" class="Function">all-funs</a> <a id="32055" class="Symbol">:</a> <a id="32057" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="32063" class="Symbol">â†’</a> <a id="32065" class="PrimitiveType">Set</a>
<a id="32069" href="/Denotational/#32046" class="Function">all-funs</a> <a id="32078" href="plfa.part3.Denotational.html#32078" class="Bound">v</a> <a id="32080" class="Symbol">=</a> <a id="32082" class="Symbol">âˆ€{</a><a id="32084" href="plfa.part3.Denotational.html#32084" class="Bound">u</a><a id="32085" class="Symbol">}</a> <a id="32087" class="Symbol">â†’</a> <a id="32089" href="plfa.part3.Denotational.html#32084" class="Bound">u</a> <a id="32091" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="32093" href="plfa.part3.Denotational.html#32078" class="Bound">v</a> <a id="32095" class="Symbol">â†’</a> <a id="32097" href="plfa.part3.Denotational.html#31982" class="Datatype">Fun</a> <a id="32101" href="plfa.part3.Denotational.html#32084" class="Bound">u</a>
</pre>
<p>The value <code class="language-plaintext highlighter-rouge">âŠ¥</code> is not a function.</p>

<pre class="Agda"><a id="Â¬FunâŠ¥"></a><a id="32146" href="/Denotational/#32146" class="Function">Â¬FunâŠ¥</a> <a id="32152" class="Symbol">:</a> <a id="32154" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">Â¬</a> <a id="32156" class="Symbol">(</a><a id="32157" href="plfa.part3.Denotational.html#31982" class="Datatype">Fun</a> <a id="32161" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="32162" class="Symbol">)</a>
<a id="32164" href="/Denotational/#32146" class="Function">Â¬FunâŠ¥</a> <a id="32170" class="Symbol">(</a><a id="32171" href="plfa.part3.Denotational.html#32008" class="InductiveConstructor">fun</a> <a id="32175" class="Symbol">())</a>
</pre>
<p>In our values-as-sets representation, our sets always include at least
one element. Thus, if all the elements are functions, there is at
least one that is a function.</p>

<pre class="Agda"><a id="all-funsâˆˆ"></a><a id="32356" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="32366" class="Symbol">:</a> <a id="32368" class="Symbol">âˆ€{</a><a id="32370" href="plfa.part3.Denotational.html#32370" class="Bound">u</a><a id="32371" class="Symbol">}</a>
      <a id="32379" class="Symbol">â†’</a> <a id="32381" href="/Denotational/#32046" class="Function">all-funs</a> <a id="32390" href="plfa.part3.Denotational.html#32370" class="Bound">u</a>
      <a id="32398" class="Symbol">â†’</a> <a id="32400" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="32403" href="/Denotational/#32403" class="Bound">v</a> <a id="32405" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="32407" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="32413" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="32415" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="32418" href="plfa.part3.Denotational.html#32418" class="Bound">w</a> <a id="32420" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="32422" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="32428" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="32430" href="plfa.part3.Denotational.html#32403" class="Bound">v</a> <a id="32432" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="32434" href="plfa.part3.Denotational.html#32418" class="Bound">w</a> <a id="32436" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="32438" href="plfa.part3.Denotational.html#32370" class="Bound">u</a>
<a id="32440" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="32450" class="Symbol">{</a><a id="32451" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="32452" class="Symbol">}</a> <a id="32454" href="plfa.part3.Denotational.html#32454" class="Bound">f</a> <a id="32456" class="Keyword">with</a> <a id="32461" href="plfa.part3.Denotational.html#32454" class="Bound">f</a> <a id="32463" class="Symbol">{</a><a id="32464" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="32465" class="Symbol">}</a> <a id="32467" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="32472" class="Symbol">...</a> <a id="32476" class="Symbol">|</a> <a id="32478" href="/Denotational/#32008" class="InductiveConstructor">fun</a> <a id="32482" class="Symbol">()</a>
<a id="32485" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="32495" class="Symbol">{</a><a id="32496" href="plfa.part3.Denotational.html#32496" class="Bound">v</a> <a id="32498" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="32500" href="plfa.part3.Denotational.html#32500" class="Bound">w</a><a id="32501" class="Symbol">}</a> <a id="32503" href="plfa.part3.Denotational.html#32503" class="Bound">f</a> <a id="32505" class="Symbol">=</a> <a id="32507" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32509" href="plfa.part3.Denotational.html#32496" class="Bound">v</a> <a id="32511" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32513" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32515" href="plfa.part3.Denotational.html#32500" class="Bound">w</a> <a id="32517" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32519" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="32524" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="32526" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
<a id="32528" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="32538" class="Symbol">{</a><a id="32539" href="plfa.part3.Denotational.html#32539" class="Bound">u</a> <a id="32541" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="32543" href="plfa.part3.Denotational.html#32543" class="Bound">uâ€²</a><a id="32545" class="Symbol">}</a> <a id="32547" href="plfa.part3.Denotational.html#32547" class="Bound">f</a>
    <a id="32553" class="Keyword">with</a> <a id="32558" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="32568" class="Symbol">Î»</a> <a id="32570" href="plfa.part3.Denotational.html#32570" class="Bound">z</a> <a id="32572" class="Symbol">â†’</a> <a id="32574" href="plfa.part3.Denotational.html#32547" class="Bound">f</a> <a id="32576" class="Symbol">(</a><a id="32577" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="32582" href="plfa.part3.Denotational.html#32570" class="Bound">z</a><a id="32583" class="Symbol">)</a>
<a id="32585" class="Symbol">...</a> <a id="32589" class="Symbol">|</a> <a id="32591" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32593" href="/Denotational/#32593" class="Bound">v</a> <a id="32595" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32597" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32599" href="plfa.part3.Denotational.html#32599" class="Bound">w</a> <a id="32601" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32603" href="plfa.part3.Denotational.html#32603" class="Bound">m</a> <a id="32605" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="32607" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="32609" class="Symbol">=</a> <a id="32611" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32613" href="plfa.part3.Denotational.html#32593" class="Bound">v</a> <a id="32615" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32617" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="32619" href="plfa.part3.Denotational.html#32599" class="Bound">w</a> <a id="32621" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="32623" class="Symbol">(</a><a id="32624" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="32629" href="plfa.part3.Denotational.html#32603" class="Bound">m</a><a id="32630" class="Symbol">)</a> <a id="32632" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="32634" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
</pre>

<h3 id="domains-and-codomains">Domains and codomains</h3>

<p>Returning to our goal, the inversion principle for less-than a
function, we want to show that <code class="language-plaintext highlighter-rouge">v â†¦ w âŠ‘ u</code> implies that <code class="language-plaintext highlighter-rouge">u</code> includes
a set of function values such that the join of their domains is less
than <code class="language-plaintext highlighter-rouge">v</code> and the join of their codomains is greater than <code class="language-plaintext highlighter-rouge">w</code>.</p>

<p>To this end we define the following <code class="language-plaintext highlighter-rouge">â¨†dom</code> and <code class="language-plaintext highlighter-rouge">â¨†cod</code> functions.  Given some
value <code class="language-plaintext highlighter-rouge">u</code> (that represents a set of entries), <code class="language-plaintext highlighter-rouge">â¨†dom u</code> returns the join of
their domains and <code class="language-plaintext highlighter-rouge">â¨†cod u</code> returns the join of their codomains.</p>

<pre class="Agda"><a id="â¨†dom"></a><a id="33154" href="/Denotational/#33154" class="Function">â¨†dom</a> <a id="33159" class="Symbol">:</a> <a id="33161" class="Symbol">(</a><a id="33162" href="plfa.part3.Denotational.html#33162" class="Bound">u</a> <a id="33164" class="Symbol">:</a> <a id="33166" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="33171" class="Symbol">)</a> <a id="33173" class="Symbol">â†’</a> <a id="33175" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="33181" href="/Denotational/#33154" class="Function">â¨†dom</a> <a id="33186" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>  <a id="33189" class="Symbol">=</a> <a id="33191" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="33193" href="/Denotational/#33154" class="Function">â¨†dom</a> <a id="33198" class="Symbol">(</a><a id="33199" href="plfa.part3.Denotational.html#33199" class="Bound">v</a> <a id="33201" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="33203" href="plfa.part3.Denotational.html#33203" class="Bound">w</a><a id="33204" class="Symbol">)</a> <a id="33206" class="Symbol">=</a> <a id="33208" href="plfa.part3.Denotational.html#33199" class="Bound">v</a>
<a id="33210" href="/Denotational/#33154" class="Function">â¨†dom</a> <a id="33215" class="Symbol">(</a><a id="33216" href="plfa.part3.Denotational.html#33216" class="Bound">u</a> <a id="33218" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33220" href="plfa.part3.Denotational.html#33220" class="Bound">uâ€²</a><a id="33222" class="Symbol">)</a> <a id="33224" class="Symbol">=</a> <a id="33226" href="plfa.part3.Denotational.html#33154" class="Function">â¨†dom</a> <a id="33231" href="plfa.part3.Denotational.html#33216" class="Bound">u</a> <a id="33233" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33235" href="plfa.part3.Denotational.html#33154" class="Function">â¨†dom</a> <a id="33240" href="plfa.part3.Denotational.html#33220" class="Bound">uâ€²</a>

<a id="â¨†cod"></a><a id="33244" href="/Denotational/#33244" class="Function">â¨†cod</a> <a id="33249" class="Symbol">:</a> <a id="33251" class="Symbol">(</a><a id="33252" href="plfa.part3.Denotational.html#33252" class="Bound">u</a> <a id="33254" class="Symbol">:</a> <a id="33256" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="33261" class="Symbol">)</a> <a id="33263" class="Symbol">â†’</a> <a id="33265" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a>
<a id="33271" href="/Denotational/#33244" class="Function">â¨†cod</a> <a id="33276" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>  <a id="33279" class="Symbol">=</a> <a id="33281" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a>
<a id="33283" href="/Denotational/#33244" class="Function">â¨†cod</a> <a id="33288" class="Symbol">(</a><a id="33289" href="plfa.part3.Denotational.html#33289" class="Bound">v</a> <a id="33291" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="33293" href="plfa.part3.Denotational.html#33293" class="Bound">w</a><a id="33294" class="Symbol">)</a> <a id="33296" class="Symbol">=</a> <a id="33298" href="plfa.part3.Denotational.html#33293" class="Bound">w</a>
<a id="33300" href="/Denotational/#33244" class="Function">â¨†cod</a> <a id="33305" class="Symbol">(</a><a id="33306" href="plfa.part3.Denotational.html#33306" class="Bound">u</a> <a id="33308" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33310" href="plfa.part3.Denotational.html#33310" class="Bound">uâ€²</a><a id="33312" class="Symbol">)</a> <a id="33314" class="Symbol">=</a> <a id="33316" href="plfa.part3.Denotational.html#33244" class="Function">â¨†cod</a> <a id="33321" href="plfa.part3.Denotational.html#33306" class="Bound">u</a> <a id="33323" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33325" href="plfa.part3.Denotational.html#33244" class="Function">â¨†cod</a> <a id="33330" href="plfa.part3.Denotational.html#33310" class="Bound">uâ€²</a>
</pre>
<p>We need just one property each for <code class="language-plaintext highlighter-rouge">â¨†dom</code> and <code class="language-plaintext highlighter-rouge">â¨†cod</code>.  Given a collection of
functions represented by value <code class="language-plaintext highlighter-rouge">u</code>, and an entry <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ u</code>, we know
that <code class="language-plaintext highlighter-rouge">v</code> is included in the domain of <code class="language-plaintext highlighter-rouge">v</code>.</p>

<pre class="Agda"><a id="â†¦âˆˆâ†’âŠ†â¨†dom"></a><a id="33533" href="/Denotational/#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33542" class="Symbol">:</a> <a id="33544" class="Symbol">âˆ€{</a><a id="33546" href="plfa.part3.Denotational.html#33546" class="Bound">u</a> <a id="33548" href="plfa.part3.Denotational.html#33548" class="Bound">v</a> <a id="33550" href="plfa.part3.Denotational.html#33550" class="Bound">w</a> <a id="33552" class="Symbol">:</a> <a id="33554" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="33559" class="Symbol">}</a>
          <a id="33571" class="Symbol">â†’</a> <a id="33573" href="/Denotational/#32046" class="Function">all-funs</a> <a id="33582" href="plfa.part3.Denotational.html#33546" class="Bound">u</a>  <a id="33585" class="Symbol">â†’</a>  <a id="33588" class="Symbol">(</a><a id="33589" href="plfa.part3.Denotational.html#33548" class="Bound">v</a> <a id="33591" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="33593" href="plfa.part3.Denotational.html#33550" class="Bound">w</a><a id="33594" class="Symbol">)</a> <a id="33596" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="33598" href="plfa.part3.Denotational.html#33546" class="Bound">u</a>
            <a id="33612" class="Comment">----------------------</a>
          <a id="33645" class="Symbol">â†’</a> <a id="33647" href="/Denotational/#33548" class="Bound">v</a> <a id="33649" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="33651" href="plfa.part3.Denotational.html#33154" class="Function">â¨†dom</a> <a id="33656" href="plfa.part3.Denotational.html#33546" class="Bound">u</a>
<a id="33658" href="/Denotational/#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33667" class="Symbol">{</a><a id="33668" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="33669" class="Symbol">}</a> <a id="33671" href="plfa.part3.Denotational.html#33671" class="Bound">fg</a> <a id="33674" class="Symbol">()</a> <a id="33677" href="plfa.part3.Denotational.html#33677" class="Bound">uâˆˆv</a>
<a id="33681" href="/Denotational/#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33690" class="Symbol">{</a><a id="33691" href="plfa.part3.Denotational.html#33691" class="Bound">v</a> <a id="33693" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="33695" href="plfa.part3.Denotational.html#33695" class="Bound">w</a><a id="33696" class="Symbol">}</a> <a id="33698" href="plfa.part3.Denotational.html#33698" class="Bound">fg</a> <a id="33701" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="33706" href="plfa.part3.Denotational.html#33706" class="Bound">uâˆˆv</a> <a id="33710" class="Symbol">=</a> <a id="33712" href="plfa.part3.Denotational.html#33706" class="Bound">uâˆˆv</a>
<a id="33716" href="/Denotational/#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33725" class="Symbol">{</a><a id="33726" href="plfa.part3.Denotational.html#33726" class="Bound">u</a> <a id="33728" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33730" href="plfa.part3.Denotational.html#33730" class="Bound">uâ€²</a><a id="33732" class="Symbol">}</a> <a id="33734" href="plfa.part3.Denotational.html#33734" class="Bound">fg</a> <a id="33737" class="Symbol">(</a><a id="33738" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="33743" href="plfa.part3.Denotational.html#33743" class="Bound">vâ†¦wâˆˆu</a><a id="33748" class="Symbol">)</a> <a id="33750" href="plfa.part3.Denotational.html#33750" class="Bound">uâˆˆv</a> <a id="33754" class="Symbol">=</a>
   <a id="33759" class="Keyword">let</a> <a id="33763" href="/Denotational/#33763" class="Bound">ih</a> <a id="33766" class="Symbol">=</a> <a id="33768" href="plfa.part3.Denotational.html#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33777" class="Symbol">(Î»</a> <a id="33780" href="plfa.part3.Denotational.html#33780" class="Bound">z</a> <a id="33782" class="Symbol">â†’</a> <a id="33784" href="plfa.part3.Denotational.html#33734" class="Bound">fg</a> <a id="33787" class="Symbol">(</a><a id="33788" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="33793" href="plfa.part3.Denotational.html#33780" class="Bound">z</a><a id="33794" class="Symbol">))</a> <a id="33797" href="plfa.part3.Denotational.html#33743" class="Bound">vâ†¦wâˆˆu</a> <a id="33803" class="Keyword">in</a>
   <a id="33809" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="33814" class="Symbol">(</a><a id="33815" href="/Denotational/#33763" class="Bound">ih</a> <a id="33818" href="plfa.part3.Denotational.html#33750" class="Bound">uâˆˆv</a><a id="33821" class="Symbol">)</a>
<a id="33823" href="/Denotational/#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33832" class="Symbol">{</a><a id="33833" href="plfa.part3.Denotational.html#33833" class="Bound">u</a> <a id="33835" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="33837" href="plfa.part3.Denotational.html#33837" class="Bound">uâ€²</a><a id="33839" class="Symbol">}</a> <a id="33841" href="plfa.part3.Denotational.html#33841" class="Bound">fg</a> <a id="33844" class="Symbol">(</a><a id="33845" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="33850" href="plfa.part3.Denotational.html#33850" class="Bound">vâ†¦wâˆˆuâ€²</a><a id="33856" class="Symbol">)</a> <a id="33858" href="plfa.part3.Denotational.html#33858" class="Bound">uâˆˆv</a> <a id="33862" class="Symbol">=</a>
   <a id="33867" class="Keyword">let</a> <a id="33871" href="/Denotational/#33871" class="Bound">ih</a> <a id="33874" class="Symbol">=</a> <a id="33876" href="plfa.part3.Denotational.html#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="33885" class="Symbol">(Î»</a> <a id="33888" href="plfa.part3.Denotational.html#33888" class="Bound">z</a> <a id="33890" class="Symbol">â†’</a> <a id="33892" href="plfa.part3.Denotational.html#33841" class="Bound">fg</a> <a id="33895" class="Symbol">(</a><a id="33896" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="33901" href="plfa.part3.Denotational.html#33888" class="Bound">z</a><a id="33902" class="Symbol">))</a> <a id="33905" href="plfa.part3.Denotational.html#33850" class="Bound">vâ†¦wâˆˆuâ€²</a> <a id="33912" class="Keyword">in</a>
   <a id="33918" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="33923" class="Symbol">(</a><a id="33924" href="/Denotational/#33871" class="Bound">ih</a> <a id="33927" href="plfa.part3.Denotational.html#33858" class="Bound">uâˆˆv</a><a id="33930" class="Symbol">)</a>
</pre>
<p>Regarding <code class="language-plaintext highlighter-rouge">â¨†cod</code>, suppose we have a collection of functions represented
by <code class="language-plaintext highlighter-rouge">u</code>, but all of them are just copies of <code class="language-plaintext highlighter-rouge">v â†¦ w</code>.  Then the <code class="language-plaintext highlighter-rouge">â¨†cod u</code> is
included in <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="âŠ†â†¦â†’â¨†codâŠ†"></a><a id="34105" href="/Denotational/#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34114" class="Symbol">:</a> <a id="34116" class="Symbol">âˆ€{</a><a id="34118" href="plfa.part3.Denotational.html#34118" class="Bound">u</a> <a id="34120" href="plfa.part3.Denotational.html#34120" class="Bound">v</a> <a id="34122" href="plfa.part3.Denotational.html#34122" class="Bound">w</a> <a id="34124" class="Symbol">:</a> <a id="34126" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="34131" class="Symbol">}</a>
        <a id="34141" class="Symbol">â†’</a> <a id="34143" href="/Denotational/#34118" class="Bound">u</a> <a id="34145" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="34147" href="plfa.part3.Denotational.html#34120" class="Bound">v</a> <a id="34149" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="34151" href="plfa.part3.Denotational.html#34122" class="Bound">w</a>
          <a id="34163" class="Comment">---------</a>
        <a id="34181" class="Symbol">â†’</a> <a id="34183" href="/Denotational/#33244" class="Function">â¨†cod</a> <a id="34188" href="plfa.part3.Denotational.html#34118" class="Bound">u</a> <a id="34190" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="34192" href="plfa.part3.Denotational.html#34122" class="Bound">w</a>
<a id="34194" href="/Denotational/#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34203" class="Symbol">{</a><a id="34204" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="34205" class="Symbol">}</a> <a id="34207" href="plfa.part3.Denotational.html#34207" class="Bound">s</a> <a id="34209" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="34214" class="Keyword">with</a> <a id="34219" href="plfa.part3.Denotational.html#34207" class="Bound">s</a> <a id="34221" class="Symbol">{</a><a id="34222" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="34223" class="Symbol">}</a> <a id="34225" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="34230" class="Symbol">...</a> <a id="34234" class="Symbol">|</a> <a id="34236" class="Symbol">()</a>
<a id="34239" href="/Denotational/#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34248" class="Symbol">{</a><a id="34249" href="plfa.part3.Denotational.html#34249" class="Bound">C</a> <a id="34251" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="34253" href="plfa.part3.Denotational.html#34253" class="Bound">Câ€²</a><a id="34255" class="Symbol">}</a> <a id="34257" href="plfa.part3.Denotational.html#34257" class="Bound">s</a> <a id="34259" href="plfa.part3.Denotational.html#34259" class="Bound">m</a> <a id="34261" class="Keyword">with</a> <a id="34266" href="plfa.part3.Denotational.html#34257" class="Bound">s</a> <a id="34268" class="Symbol">{</a><a id="34269" href="plfa.part3.Denotational.html#34249" class="Bound">C</a> <a id="34271" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="34273" href="plfa.part3.Denotational.html#34253" class="Bound">Câ€²</a><a id="34275" class="Symbol">}</a> <a id="34277" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="34282" class="Symbol">...</a> <a id="34286" class="Symbol">|</a> <a id="34288" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="34293" class="Symbol">=</a> <a id="34295" class="Bound">m</a>
<a id="34297" href="/Denotational/#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34306" class="Symbol">{</a><a id="34307" href="plfa.part3.Denotational.html#34307" class="Bound">u</a> <a id="34309" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="34311" href="plfa.part3.Denotational.html#34311" class="Bound">uâ€²</a><a id="34313" class="Symbol">}</a> <a id="34315" href="plfa.part3.Denotational.html#34315" class="Bound">s</a> <a id="34317" class="Symbol">(</a><a id="34318" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="34323" href="plfa.part3.Denotational.html#34323" class="Bound">x</a><a id="34324" class="Symbol">)</a> <a id="34326" class="Symbol">=</a> <a id="34328" href="plfa.part3.Denotational.html#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34337" class="Symbol">(Î»</a> <a id="34340" class="Symbol">{</a><a id="34341" href="plfa.part3.Denotational.html#34341" class="Bound">C</a><a id="34342" class="Symbol">}</a> <a id="34344" href="plfa.part3.Denotational.html#34344" class="Bound">z</a> <a id="34346" class="Symbol">â†’</a> <a id="34348" href="plfa.part3.Denotational.html#34315" class="Bound">s</a> <a id="34350" class="Symbol">(</a><a id="34351" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="34356" href="plfa.part3.Denotational.html#34344" class="Bound">z</a><a id="34357" class="Symbol">))</a> <a id="34360" href="plfa.part3.Denotational.html#34323" class="Bound">x</a>
<a id="34362" href="/Denotational/#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34371" class="Symbol">{</a><a id="34372" href="plfa.part3.Denotational.html#34372" class="Bound">u</a> <a id="34374" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="34376" href="plfa.part3.Denotational.html#34376" class="Bound">uâ€²</a><a id="34378" class="Symbol">}</a> <a id="34380" href="plfa.part3.Denotational.html#34380" class="Bound">s</a> <a id="34382" class="Symbol">(</a><a id="34383" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="34388" href="plfa.part3.Denotational.html#34388" class="Bound">y</a><a id="34389" class="Symbol">)</a> <a id="34391" class="Symbol">=</a> <a id="34393" href="plfa.part3.Denotational.html#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="34402" class="Symbol">(Î»</a> <a id="34405" class="Symbol">{</a><a id="34406" href="plfa.part3.Denotational.html#34406" class="Bound">C</a><a id="34407" class="Symbol">}</a> <a id="34409" href="plfa.part3.Denotational.html#34409" class="Bound">z</a> <a id="34411" class="Symbol">â†’</a> <a id="34413" href="plfa.part3.Denotational.html#34380" class="Bound">s</a> <a id="34415" class="Symbol">(</a><a id="34416" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="34421" href="plfa.part3.Denotational.html#34409" class="Bound">z</a><a id="34422" class="Symbol">))</a> <a id="34425" href="plfa.part3.Denotational.html#34388" class="Bound">y</a>
</pre>
<p>With the <code class="language-plaintext highlighter-rouge">â¨†dom</code> and <code class="language-plaintext highlighter-rouge">â¨†cod</code> functions in hand, we can make precise the
conclusion of the inversion principle for functions, which we package
into the following predicate named <code class="language-plaintext highlighter-rouge">factor</code>. We say that <code class="language-plaintext highlighter-rouge">v â†¦ w</code>
<em>factors</em> <code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ€²</code> if <code class="language-plaintext highlighter-rouge">uâ€²</code> is a included in <code class="language-plaintext highlighter-rouge">u</code>, if <code class="language-plaintext highlighter-rouge">uâ€²</code> contains only
functions, its domain is less than <code class="language-plaintext highlighter-rouge">v</code>, and its codomain is greater
than <code class="language-plaintext highlighter-rouge">w</code>.</p>

<pre class="Agda"><a id="factor"></a><a id="34796" href="/Denotational/#34796" class="Function">factor</a> <a id="34803" class="Symbol">:</a> <a id="34805" class="Symbol">(</a><a id="34806" href="plfa.part3.Denotational.html#34806" class="Bound">u</a> <a id="34808" class="Symbol">:</a> <a id="34810" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="34815" class="Symbol">)</a> <a id="34817" class="Symbol">â†’</a> <a id="34819" class="Symbol">(</a><a id="34820" href="plfa.part3.Denotational.html#34820" class="Bound">uâ€²</a> <a id="34823" class="Symbol">:</a> <a id="34825" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="34830" class="Symbol">)</a> <a id="34832" class="Symbol">â†’</a> <a id="34834" class="Symbol">(</a><a id="34835" href="plfa.part3.Denotational.html#34835" class="Bound">v</a> <a id="34837" class="Symbol">:</a> <a id="34839" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="34844" class="Symbol">)</a> <a id="34846" class="Symbol">â†’</a> <a id="34848" class="Symbol">(</a><a id="34849" href="plfa.part3.Denotational.html#34849" class="Bound">w</a> <a id="34851" class="Symbol">:</a> <a id="34853" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="34858" class="Symbol">)</a> <a id="34860" class="Symbol">â†’</a> <a id="34862" class="PrimitiveType">Set</a>
<a id="34866" href="/Denotational/#34796" class="Function">factor</a> <a id="34873" href="plfa.part3.Denotational.html#34873" class="Bound">u</a> <a id="34875" href="plfa.part3.Denotational.html#34875" class="Bound">uâ€²</a> <a id="34878" href="plfa.part3.Denotational.html#34878" class="Bound">v</a> <a id="34880" href="plfa.part3.Denotational.html#34880" class="Bound">w</a> <a id="34882" class="Symbol">=</a> <a id="34884" href="plfa.part3.Denotational.html#32046" class="Function">all-funs</a> <a id="34893" href="plfa.part3.Denotational.html#34875" class="Bound">uâ€²</a>  <a id="34897" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a>  <a id="34900" href="plfa.part3.Denotational.html#34875" class="Bound">uâ€²</a> <a id="34903" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="34905" href="plfa.part3.Denotational.html#34873" class="Bound">u</a>  <a id="34908" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a>  <a id="34911" href="plfa.part3.Denotational.html#33154" class="Function">â¨†dom</a> <a id="34916" href="plfa.part3.Denotational.html#34875" class="Bound">uâ€²</a> <a id="34919" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="34921" href="plfa.part3.Denotational.html#34878" class="Bound">v</a>  <a id="34924" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a>  <a id="34927" href="plfa.part3.Denotational.html#34880" class="Bound">w</a> <a id="34929" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="34931" href="plfa.part3.Denotational.html#33244" class="Function">â¨†cod</a> <a id="34936" href="plfa.part3.Denotational.html#34875" class="Bound">uâ€²</a>
</pre>
<p>So the inversion principle for functions can be stated as</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  v â†¦ w âŠ‘ u
  ---------------
â†’ factor u uâ€² v w
</code></pre></div></div>

<p>We prove the inversion principle for functions by induction on the
derivation of the less-than relation. To make the induction hypothesis
stronger, we broaden the premise <code class="language-plaintext highlighter-rouge">v â†¦ w âŠ‘ u</code> to <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ uâ‚‚</code>, and
strengthen the conclusion to say that for <em>every</em> function value
<code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚</code>, we have that <code class="language-plaintext highlighter-rouge">v â†¦ w</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into some value <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â†’ uâ‚ âŠ‘ uâ‚‚
  ------------------------------------------------------
â†’ âˆ€{v w} â†’ v â†¦ w âˆˆ uâ‚ â†’ Î£[ uâ‚ƒ âˆˆ Value ] factor uâ‚‚ uâ‚ƒ v w
</code></pre></div></div>

<h3 id="inversion-of-less-than-for-functions-the-case-for--trans">Inversion of less-than for functions, the case for âŠ‘-trans</h3>

<p>The crux of the proof is the case for <code class="language-plaintext highlighter-rouge">âŠ‘-trans</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uâ‚ âŠ‘ u   u âŠ‘ uâ‚‚
--------------- (âŠ‘-trans)
    uâ‚ âŠ‘ uâ‚‚
</code></pre></div></div>

<p>By the induction hypothesis for <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ u</code>, we know
that <code class="language-plaintext highlighter-rouge">v â†¦ w factors u into uâ€²</code>, for some value <code class="language-plaintext highlighter-rouge">uâ€²</code>,
so we have <code class="language-plaintext highlighter-rouge">all-funs uâ€²</code> and <code class="language-plaintext highlighter-rouge">uâ€² âŠ† u</code>.
By the induction hypothesis for <code class="language-plaintext highlighter-rouge">u âŠ‘ uâ‚‚</code>, we know
that for any <code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€² âˆˆ u</code>, <code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€²</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code>.
With these facts in hand, we proceed by induction on <code class="language-plaintext highlighter-rouge">uâ€²</code>
to prove that <code class="language-plaintext highlighter-rouge">(â¨†dom uâ€²) â†¦ (â¨†cod uâ€²)</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code>.
We discuss each case of the proof in the text below.</p>

<pre class="Agda"><a id="sub-inv-trans"></a><a id="36152" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36166" class="Symbol">:</a> <a id="36168" class="Symbol">âˆ€{</a><a id="36170" href="plfa.part3.Denotational.html#36170" class="Bound">uâ€²</a> <a id="36173" href="plfa.part3.Denotational.html#36173" class="Bound">uâ‚‚</a> <a id="36176" href="plfa.part3.Denotational.html#36176" class="Bound">u</a> <a id="36178" class="Symbol">:</a> <a id="36180" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="36185" class="Symbol">}</a>
    <a id="36191" class="Symbol">â†’</a> <a id="36193" href="/Denotational/#32046" class="Function">all-funs</a> <a id="36202" href="plfa.part3.Denotational.html#36170" class="Bound">uâ€²</a>  <a id="36206" class="Symbol">â†’</a>  <a id="36209" href="plfa.part3.Denotational.html#36170" class="Bound">uâ€²</a> <a id="36212" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="36214" href="plfa.part3.Denotational.html#36176" class="Bound">u</a>
    <a id="36220" class="Symbol">â†’</a> <a id="36222" class="Symbol">(âˆ€{</a><a id="36225" href="/Denotational/#36225" class="Bound">vâ€²</a> <a id="36228" href="plfa.part3.Denotational.html#36228" class="Bound">wâ€²</a><a id="36230" class="Symbol">}</a> <a id="36232" class="Symbol">â†’</a> <a id="36234" href="plfa.part3.Denotational.html#36225" class="Bound">vâ€²</a> <a id="36237" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="36239" href="plfa.part3.Denotational.html#36228" class="Bound">wâ€²</a> <a id="36242" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="36244" href="plfa.part3.Denotational.html#36176" class="Bound">u</a> <a id="36246" class="Symbol">â†’</a> <a id="36248" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="36251" href="plfa.part3.Denotational.html#36251" class="Bound">uâ‚ƒ</a> <a id="36254" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="36256" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="36262" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="36264" href="plfa.part3.Denotational.html#34796" class="Function">factor</a> <a id="36271" href="plfa.part3.Denotational.html#36173" class="Bound">uâ‚‚</a> <a id="36274" href="plfa.part3.Denotational.html#36251" class="Bound">uâ‚ƒ</a> <a id="36277" href="plfa.part3.Denotational.html#36225" class="Bound">vâ€²</a> <a id="36280" href="plfa.part3.Denotational.html#36228" class="Bound">wâ€²</a><a id="36282" class="Symbol">)</a>
      <a id="36290" class="Comment">---------------------------------------------------------------</a>
    <a id="36358" class="Symbol">â†’</a> <a id="36360" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="36363" href="/Denotational/#36363" class="Bound">uâ‚ƒ</a> <a id="36366" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="36368" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="36374" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="36376" href="plfa.part3.Denotational.html#34796" class="Function">factor</a> <a id="36383" href="plfa.part3.Denotational.html#36173" class="Bound">uâ‚‚</a> <a id="36386" href="plfa.part3.Denotational.html#36363" class="Bound">uâ‚ƒ</a> <a id="36389" class="Symbol">(</a><a id="36390" href="plfa.part3.Denotational.html#33154" class="Function">â¨†dom</a> <a id="36395" href="plfa.part3.Denotational.html#36170" class="Bound">uâ€²</a><a id="36397" class="Symbol">)</a> <a id="36399" class="Symbol">(</a><a id="36400" href="plfa.part3.Denotational.html#33244" class="Function">â¨†cod</a> <a id="36405" href="plfa.part3.Denotational.html#36170" class="Bound">uâ€²</a><a id="36407" class="Symbol">)</a>
<a id="36409" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36423" class="Symbol">{</a><a id="36424" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="36425" class="Symbol">}</a> <a id="36427" class="Symbol">{</a><a id="36428" href="plfa.part3.Denotational.html#36428" class="Bound">uâ‚‚</a><a id="36430" class="Symbol">}</a> <a id="36432" class="Symbol">{</a><a id="36433" href="plfa.part3.Denotational.html#36433" class="Bound">u</a><a id="36434" class="Symbol">}</a> <a id="36436" href="plfa.part3.Denotational.html#36436" class="Bound">fuâ€²</a> <a id="36440" href="plfa.part3.Denotational.html#36440" class="Bound">uâ€²âŠ†u</a> <a id="36445" href="plfa.part3.Denotational.html#36445" class="Bound">IH</a> <a id="36448" class="Symbol">=</a>
   <a id="36453" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">âŠ¥-elim</a> <a id="36460" class="Symbol">(</a><a id="36461" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="36475" class="Symbol">(</a><a id="36476" href="/Denotational/#36436" class="Bound">fuâ€²</a> <a id="36480" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="36484" class="Symbol">)</a> <a id="36486" href="plfa.part3.Denotational.html#32146" class="Function">Â¬FunâŠ¥</a><a id="36491" class="Symbol">)</a>
<a id="36493" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36507" class="Symbol">{</a><a id="36508" href="plfa.part3.Denotational.html#36508" class="Bound">uâ‚â€²</a> <a id="36512" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="36514" href="plfa.part3.Denotational.html#36514" class="Bound">uâ‚‚â€²</a><a id="36517" class="Symbol">}</a> <a id="36519" class="Symbol">{</a><a id="36520" href="plfa.part3.Denotational.html#36520" class="Bound">uâ‚‚</a><a id="36522" class="Symbol">}</a> <a id="36524" class="Symbol">{</a><a id="36525" href="plfa.part3.Denotational.html#36525" class="Bound">u</a><a id="36526" class="Symbol">}</a> <a id="36528" href="plfa.part3.Denotational.html#36528" class="Bound">fg</a> <a id="36531" href="plfa.part3.Denotational.html#36531" class="Bound">uâ€²âŠ†u</a> <a id="36536" href="plfa.part3.Denotational.html#36536" class="Bound">IH</a> <a id="36539" class="Symbol">=</a> <a id="36541" href="plfa.part3.Denotational.html#36536" class="Bound">IH</a> <a id="36544" class="Symbol">(</a><a id="36545" href="plfa.part3.Denotational.html#31608" class="Function">â†¦âŠ†â†’âˆˆ</a> <a id="36550" href="plfa.part3.Denotational.html#36531" class="Bound">uâ€²âŠ†u</a><a id="36554" class="Symbol">)</a>
<a id="36556" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36570" class="Symbol">{</a><a id="36571" href="plfa.part3.Denotational.html#36571" class="Bound">uâ‚â€²</a> <a id="36575" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="36577" href="plfa.part3.Denotational.html#36577" class="Bound">uâ‚‚â€²</a><a id="36580" class="Symbol">}</a> <a id="36582" class="Symbol">{</a><a id="36583" href="plfa.part3.Denotational.html#36583" class="Bound">uâ‚‚</a><a id="36585" class="Symbol">}</a> <a id="36587" class="Symbol">{</a><a id="36588" href="plfa.part3.Denotational.html#36588" class="Bound">u</a><a id="36589" class="Symbol">}</a> <a id="36591" href="plfa.part3.Denotational.html#36591" class="Bound">fg</a> <a id="36594" href="plfa.part3.Denotational.html#36594" class="Bound">uâ€²âŠ†u</a> <a id="36599" href="plfa.part3.Denotational.html#36599" class="Bound">IH</a>
    <a id="36606" class="Keyword">with</a> <a id="36611" href="/Denotational/#31267" class="Function">âŠ”âŠ†-inv</a> <a id="36618" href="plfa.part3.Denotational.html#36594" class="Bound">uâ€²âŠ†u</a>
<a id="36623" class="Symbol">...</a> <a id="36627" class="Symbol">|</a> <a id="36629" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36631" href="/Denotational/#36631" class="Bound">uâ‚â€²âŠ†u</a> <a id="36637" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36639" href="plfa.part3.Denotational.html#36639" class="Bound">uâ‚‚â€²âŠ†u</a> <a id="36645" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="36651" class="Keyword">with</a> <a id="36656" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36670" class="Symbol">{</a><a id="36671" class="Bound">uâ‚â€²</a><a id="36674" class="Symbol">}</a> <a id="36676" class="Symbol">{</a><a id="36677" class="Bound">uâ‚‚</a><a id="36679" class="Symbol">}</a> <a id="36681" class="Symbol">{</a><a id="36682" class="Bound">u</a><a id="36683" class="Symbol">}</a> <a id="36685" class="Symbol">(Î»</a> <a id="36688" class="Symbol">{</a><a id="36689" href="plfa.part3.Denotational.html#36689" class="Bound">vâ€²</a><a id="36691" class="Symbol">}</a> <a id="36693" href="plfa.part3.Denotational.html#36693" class="Bound">z</a> <a id="36695" class="Symbol">â†’</a> <a id="36697" class="Bound">fg</a> <a id="36700" class="Symbol">(</a><a id="36701" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="36706" href="plfa.part3.Denotational.html#36693" class="Bound">z</a><a id="36707" class="Symbol">))</a> <a id="36710" href="plfa.part3.Denotational.html#36631" class="Bound">uâ‚â€²âŠ†u</a> <a id="36716" class="Bound">IH</a>
       <a id="36726" class="Symbol">|</a> <a id="36728" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="36742" class="Symbol">{</a><a id="36743" class="Bound">uâ‚‚â€²</a><a id="36746" class="Symbol">}</a> <a id="36748" class="Symbol">{</a><a id="36749" class="Bound">uâ‚‚</a><a id="36751" class="Symbol">}</a> <a id="36753" class="Symbol">{</a><a id="36754" class="Bound">u</a><a id="36755" class="Symbol">}</a> <a id="36757" class="Symbol">(Î»</a> <a id="36760" class="Symbol">{</a><a id="36761" href="plfa.part3.Denotational.html#36761" class="Bound">vâ€²</a><a id="36763" class="Symbol">}</a> <a id="36765" href="plfa.part3.Denotational.html#36765" class="Bound">z</a> <a id="36767" class="Symbol">â†’</a> <a id="36769" class="Bound">fg</a> <a id="36772" class="Symbol">(</a><a id="36773" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="36778" href="plfa.part3.Denotational.html#36765" class="Bound">z</a><a id="36779" class="Symbol">))</a> <a id="36782" href="plfa.part3.Denotational.html#36639" class="Bound">uâ‚‚â€²âŠ†u</a> <a id="36788" class="Bound">IH</a>
<a id="36791" class="Symbol">...</a> <a id="36795" class="Symbol">|</a> <a id="36797" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36799" href="/Denotational/#36799" class="Bound">uâ‚ƒâ‚</a> <a id="36803" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36805" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36807" href="plfa.part3.Denotational.html#36807" class="Bound">fu21&#39;</a> <a id="36813" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36815" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36817" href="plfa.part3.Denotational.html#36817" class="Bound">uâ‚ƒâ‚âŠ†uâ‚‚</a> <a id="36824" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36826" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36828" href="plfa.part3.Denotational.html#36828" class="Bound">duâ‚ƒâ‚âŠ‘duâ‚â€²</a> <a id="36838" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36840" href="plfa.part3.Denotational.html#36840" class="Bound">cuâ‚â€²âŠ‘cuâ‚ƒâ‚</a> <a id="36850" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36852" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36854" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36856" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="36862" class="Symbol">|</a> <a id="36864" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36866" href="/Denotational/#36866" class="Bound">uâ‚ƒâ‚‚</a> <a id="36870" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36872" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36874" href="plfa.part3.Denotational.html#36874" class="Bound">fu22&#39;</a> <a id="36880" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36882" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36884" href="plfa.part3.Denotational.html#36884" class="Bound">uâ‚ƒâ‚‚âŠ†uâ‚‚</a> <a id="36891" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36893" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36895" href="plfa.part3.Denotational.html#36895" class="Bound">duâ‚ƒâ‚‚âŠ‘duâ‚‚â€²</a> <a id="36905" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36907" href="plfa.part3.Denotational.html#36907" class="Bound">cuâ‚â€²âŠ‘cuâ‚ƒâ‚‚</a> <a id="36917" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36919" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36921" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36923" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="36925" class="Symbol">=</a>
      <a id="36933" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36935" class="Symbol">(</a><a id="36936" href="/Denotational/#36799" class="Bound">uâ‚ƒâ‚</a> <a id="36940" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="36942" href="plfa.part3.Denotational.html#36866" class="Bound">uâ‚ƒâ‚‚</a><a id="36945" class="Symbol">)</a> <a id="36947" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36949" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36951" href="plfa.part3.Denotational.html#37053" class="Function">fuâ‚‚â€²</a> <a id="36956" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="36958" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36960" href="plfa.part3.Denotational.html#37192" class="Function">uâ‚‚â€²âŠ†uâ‚‚</a> <a id="36967" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
      <a id="36975" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="36977" href="/Denotational/#5907" class="Function">âŠ”âŠ‘âŠ”</a> <a id="36981" href="plfa.part3.Denotational.html#36828" class="Bound">duâ‚ƒâ‚âŠ‘duâ‚â€²</a> <a id="36991" href="plfa.part3.Denotational.html#36895" class="Bound">duâ‚ƒâ‚‚âŠ‘duâ‚‚â€²</a> <a id="37001" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
        <a id="37011" href="/Denotational/#5907" class="Function">âŠ”âŠ‘âŠ”</a> <a id="37015" href="plfa.part3.Denotational.html#36840" class="Bound">cuâ‚â€²âŠ‘cuâ‚ƒâ‚</a> <a id="37025" href="plfa.part3.Denotational.html#36907" class="Bound">cuâ‚â€²âŠ‘cuâ‚ƒâ‚‚</a> <a id="37035" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="37037" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="37039" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="37041" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="37047" class="Keyword">where</a> <a id="37053" href="/Denotational/#37053" class="Function">fuâ‚‚â€²</a> <a id="37058" class="Symbol">:</a> <a id="37060" class="Symbol">{</a><a id="37061" href="plfa.part3.Denotational.html#37061" class="Bound">vâ€²</a> <a id="37064" class="Symbol">:</a> <a id="37066" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="37071" class="Symbol">}</a> <a id="37073" class="Symbol">â†’</a> <a id="37075" href="plfa.part3.Denotational.html#37061" class="Bound">vâ€²</a> <a id="37078" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="37080" href="plfa.part3.Denotational.html#36799" class="Bound">uâ‚ƒâ‚</a> <a id="37084" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#612" class="Datatype Operator">âŠ</a> <a id="37086" href="plfa.part3.Denotational.html#37061" class="Bound">vâ€²</a> <a id="37089" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="37091" href="plfa.part3.Denotational.html#36866" class="Bound">uâ‚ƒâ‚‚</a> <a id="37095" class="Symbol">â†’</a> <a id="37097" href="plfa.part3.Denotational.html#31982" class="Datatype">Fun</a> <a id="37101" href="plfa.part3.Denotational.html#37061" class="Bound">vâ€²</a>
          <a id="37114" href="/Denotational/#37053" class="Function">fuâ‚‚â€²</a> <a id="37119" class="Symbol">{</a><a id="37120" href="plfa.part3.Denotational.html#37120" class="Bound">vâ€²</a><a id="37122" class="Symbol">}</a> <a id="37124" class="Symbol">(</a><a id="37125" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="37130" href="plfa.part3.Denotational.html#37130" class="Bound">x</a><a id="37131" class="Symbol">)</a> <a id="37133" class="Symbol">=</a> <a id="37135" href="plfa.part3.Denotational.html#36807" class="Bound">fu21&#39;</a> <a id="37141" href="plfa.part3.Denotational.html#37130" class="Bound">x</a>
          <a id="37153" href="/Denotational/#37053" class="Function">fuâ‚‚â€²</a> <a id="37158" class="Symbol">{</a><a id="37159" href="plfa.part3.Denotational.html#37159" class="Bound">vâ€²</a><a id="37161" class="Symbol">}</a> <a id="37163" class="Symbol">(</a><a id="37164" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="37169" href="plfa.part3.Denotational.html#37169" class="Bound">y</a><a id="37170" class="Symbol">)</a> <a id="37172" class="Symbol">=</a> <a id="37174" href="plfa.part3.Denotational.html#36874" class="Bound">fu22&#39;</a> <a id="37180" href="plfa.part3.Denotational.html#37169" class="Bound">y</a>
          <a id="37192" href="/Denotational/#37192" class="Function">uâ‚‚â€²âŠ†uâ‚‚</a> <a id="37199" class="Symbol">:</a> <a id="37201" class="Symbol">{</a><a id="37202" href="plfa.part3.Denotational.html#37202" class="Bound">C</a> <a id="37204" class="Symbol">:</a> <a id="37206" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="37211" class="Symbol">}</a> <a id="37213" class="Symbol">â†’</a> <a id="37215" href="plfa.part3.Denotational.html#37202" class="Bound">C</a> <a id="37217" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="37219" href="plfa.part3.Denotational.html#36799" class="Bound">uâ‚ƒâ‚</a> <a id="37223" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#612" class="Datatype Operator">âŠ</a> <a id="37225" href="plfa.part3.Denotational.html#37202" class="Bound">C</a> <a id="37227" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="37229" href="plfa.part3.Denotational.html#36866" class="Bound">uâ‚ƒâ‚‚</a> <a id="37233" class="Symbol">â†’</a> <a id="37235" href="plfa.part3.Denotational.html#37202" class="Bound">C</a> <a id="37237" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="37239" class="Bound">uâ‚‚</a>
          <a id="37252" href="/Denotational/#37192" class="Function">uâ‚‚â€²âŠ†uâ‚‚</a> <a id="37259" class="Symbol">{</a><a id="37260" href="plfa.part3.Denotational.html#37260" class="Bound">C</a><a id="37261" class="Symbol">}</a> <a id="37263" class="Symbol">(</a><a id="37264" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="37269" href="plfa.part3.Denotational.html#37269" class="Bound">x</a><a id="37270" class="Symbol">)</a> <a id="37272" class="Symbol">=</a> <a id="37274" href="plfa.part3.Denotational.html#36817" class="Bound">uâ‚ƒâ‚âŠ†uâ‚‚</a> <a id="37281" href="plfa.part3.Denotational.html#37269" class="Bound">x</a>
          <a id="37293" href="/Denotational/#37192" class="Function">uâ‚‚â€²âŠ†uâ‚‚</a> <a id="37300" class="Symbol">{</a><a id="37301" href="plfa.part3.Denotational.html#37301" class="Bound">C</a><a id="37302" class="Symbol">}</a> <a id="37304" class="Symbol">(</a><a id="37305" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="37310" href="plfa.part3.Denotational.html#37310" class="Bound">y</a><a id="37311" class="Symbol">)</a> <a id="37313" class="Symbol">=</a> <a id="37315" href="plfa.part3.Denotational.html#36884" class="Bound">uâ‚ƒâ‚‚âŠ†uâ‚‚</a> <a id="37322" href="plfa.part3.Denotational.html#37310" class="Bound">y</a>
</pre>
<ul>
  <li>
    <p>Suppose <code class="language-plaintext highlighter-rouge">uâ€² â‰¡ âŠ¥</code>. Then we have a contradiction because
it is not the case that <code class="language-plaintext highlighter-rouge">Fun âŠ¥</code>.</p>
  </li>
  <li>
    <p>Suppose <code class="language-plaintext highlighter-rouge">uâ€² â‰¡ uâ‚â€² â†¦ uâ‚‚â€²</code>. Then <code class="language-plaintext highlighter-rouge">uâ‚â€² â†¦ uâ‚‚â€² âˆˆ u</code> and we can apply the
premise (the induction hypothesis from <code class="language-plaintext highlighter-rouge">u âŠ‘ uâ‚‚</code>) to obtain that
<code class="language-plaintext highlighter-rouge">uâ‚â€² â†¦ uâ‚‚â€²</code> factors of <code class="language-plaintext highlighter-rouge">uâ‚‚ into uâ‚‚â€²</code>. This case is complete because
<code class="language-plaintext highlighter-rouge">â¨†dom uâ€² â‰¡ uâ‚â€²</code> and <code class="language-plaintext highlighter-rouge">â¨†cod uâ€² â‰¡ uâ‚‚â€²</code>.</p>
  </li>
  <li>
    <p>Suppose <code class="language-plaintext highlighter-rouge">uâ€² â‰¡ uâ‚â€² âŠ” uâ‚‚â€²</code>. Then we have <code class="language-plaintext highlighter-rouge">uâ‚â€² âŠ† u</code> and <code class="language-plaintext highlighter-rouge">uâ‚‚â€² âŠ† u</code>. We also
have <code class="language-plaintext highlighter-rouge">all-funs uâ‚â€²</code> and <code class="language-plaintext highlighter-rouge">all-funs uâ‚‚â€²</code>, so we can apply the induction hypothesis
for both <code class="language-plaintext highlighter-rouge">uâ‚â€²</code> and <code class="language-plaintext highlighter-rouge">uâ‚‚â€²</code>. So there exists values <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code> and <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚‚</code> such that
<code class="language-plaintext highlighter-rouge">(â¨†dom uâ‚â€²) â†¦ (â¨†cod uâ‚â€²)</code> factors <code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code> and
<code class="language-plaintext highlighter-rouge">(â¨†dom uâ‚‚â€²) â†¦ (â¨†cod uâ‚‚â€²)</code> factors <code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚‚</code>.
We will show that <code class="language-plaintext highlighter-rouge">(â¨†dom u) â†¦ (â¨†cod u)</code> factors <code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚ âŠ” uâ‚ƒâ‚‚</code>.
So we need to show that</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  â¨†dom (uâ‚ƒâ‚ âŠ” uâ‚ƒâ‚‚) âŠ‘ â¨†dom (uâ‚â€² âŠ” uâ‚‚â€²)
  â¨†cod (uâ‚â€² âŠ” uâ‚‚â€²) âŠ‘ â¨†cod (uâ‚ƒâ‚ âŠ” uâ‚ƒâ‚‚)
</code></pre></div>    </div>

    <p>But those both follow directly from the factoring of
<code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code> and <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚‚</code>, using the monotonicity of <code class="language-plaintext highlighter-rouge">âŠ”</code> with respect to <code class="language-plaintext highlighter-rouge">âŠ‘</code>.</p>
  </li>
</ul>

<h3 id="inversion-of-less-than-for-functions">Inversion of less-than for functions</h3>

<p>We come to the proof of the main lemma concerning the inversion of
less-than for functions. We show that if <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ uâ‚‚</code>, then for any
<code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚</code>, we can factor <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code> according to <code class="language-plaintext highlighter-rouge">v â†¦ w</code>. We proceed
by induction on the derivation of <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ uâ‚‚</code>, and describe each case in
the text after the Agda proof.</p>

<pre class="Agda"><a id="sub-inv"></a><a id="38690" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="38698" class="Symbol">:</a> <a id="38700" class="Symbol">âˆ€{</a><a id="38702" href="plfa.part3.Denotational.html#38702" class="Bound">uâ‚</a> <a id="38705" href="plfa.part3.Denotational.html#38705" class="Bound">uâ‚‚</a> <a id="38708" class="Symbol">:</a> <a id="38710" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="38715" class="Symbol">}</a>
        <a id="38725" class="Symbol">â†’</a> <a id="38727" href="/Denotational/#38702" class="Bound">uâ‚</a> <a id="38730" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="38732" href="plfa.part3.Denotational.html#38705" class="Bound">uâ‚‚</a>
        <a id="38743" class="Symbol">â†’</a> <a id="38745" class="Symbol">âˆ€{</a><a id="38747" href="/Denotational/#38747" class="Bound">v</a> <a id="38749" href="plfa.part3.Denotational.html#38749" class="Bound">w</a><a id="38750" class="Symbol">}</a> <a id="38752" class="Symbol">â†’</a> <a id="38754" href="plfa.part3.Denotational.html#38747" class="Bound">v</a> <a id="38756" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="38758" href="plfa.part3.Denotational.html#38749" class="Bound">w</a> <a id="38760" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="38762" href="plfa.part3.Denotational.html#38702" class="Bound">uâ‚</a>
          <a id="38775" class="Comment">-------------------------------------</a>
        <a id="38821" class="Symbol">â†’</a> <a id="38823" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="38826" href="/Denotational/#38826" class="Bound">uâ‚ƒ</a> <a id="38829" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="38831" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="38837" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="38839" href="plfa.part3.Denotational.html#34796" class="Function">factor</a> <a id="38846" href="plfa.part3.Denotational.html#38705" class="Bound">uâ‚‚</a> <a id="38849" href="plfa.part3.Denotational.html#38826" class="Bound">uâ‚ƒ</a> <a id="38852" href="plfa.part3.Denotational.html#38747" class="Bound">v</a> <a id="38854" href="plfa.part3.Denotational.html#38749" class="Bound">w</a>
<a id="38856" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="38864" class="Symbol">{</a><a id="38865" href="plfa.part3.Denotational.html#4171" class="InductiveConstructor">âŠ¥</a><a id="38866" class="Symbol">}</a> <a id="38868" class="Symbol">{</a><a id="38869" href="plfa.part3.Denotational.html#38869" class="Bound">uâ‚‚</a><a id="38871" class="Symbol">}</a> <a id="38873" href="plfa.part3.Denotational.html#4543" class="InductiveConstructor">âŠ‘-bot</a> <a id="38879" class="Symbol">{</a><a id="38880" href="plfa.part3.Denotational.html#38880" class="Bound">v</a><a id="38881" class="Symbol">}</a> <a id="38883" class="Symbol">{</a><a id="38884" href="plfa.part3.Denotational.html#38884" class="Bound">w</a><a id="38885" class="Symbol">}</a> <a id="38887" class="Symbol">()</a>
<a id="38890" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="38898" class="Symbol">{</a><a id="38899" href="plfa.part3.Denotational.html#38899" class="Bound">uâ‚â‚</a> <a id="38903" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="38905" href="plfa.part3.Denotational.html#38905" class="Bound">uâ‚â‚‚</a><a id="38908" class="Symbol">}</a> <a id="38910" class="Symbol">{</a><a id="38911" href="plfa.part3.Denotational.html#38911" class="Bound">uâ‚‚</a><a id="38913" class="Symbol">}</a> <a id="38915" class="Symbol">(</a><a id="38916" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="38925" href="plfa.part3.Denotational.html#38925" class="Bound">lt1</a> <a id="38929" href="plfa.part3.Denotational.html#38929" class="Bound">lt2</a><a id="38932" class="Symbol">)</a> <a id="38934" class="Symbol">{</a><a id="38935" href="plfa.part3.Denotational.html#38935" class="Bound">v</a><a id="38936" class="Symbol">}</a> <a id="38938" class="Symbol">{</a><a id="38939" href="plfa.part3.Denotational.html#38939" class="Bound">w</a><a id="38940" class="Symbol">}</a> <a id="38942" class="Symbol">(</a><a id="38943" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="38948" href="plfa.part3.Denotational.html#38948" class="Bound">x</a><a id="38949" class="Symbol">)</a> <a id="38951" class="Symbol">=</a> <a id="38953" href="plfa.part3.Denotational.html#38690" class="Function">sub-inv</a> <a id="38961" href="plfa.part3.Denotational.html#38925" class="Bound">lt1</a> <a id="38965" href="plfa.part3.Denotational.html#38948" class="Bound">x</a>
<a id="38967" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="38975" class="Symbol">{</a><a id="38976" href="plfa.part3.Denotational.html#38976" class="Bound">uâ‚â‚</a> <a id="38980" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="38982" href="plfa.part3.Denotational.html#38982" class="Bound">uâ‚â‚‚</a><a id="38985" class="Symbol">}</a> <a id="38987" class="Symbol">{</a><a id="38988" href="plfa.part3.Denotational.html#38988" class="Bound">uâ‚‚</a><a id="38990" class="Symbol">}</a> <a id="38992" class="Symbol">(</a><a id="38993" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="39002" href="plfa.part3.Denotational.html#39002" class="Bound">lt1</a> <a id="39006" href="plfa.part3.Denotational.html#39006" class="Bound">lt2</a><a id="39009" class="Symbol">)</a> <a id="39011" class="Symbol">{</a><a id="39012" href="plfa.part3.Denotational.html#39012" class="Bound">v</a><a id="39013" class="Symbol">}</a> <a id="39015" class="Symbol">{</a><a id="39016" href="plfa.part3.Denotational.html#39016" class="Bound">w</a><a id="39017" class="Symbol">}</a> <a id="39019" class="Symbol">(</a><a id="39020" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="39025" href="plfa.part3.Denotational.html#39025" class="Bound">y</a><a id="39026" class="Symbol">)</a> <a id="39028" class="Symbol">=</a> <a id="39030" href="plfa.part3.Denotational.html#38690" class="Function">sub-inv</a> <a id="39038" href="plfa.part3.Denotational.html#39006" class="Bound">lt2</a> <a id="39042" href="plfa.part3.Denotational.html#39025" class="Bound">y</a>
<a id="39044" href="/Denotational/#38690" class="CatchallClause Function">sub-inv</a><a id="39051" class="CatchallClause"> </a><a id="39052" class="CatchallClause Symbol">{</a><a id="39053" href="plfa.part3.Denotational.html#39053" class="CatchallClause Bound">uâ‚</a><a id="39055" class="CatchallClause Symbol">}</a><a id="39056" class="CatchallClause"> </a><a id="39057" class="CatchallClause Symbol">{</a><a id="39058" href="plfa.part3.Denotational.html#39058" class="CatchallClause Bound">uâ‚‚â‚</a><a id="39061" class="CatchallClause"> </a><a id="39062" href="plfa.part3.Denotational.html#4213" class="CatchallClause InductiveConstructor Operator">âŠ”</a><a id="39063" class="CatchallClause"> </a><a id="39064" href="plfa.part3.Denotational.html#39064" class="CatchallClause Bound">uâ‚‚â‚‚</a><a id="39067" class="CatchallClause Symbol">}</a><a id="39068" class="CatchallClause"> </a><a id="39069" class="CatchallClause Symbol">(</a><a id="39070" href="plfa.part3.Denotational.html#4652" class="CatchallClause InductiveConstructor">âŠ‘-conj-R1</a><a id="39079" class="CatchallClause"> </a><a id="39080" href="plfa.part3.Denotational.html#39080" class="CatchallClause Bound">lt</a><a id="39082" class="CatchallClause Symbol">)</a><a id="39083" class="CatchallClause"> </a><a id="39084" class="CatchallClause Symbol">{</a><a id="39085" href="plfa.part3.Denotational.html#39085" class="CatchallClause Bound">v</a><a id="39086" class="CatchallClause Symbol">}</a><a id="39087" class="CatchallClause"> </a><a id="39088" class="CatchallClause Symbol">{</a><a id="39089" href="plfa.part3.Denotational.html#39089" class="CatchallClause Bound">w</a><a id="39090" class="CatchallClause Symbol">}</a><a id="39091" class="CatchallClause"> </a><a id="39092" href="plfa.part3.Denotational.html#39092" class="CatchallClause Bound">m</a>
    <a id="39098" class="Keyword">with</a> <a id="39103" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="39111" href="plfa.part3.Denotational.html#39080" class="Bound">lt</a> <a id="39114" href="plfa.part3.Denotational.html#39092" class="Bound">m</a>
<a id="39116" class="Symbol">...</a> <a id="39120" class="Symbol">|</a> <a id="39122" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39124" href="/Denotational/#39124" class="Bound">uâ‚ƒâ‚</a> <a id="39128" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39130" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39132" href="plfa.part3.Denotational.html#39132" class="Bound">fuâ‚ƒâ‚</a> <a id="39137" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39139" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39141" href="plfa.part3.Denotational.html#39141" class="Bound">uâ‚ƒâ‚âŠ†uâ‚‚â‚</a> <a id="39149" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39151" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39153" href="plfa.part3.Denotational.html#39153" class="Bound">domuâ‚ƒâ‚âŠ‘v</a> <a id="39162" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39164" href="plfa.part3.Denotational.html#39164" class="Bound">wâŠ‘coduâ‚ƒâ‚</a> <a id="39173" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39175" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39177" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39179" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39181" class="Symbol">=</a>
      <a id="39189" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39191" href="/Denotational/#39124" class="Bound">uâ‚ƒâ‚</a> <a id="39195" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39197" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39199" href="plfa.part3.Denotational.html#39132" class="Bound">fuâ‚ƒâ‚</a> <a id="39204" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39206" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39208" class="Symbol">(Î»</a> <a id="39211" class="Symbol">{</a><a id="39212" href="plfa.part3.Denotational.html#39212" class="Bound">w</a><a id="39213" class="Symbol">}</a> <a id="39215" href="plfa.part3.Denotational.html#39215" class="Bound">z</a> <a id="39217" class="Symbol">â†’</a> <a id="39219" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="39224" class="Symbol">(</a><a id="39225" href="plfa.part3.Denotational.html#39141" class="Bound">uâ‚ƒâ‚âŠ†uâ‚‚â‚</a> <a id="39233" href="plfa.part3.Denotational.html#39215" class="Bound">z</a><a id="39234" class="Symbol">))</a> <a id="39237" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
                                   <a id="39274" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39276" href="/Denotational/#39153" class="Bound">domuâ‚ƒâ‚âŠ‘v</a> <a id="39285" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39287" href="plfa.part3.Denotational.html#39164" class="Bound">wâŠ‘coduâ‚ƒâ‚</a> <a id="39296" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39298" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39300" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39302" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
<a id="39304" href="/Denotational/#38690" class="CatchallClause Function">sub-inv</a><a id="39311" class="CatchallClause"> </a><a id="39312" class="CatchallClause Symbol">{</a><a id="39313" href="plfa.part3.Denotational.html#39313" class="CatchallClause Bound">uâ‚</a><a id="39315" class="CatchallClause Symbol">}</a><a id="39316" class="CatchallClause"> </a><a id="39317" class="CatchallClause Symbol">{</a><a id="39318" href="plfa.part3.Denotational.html#39318" class="CatchallClause Bound">uâ‚‚â‚</a><a id="39321" class="CatchallClause"> </a><a id="39322" href="plfa.part3.Denotational.html#4213" class="CatchallClause InductiveConstructor Operator">âŠ”</a><a id="39323" class="CatchallClause"> </a><a id="39324" href="plfa.part3.Denotational.html#39324" class="CatchallClause Bound">uâ‚‚â‚‚</a><a id="39327" class="CatchallClause Symbol">}</a><a id="39328" class="CatchallClause"> </a><a id="39329" class="CatchallClause Symbol">(</a><a id="39330" href="plfa.part3.Denotational.html#4725" class="CatchallClause InductiveConstructor">âŠ‘-conj-R2</a><a id="39339" class="CatchallClause"> </a><a id="39340" href="plfa.part3.Denotational.html#39340" class="CatchallClause Bound">lt</a><a id="39342" class="CatchallClause Symbol">)</a><a id="39343" class="CatchallClause"> </a><a id="39344" class="CatchallClause Symbol">{</a><a id="39345" href="plfa.part3.Denotational.html#39345" class="CatchallClause Bound">v</a><a id="39346" class="CatchallClause Symbol">}</a><a id="39347" class="CatchallClause"> </a><a id="39348" class="CatchallClause Symbol">{</a><a id="39349" href="plfa.part3.Denotational.html#39349" class="CatchallClause Bound">w</a><a id="39350" class="CatchallClause Symbol">}</a><a id="39351" class="CatchallClause"> </a><a id="39352" href="plfa.part3.Denotational.html#39352" class="CatchallClause Bound">m</a>
    <a id="39358" class="Keyword">with</a> <a id="39363" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="39371" href="plfa.part3.Denotational.html#39340" class="Bound">lt</a> <a id="39374" href="plfa.part3.Denotational.html#39352" class="Bound">m</a>
<a id="39376" class="Symbol">...</a> <a id="39380" class="Symbol">|</a> <a id="39382" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39384" href="/Denotational/#39384" class="Bound">uâ‚ƒâ‚‚</a> <a id="39388" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39390" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39392" href="plfa.part3.Denotational.html#39392" class="Bound">fuâ‚ƒâ‚‚</a> <a id="39397" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39399" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39401" href="plfa.part3.Denotational.html#39401" class="Bound">uâ‚ƒâ‚‚âŠ†uâ‚‚â‚‚</a> <a id="39409" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39411" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39413" href="plfa.part3.Denotational.html#39413" class="Bound">domuâ‚ƒâ‚‚âŠ‘v</a> <a id="39422" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39424" href="plfa.part3.Denotational.html#39424" class="Bound">wâŠ‘coduâ‚ƒâ‚‚</a> <a id="39433" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39435" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39437" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39439" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39441" class="Symbol">=</a>
      <a id="39449" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39451" href="/Denotational/#39384" class="Bound">uâ‚ƒâ‚‚</a> <a id="39455" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39457" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39459" href="plfa.part3.Denotational.html#39392" class="Bound">fuâ‚ƒâ‚‚</a> <a id="39464" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39466" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39468" class="Symbol">(Î»</a> <a id="39471" class="Symbol">{</a><a id="39472" href="plfa.part3.Denotational.html#39472" class="Bound">C</a><a id="39473" class="Symbol">}</a> <a id="39475" href="plfa.part3.Denotational.html#39475" class="Bound">z</a> <a id="39477" class="Symbol">â†’</a> <a id="39479" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="39484" class="Symbol">(</a><a id="39485" href="plfa.part3.Denotational.html#39401" class="Bound">uâ‚ƒâ‚‚âŠ†uâ‚‚â‚‚</a> <a id="39493" href="plfa.part3.Denotational.html#39475" class="Bound">z</a><a id="39494" class="Symbol">))</a> <a id="39497" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
                                   <a id="39534" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39536" href="/Denotational/#39413" class="Bound">domuâ‚ƒâ‚‚âŠ‘v</a> <a id="39545" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39547" href="plfa.part3.Denotational.html#39424" class="Bound">wâŠ‘coduâ‚ƒâ‚‚</a> <a id="39556" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39558" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39560" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39562" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
<a id="39564" href="/Denotational/#38690" class="CatchallClause Function">sub-inv</a><a id="39571" class="CatchallClause"> </a><a id="39572" class="CatchallClause Symbol">{</a><a id="39573" href="plfa.part3.Denotational.html#39573" class="CatchallClause Bound">uâ‚</a><a id="39575" class="CatchallClause Symbol">}</a><a id="39576" class="CatchallClause"> </a><a id="39577" class="CatchallClause Symbol">{</a><a id="39578" href="plfa.part3.Denotational.html#39578" class="CatchallClause Bound">uâ‚‚</a><a id="39580" class="CatchallClause Symbol">}</a><a id="39581" class="CatchallClause"> </a><a id="39582" class="CatchallClause Symbol">(</a><a id="39583" href="plfa.part3.Denotational.html#4798" class="CatchallClause InductiveConstructor">âŠ‘-trans</a><a id="39590" class="CatchallClause Symbol">{</a><a id="39591" class="CatchallClause Argument">v</a><a id="39592" class="CatchallClause"> </a><a id="39593" class="CatchallClause Symbol">=</a><a id="39594" class="CatchallClause"> </a><a id="39595" href="plfa.part3.Denotational.html#39595" class="CatchallClause Bound">u</a><a id="39596" class="CatchallClause Symbol">}</a><a id="39597" class="CatchallClause"> </a><a id="39598" href="plfa.part3.Denotational.html#39598" class="CatchallClause Bound">uâ‚âŠ‘u</a><a id="39602" class="CatchallClause"> </a><a id="39603" href="plfa.part3.Denotational.html#39603" class="CatchallClause Bound">uâŠ‘uâ‚‚</a><a id="39607" class="CatchallClause Symbol">)</a><a id="39608" class="CatchallClause"> </a><a id="39609" class="CatchallClause Symbol">{</a><a id="39610" href="plfa.part3.Denotational.html#39610" class="CatchallClause Bound">v</a><a id="39611" class="CatchallClause Symbol">}</a><a id="39612" class="CatchallClause"> </a><a id="39613" class="CatchallClause Symbol">{</a><a id="39614" href="plfa.part3.Denotational.html#39614" class="CatchallClause Bound">w</a><a id="39615" class="CatchallClause Symbol">}</a><a id="39616" class="CatchallClause"> </a><a id="39617" href="plfa.part3.Denotational.html#39617" class="CatchallClause Bound">vâ†¦wâˆˆuâ‚</a>
    <a id="39628" class="Keyword">with</a> <a id="39633" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="39641" href="plfa.part3.Denotational.html#39598" class="Bound">uâ‚âŠ‘u</a> <a id="39646" href="plfa.part3.Denotational.html#39617" class="Bound">vâ†¦wâˆˆuâ‚</a>
<a id="39653" class="Symbol">...</a> <a id="39657" class="Symbol">|</a> <a id="39659" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39661" href="/Denotational/#39661" class="Bound">uâ€²</a> <a id="39664" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39666" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39668" href="plfa.part3.Denotational.html#39668" class="Bound">fuâ€²</a> <a id="39672" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39674" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39676" href="plfa.part3.Denotational.html#39676" class="Bound">uâ€²âŠ†u</a> <a id="39681" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39683" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39685" href="plfa.part3.Denotational.html#39685" class="Bound">domuâ€²âŠ‘v</a> <a id="39693" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39695" href="plfa.part3.Denotational.html#39695" class="Bound">wâŠ‘coduâ€²</a> <a id="39703" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39705" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39707" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39709" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="39715" class="Keyword">with</a> <a id="39720" href="/Denotational/#36152" class="Function">sub-inv-trans</a> <a id="39734" class="Symbol">{</a><a id="39735" href="plfa.part3.Denotational.html#39661" class="Bound">uâ€²</a><a id="39737" class="Symbol">}</a> <a id="39739" href="plfa.part3.Denotational.html#39668" class="Bound">fuâ€²</a> <a id="39743" href="plfa.part3.Denotational.html#39676" class="Bound">uâ€²âŠ†u</a> <a id="39748" class="Symbol">(</a><a id="39749" href="plfa.part3.Denotational.html#38690" class="Function">sub-inv</a> <a id="39757" class="Bound">uâŠ‘uâ‚‚</a><a id="39761" class="Symbol">)</a>
<a id="39763" class="Symbol">...</a> <a id="39767" class="Symbol">|</a> <a id="39769" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39771" href="/Denotational/#39771" class="Bound">uâ‚ƒ</a> <a id="39774" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39776" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39778" href="plfa.part3.Denotational.html#39778" class="Bound">fuâ‚ƒ</a> <a id="39782" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39784" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39786" href="plfa.part3.Denotational.html#39786" class="Bound">uâ‚ƒâŠ†uâ‚‚</a> <a id="39792" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39794" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39796" href="plfa.part3.Denotational.html#39796" class="Bound">domuâ‚ƒâŠ‘domuâ€²</a> <a id="39808" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39810" href="plfa.part3.Denotational.html#39810" class="Bound">coduâ€²âŠ‘coduâ‚ƒ</a> <a id="39822" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39824" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39826" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39828" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39830" class="Symbol">=</a>
      <a id="39838" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39840" href="/Denotational/#39771" class="Bound">uâ‚ƒ</a> <a id="39843" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39845" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39847" href="plfa.part3.Denotational.html#39778" class="Bound">fuâ‚ƒ</a> <a id="39851" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39853" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39855" href="plfa.part3.Denotational.html#39786" class="Bound">uâ‚ƒâŠ†uâ‚‚</a> <a id="39861" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="39863" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="39865" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="39873" href="plfa.part3.Denotational.html#39796" class="Bound">domuâ‚ƒâŠ‘domuâ€²</a> <a id="39885" class="Bound">domuâ€²âŠ‘v</a> <a id="39893" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
                                    <a id="39931" href="/Denotational/#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="39939" class="Bound">wâŠ‘coduâ€²</a> <a id="39947" href="plfa.part3.Denotational.html#39810" class="Bound">coduâ€²âŠ‘coduâ‚ƒ</a> <a id="39959" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39961" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39963" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="39965" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
<a id="39967" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="39975" class="Symbol">{</a><a id="39976" href="plfa.part3.Denotational.html#39976" class="Bound">uâ‚â‚</a> <a id="39980" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="39982" href="plfa.part3.Denotational.html#39982" class="Bound">uâ‚â‚‚</a><a id="39985" class="Symbol">}</a> <a id="39987" class="Symbol">{</a><a id="39988" href="plfa.part3.Denotational.html#39988" class="Bound">uâ‚‚â‚</a> <a id="39992" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="39994" href="plfa.part3.Denotational.html#39994" class="Bound">uâ‚‚â‚‚</a><a id="39997" class="Symbol">}</a> <a id="39999" class="Symbol">(</a><a id="40000" href="plfa.part3.Denotational.html#4869" class="InductiveConstructor">âŠ‘-fun</a> <a id="40006" href="plfa.part3.Denotational.html#40006" class="Bound">lt1</a> <a id="40010" href="plfa.part3.Denotational.html#40010" class="Bound">lt2</a><a id="40013" class="Symbol">)</a> <a id="40015" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="40020" class="Symbol">=</a>
    <a id="40026" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40028" href="/Denotational/#39988" class="Bound">uâ‚‚â‚</a> <a id="40032" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40034" href="plfa.part3.Denotational.html#39994" class="Bound">uâ‚‚â‚‚</a> <a id="40038" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40040" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40042" class="Symbol">(Î»</a> <a id="40045" class="Symbol">{</a><a id="40046" href="plfa.part3.Denotational.html#40046" class="Bound">w</a><a id="40047" class="Symbol">}</a> <a id="40049" class="Symbol">â†’</a> <a id="40051" href="plfa.part3.Denotational.html#32008" class="InductiveConstructor">fun</a><a id="40054" class="Symbol">)</a> <a id="40056" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40058" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40060" class="Symbol">(Î»</a> <a id="40063" class="Symbol">{</a><a id="40064" href="plfa.part3.Denotational.html#40064" class="Bound">C</a><a id="40065" class="Symbol">}</a> <a id="40067" href="plfa.part3.Denotational.html#40067" class="Bound">z</a> <a id="40069" class="Symbol">â†’</a> <a id="40071" href="plfa.part3.Denotational.html#40067" class="Bound">z</a><a id="40072" class="Symbol">)</a> <a id="40074" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40076" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40078" href="plfa.part3.Denotational.html#40006" class="Bound">lt1</a> <a id="40082" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40084" href="plfa.part3.Denotational.html#40010" class="Bound">lt2</a> <a id="40088" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40090" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40092" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40094" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
<a id="40096" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="40104" class="Symbol">{</a><a id="40105" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40109" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40111" class="Symbol">(</a><a id="40112" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40116" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40118" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a><a id="40121" class="Symbol">)}</a> <a id="40124" class="Symbol">{</a><a id="40125" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40129" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40131" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40135" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40137" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40141" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40143" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a><a id="40146" class="Symbol">}</a> <a id="40148" href="plfa.part3.Denotational.html#4972" class="InductiveConstructor">âŠ‘-dist</a>
    <a id="40159" class="Symbol">{</a><a id="40160" class="DottedPattern Symbol">.</a><a id="40161" href="/Denotational/#40105" class="DottedPattern Bound">uâ‚‚â‚</a><a id="40164" class="Symbol">}</a> <a id="40166" class="Symbol">{</a><a id="40167" class="DottedPattern Symbol">.(</a><a id="40169" href="plfa.part3.Denotational.html#40112" class="DottedPattern Bound">uâ‚‚â‚‚</a> <a id="40173" href="plfa.part3.Denotational.html#4213" class="DottedPattern InductiveConstructor Operator">âŠ”</a> <a id="40175" href="plfa.part3.Denotational.html#40118" class="DottedPattern Bound">uâ‚‚â‚ƒ</a><a id="40178" class="DottedPattern Symbol">)</a><a id="40179" class="Symbol">}</a> <a id="40181" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="40186" class="Symbol">=</a>
    <a id="40192" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40194" href="/Denotational/#40105" class="Bound">uâ‚‚â‚</a> <a id="40198" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40200" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40204" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40206" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40210" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40212" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a> <a id="40216" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40218" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40220" href="plfa.part3.Denotational.html#40280" class="Function">f</a> <a id="40222" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40224" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40226" href="plfa.part3.Denotational.html#40379" class="Function">g</a> <a id="40228" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40230" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="40232" href="plfa.part3.Denotational.html#4568" class="InductiveConstructor">âŠ‘-conj-L</a> <a id="40241" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="40248" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="40255" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="40257" href="plfa.part3.Denotational.html#5638" class="Function">âŠ‘-refl</a> <a id="40264" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40266" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40268" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="40270" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
  <a id="40274" class="Keyword">where</a> <a id="40280" href="/Denotational/#40280" class="Function">f</a> <a id="40282" class="Symbol">:</a> <a id="40284" href="plfa.part3.Denotational.html#32046" class="Function">all-funs</a> <a id="40293" class="Symbol">(</a><a id="40294" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40298" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40300" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40304" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40306" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40310" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40312" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a><a id="40315" class="Symbol">)</a>
        <a id="40325" href="/Denotational/#40280" class="Function">f</a> <a id="40327" class="Symbol">(</a><a id="40328" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="40333" href="plfa.part3.Denotational.html#40333" class="Bound">x</a><a id="40334" class="Symbol">)</a> <a id="40336" class="Symbol">=</a> <a id="40338" href="plfa.part3.Denotational.html#32008" class="InductiveConstructor">fun</a> <a id="40342" href="plfa.part3.Denotational.html#40333" class="Bound">x</a>
        <a id="40352" href="/Denotational/#40280" class="Function">f</a> <a id="40354" class="Symbol">(</a><a id="40355" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="40360" href="plfa.part3.Denotational.html#40360" class="Bound">y</a><a id="40361" class="Symbol">)</a> <a id="40363" class="Symbol">=</a> <a id="40365" href="plfa.part3.Denotational.html#32008" class="InductiveConstructor">fun</a> <a id="40369" href="plfa.part3.Denotational.html#40360" class="Bound">y</a>
        <a id="40379" href="/Denotational/#40379" class="Function">g</a> <a id="40381" class="Symbol">:</a> <a id="40383" class="Symbol">(</a><a id="40384" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40388" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40390" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40394" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40396" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40400" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40402" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a><a id="40405" class="Symbol">)</a> <a id="40407" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="40409" class="Symbol">(</a><a id="40410" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40414" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40416" href="plfa.part3.Denotational.html#40112" class="Bound">uâ‚‚â‚‚</a> <a id="40420" href="plfa.part3.Denotational.html#4213" class="InductiveConstructor Operator">âŠ”</a> <a id="40422" href="plfa.part3.Denotational.html#40105" class="Bound">uâ‚‚â‚</a> <a id="40426" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="40428" href="plfa.part3.Denotational.html#40118" class="Bound">uâ‚‚â‚ƒ</a><a id="40431" class="Symbol">)</a>
        <a id="40441" href="/Denotational/#40379" class="Function">g</a> <a id="40443" class="Symbol">(</a><a id="40444" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="40449" href="plfa.part3.Denotational.html#40449" class="Bound">x</a><a id="40450" class="Symbol">)</a> <a id="40452" class="Symbol">=</a> <a id="40454" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">injâ‚</a> <a id="40459" href="plfa.part3.Denotational.html#40449" class="Bound">x</a>
        <a id="40469" href="/Denotational/#40379" class="Function">g</a> <a id="40471" class="Symbol">(</a><a id="40472" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="40477" href="plfa.part3.Denotational.html#40477" class="Bound">y</a><a id="40478" class="Symbol">)</a> <a id="40480" class="Symbol">=</a> <a id="40482" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">injâ‚‚</a> <a id="40487" href="plfa.part3.Denotational.html#40477" class="Bound">y</a>
</pre>
<p>Let <code class="language-plaintext highlighter-rouge">v</code> and <code class="language-plaintext highlighter-rouge">w</code> be arbitrary values.</p>

<ul>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-bot</code>. So <code class="language-plaintext highlighter-rouge">uâ‚ â‰¡ âŠ¥</code>. We have <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ âŠ¥</code>, but that is impossible.</p>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-conj-L</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  uâ‚â‚ âŠ‘ uâ‚‚   uâ‚â‚‚ âŠ‘ uâ‚‚
  -------------------
  uâ‚â‚ âŠ” uâ‚â‚‚ âŠ‘ uâ‚‚
</code></pre></div>    </div>

    <p>Given that <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚â‚ âŠ” uâ‚â‚‚</code>, there are two subcases to consider.</p>

    <ul>
      <li>
        <p>Subcase <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚â‚</code>. We conclude by the induction
hypothesis for <code class="language-plaintext highlighter-rouge">uâ‚â‚ âŠ‘ uâ‚‚</code>.</p>
      </li>
      <li>
        <p>Subcase <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚â‚‚</code>. We conclude by the induction hypothesis
for <code class="language-plaintext highlighter-rouge">uâ‚â‚‚ âŠ‘ uâ‚‚</code>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R1</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  uâ‚ âŠ‘ uâ‚‚â‚
  --------------
  uâ‚ âŠ‘ uâ‚‚â‚ âŠ” uâ‚‚â‚‚
</code></pre></div>    </div>

    <p>Given that <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚</code>, the induction hypothesis for <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ uâ‚‚â‚</code>
gives us that <code class="language-plaintext highlighter-rouge">v â†¦ w</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚â‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code> for some <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code>.
To show that <code class="language-plaintext highlighter-rouge">v â†¦ w</code> also factors <code class="language-plaintext highlighter-rouge">uâ‚‚â‚ âŠ” uâ‚‚â‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚</code>,
we just need to show that <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚ âŠ† uâ‚‚â‚ âŠ” uâ‚‚â‚‚</code>, but that follows
directly from <code class="language-plaintext highlighter-rouge">uâ‚ƒâ‚ âŠ† uâ‚‚â‚</code>.</p>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R2</code>. This case follows by reasoning similar to
the case for <code class="language-plaintext highlighter-rouge">âŠ‘-conj-R1</code>.</p>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-trans</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  uâ‚ âŠ‘ u   u âŠ‘ uâ‚‚
  ---------------
      uâ‚ âŠ‘ uâ‚‚
</code></pre></div>    </div>

    <p>By the induction hypothesis for <code class="language-plaintext highlighter-rouge">uâ‚ âŠ‘ u</code>, we know
that <code class="language-plaintext highlighter-rouge">v â†¦ w</code> factors <code class="language-plaintext highlighter-rouge">u</code> into <code class="language-plaintext highlighter-rouge">uâ€²</code>, for some value <code class="language-plaintext highlighter-rouge">uâ€²</code>,
so we have <code class="language-plaintext highlighter-rouge">all-funs uâ€²</code> and <code class="language-plaintext highlighter-rouge">uâ€² âŠ† u</code>.
By the induction hypothesis for <code class="language-plaintext highlighter-rouge">u âŠ‘ uâ‚‚</code>, we know
that for any <code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€² âˆˆ u</code>, <code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€²</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code>.
Now we apply the lemma sub-inv-trans, which gives us
some <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code> such that <code class="language-plaintext highlighter-rouge">(â¨†dom uâ€²) â†¦ (â¨†cod uâ€²)</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code>.
We show that <code class="language-plaintext highlighter-rouge">v â†¦ w</code> also factors <code class="language-plaintext highlighter-rouge">uâ‚‚</code> into <code class="language-plaintext highlighter-rouge">uâ‚ƒ</code>.
From <code class="language-plaintext highlighter-rouge">â¨†dom uâ‚ƒ âŠ‘ â¨†dom uâ€²</code> and <code class="language-plaintext highlighter-rouge">â¨†dom uâ€² âŠ‘ v</code>, we have <code class="language-plaintext highlighter-rouge">â¨†dom uâ‚ƒ âŠ‘ v</code>.
From <code class="language-plaintext highlighter-rouge">w âŠ‘ â¨†cod uâ€²</code> and <code class="language-plaintext highlighter-rouge">â¨†cod uâ€² âŠ‘ â¨†cod uâ‚ƒ</code>, we have <code class="language-plaintext highlighter-rouge">w âŠ‘ â¨†cod uâ‚ƒ</code>,
and this case is complete.</p>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-fun</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  uâ‚‚â‚ âŠ‘ uâ‚â‚  uâ‚â‚‚ âŠ‘ uâ‚‚â‚‚
  ---------------------
  uâ‚â‚ â†¦ uâ‚â‚‚ âŠ‘ uâ‚‚â‚ â†¦ uâ‚‚â‚‚
</code></pre></div>    </div>

    <p>Given that <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚â‚ â†¦ uâ‚â‚‚</code>, we have <code class="language-plaintext highlighter-rouge">v â‰¡ uâ‚â‚</code> and <code class="language-plaintext highlighter-rouge">w â‰¡ uâ‚â‚‚</code>.
We show that <code class="language-plaintext highlighter-rouge">uâ‚â‚ â†¦ uâ‚â‚‚</code> factors <code class="language-plaintext highlighter-rouge">uâ‚‚â‚ â†¦ uâ‚‚â‚‚</code> into itself.
We need to show that <code class="language-plaintext highlighter-rouge">â¨†dom (uâ‚‚â‚ â†¦ uâ‚‚â‚‚) âŠ‘ uâ‚â‚</code> and <code class="language-plaintext highlighter-rouge">uâ‚â‚‚ âŠ‘ â¨†cod (uâ‚‚â‚ â†¦ uâ‚‚â‚‚)</code>,
but that is equivalent to our premises <code class="language-plaintext highlighter-rouge">uâ‚‚â‚ âŠ‘ uâ‚â‚</code> and <code class="language-plaintext highlighter-rouge">uâ‚â‚‚ âŠ‘ uâ‚‚â‚‚</code>.</p>
  </li>
  <li>
    <p>Case <code class="language-plaintext highlighter-rouge">âŠ‘-dist</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ---------------------------------------------
  uâ‚‚â‚ â†¦ (uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ) âŠ‘ (uâ‚‚â‚ â†¦ uâ‚‚â‚‚) âŠ” (uâ‚‚â‚ â†¦ uâ‚‚â‚ƒ)
</code></pre></div>    </div>

    <p>Given that <code class="language-plaintext highlighter-rouge">v â†¦ w âˆˆ uâ‚‚â‚ â†¦ (uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ)</code>, we have <code class="language-plaintext highlighter-rouge">v â‰¡ uâ‚‚â‚</code>
and <code class="language-plaintext highlighter-rouge">w â‰¡ uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ</code>.
We show that <code class="language-plaintext highlighter-rouge">uâ‚‚â‚ â†¦ (uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ)</code> factors <code class="language-plaintext highlighter-rouge">(uâ‚‚â‚ â†¦ uâ‚‚â‚‚) âŠ” (uâ‚‚â‚ â†¦ uâ‚‚â‚ƒ)</code>
into itself. We have <code class="language-plaintext highlighter-rouge">uâ‚‚â‚ âŠ” uâ‚‚â‚ âŠ‘ uâ‚‚â‚</code>, and also
<code class="language-plaintext highlighter-rouge">uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ âŠ‘ uâ‚‚â‚‚ âŠ” uâ‚‚â‚ƒ</code>, so the proof is complete.</p>
  </li>
</ul>

<p>We conclude this section with two corollaries of the sub-inv lemma.
First, we have the following property that is convenient to use in
later proofs. We specialize the premise to just <code class="language-plaintext highlighter-rouge">v â†¦ w âŠ‘ uâ‚</code>
and we modify the conclusion to say that for every
<code class="language-plaintext highlighter-rouge">vâ€² â†¦ wâ€² âˆˆ uâ‚‚</code>, we have <code class="language-plaintext highlighter-rouge">vâ€² âŠ‘ v</code>.</p>

<pre class="Agda"><a id="sub-inv-fun"></a><a id="43163" href="/Denotational/#43163" class="Function">sub-inv-fun</a> <a id="43175" class="Symbol">:</a> <a id="43177" class="Symbol">âˆ€{</a><a id="43179" href="plfa.part3.Denotational.html#43179" class="Bound">v</a> <a id="43181" href="plfa.part3.Denotational.html#43181" class="Bound">w</a> <a id="43183" href="plfa.part3.Denotational.html#43183" class="Bound">uâ‚</a> <a id="43186" class="Symbol">:</a> <a id="43188" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a><a id="43193" class="Symbol">}</a>
    <a id="43199" class="Symbol">â†’</a> <a id="43201" class="Symbol">(</a><a id="43202" href="/Denotational/#43179" class="Bound">v</a> <a id="43204" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="43206" href="plfa.part3.Denotational.html#43181" class="Bound">w</a><a id="43207" class="Symbol">)</a> <a id="43209" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43211" href="plfa.part3.Denotational.html#43183" class="Bound">uâ‚</a>
      <a id="43220" class="Comment">-----------------------------------------------------</a>
    <a id="43278" class="Symbol">â†’</a> <a id="43280" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Î£[</a> <a id="43283" href="/Denotational/#43283" class="Bound">uâ‚‚</a> <a id="43286" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">âˆˆ</a> <a id="43288" href="plfa.part3.Denotational.html#4151" class="Datatype">Value</a> <a id="43294" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="43296" href="plfa.part3.Denotational.html#32046" class="Function">all-funs</a> <a id="43305" href="plfa.part3.Denotational.html#43283" class="Bound">uâ‚‚</a> <a id="43308" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a> <a id="43310" href="plfa.part3.Denotational.html#43283" class="Bound">uâ‚‚</a> <a id="43313" href="plfa.part3.Denotational.html#30386" class="Function Operator">âŠ†</a> <a id="43315" href="plfa.part3.Denotational.html#43183" class="Bound">uâ‚</a>
        <a id="43326" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a> <a id="43328" class="Symbol">(âˆ€{</a><a id="43331" href="/Denotational/#43331" class="Bound">vâ€²</a> <a id="43334" href="plfa.part3.Denotational.html#43334" class="Bound">wâ€²</a><a id="43336" class="Symbol">}</a> <a id="43338" class="Symbol">â†’</a> <a id="43340" class="Symbol">(</a><a id="43341" href="plfa.part3.Denotational.html#43331" class="Bound">vâ€²</a> <a id="43344" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="43346" href="plfa.part3.Denotational.html#43334" class="Bound">wâ€²</a><a id="43348" class="Symbol">)</a> <a id="43350" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="43352" href="plfa.part3.Denotational.html#43283" class="Bound">uâ‚‚</a> <a id="43355" class="Symbol">â†’</a> <a id="43357" href="plfa.part3.Denotational.html#43331" class="Bound">vâ€²</a> <a id="43360" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43362" href="plfa.part3.Denotational.html#43179" class="Bound">v</a><a id="43363" class="Symbol">)</a> <a id="43365" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a> <a id="43367" href="plfa.part3.Denotational.html#43181" class="Bound">w</a> <a id="43369" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43371" href="plfa.part3.Denotational.html#33244" class="Function">â¨†cod</a> <a id="43376" href="plfa.part3.Denotational.html#43283" class="Bound">uâ‚‚</a>
<a id="43379" href="/Denotational/#43163" class="Function">sub-inv-fun</a><a id="43390" class="Symbol">{</a><a id="43391" href="plfa.part3.Denotational.html#43391" class="Bound">v</a><a id="43392" class="Symbol">}{</a><a id="43394" href="plfa.part3.Denotational.html#43394" class="Bound">w</a><a id="43395" class="Symbol">}{</a><a id="43397" href="plfa.part3.Denotational.html#43397" class="Bound">uâ‚</a><a id="43399" class="Symbol">}</a> <a id="43401" href="plfa.part3.Denotational.html#43401" class="Bound">abc</a>
    <a id="43409" class="Keyword">with</a> <a id="43414" href="/Denotational/#38690" class="Function">sub-inv</a> <a id="43422" href="plfa.part3.Denotational.html#43401" class="Bound">abc</a> <a id="43426" class="Symbol">{</a><a id="43427" href="plfa.part3.Denotational.html#43391" class="Bound">v</a><a id="43428" class="Symbol">}{</a><a id="43430" href="plfa.part3.Denotational.html#43394" class="Bound">w</a><a id="43431" class="Symbol">}</a> <a id="43433" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="43438" class="Symbol">...</a> <a id="43442" class="Symbol">|</a> <a id="43444" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43446" href="/Denotational/#43446" class="Bound">uâ‚‚</a> <a id="43449" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43451" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43453" href="plfa.part3.Denotational.html#43453" class="Bound">f</a> <a id="43455" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43457" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43459" href="plfa.part3.Denotational.html#43459" class="Bound">uâ‚‚âŠ†uâ‚</a> <a id="43465" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43467" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43469" href="plfa.part3.Denotational.html#43469" class="Bound">db</a> <a id="43472" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43474" href="plfa.part3.Denotational.html#43474" class="Bound">cc</a> <a id="43477" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43479" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43481" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43483" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43485" class="Symbol">=</a>
      <a id="43493" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43495" href="/Denotational/#43446" class="Bound">uâ‚‚</a> <a id="43498" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43500" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43502" href="plfa.part3.Denotational.html#43453" class="Bound">f</a> <a id="43504" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43506" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43508" href="plfa.part3.Denotational.html#43459" class="Bound">uâ‚‚âŠ†uâ‚</a> <a id="43514" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43516" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43518" href="plfa.part3.Denotational.html#43542" class="Function">G</a> <a id="43520" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43522" href="plfa.part3.Denotational.html#43474" class="Bound">cc</a> <a id="43525" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43527" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43529" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43531" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
   <a id="43536" class="Keyword">where</a> <a id="43542" href="/Denotational/#43542" class="Function">G</a> <a id="43544" class="Symbol">:</a> <a id="43546" class="Symbol">âˆ€{</a><a id="43548" href="plfa.part3.Denotational.html#43548" class="Bound">D</a> <a id="43550" href="plfa.part3.Denotational.html#43550" class="Bound">E</a><a id="43551" class="Symbol">}</a> <a id="43553" class="Symbol">â†’</a> <a id="43555" class="Symbol">(</a><a id="43556" href="plfa.part3.Denotational.html#43548" class="Bound">D</a> <a id="43558" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="43560" href="plfa.part3.Denotational.html#43550" class="Bound">E</a><a id="43561" class="Symbol">)</a> <a id="43563" href="plfa.part3.Denotational.html#30140" class="Function Operator">âˆˆ</a> <a id="43565" href="plfa.part3.Denotational.html#43446" class="Bound">uâ‚‚</a> <a id="43568" class="Symbol">â†’</a> <a id="43570" href="plfa.part3.Denotational.html#43548" class="Bound">D</a> <a id="43572" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43574" class="Bound">v</a>
         <a id="43585" href="/Denotational/#43542" class="Function">G</a><a id="43586" class="Symbol">{</a><a id="43587" href="plfa.part3.Denotational.html#43587" class="Bound">D</a><a id="43588" class="Symbol">}{</a><a id="43590" href="plfa.part3.Denotational.html#43590" class="Bound">E</a><a id="43591" class="Symbol">}</a> <a id="43593" href="plfa.part3.Denotational.html#43593" class="Bound">m</a> <a id="43595" class="Symbol">=</a> <a id="43597" href="plfa.part3.Denotational.html#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="43605" class="Symbol">(</a><a id="43606" href="plfa.part3.Denotational.html#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="43610" class="Symbol">(</a><a id="43611" href="plfa.part3.Denotational.html#33533" class="Function">â†¦âˆˆâ†’âŠ†â¨†dom</a> <a id="43620" href="plfa.part3.Denotational.html#43453" class="Bound">f</a> <a id="43622" href="plfa.part3.Denotational.html#43593" class="Bound">m</a><a id="43623" class="Symbol">))</a> <a id="43626" href="plfa.part3.Denotational.html#43469" class="Bound">db</a>
</pre>
<p>The second corollary is the inversion rule that one would expect for
less-than with functions on the left and right-hand sides.</p>

<pre class="Agda"><a id="â†¦âŠ‘â†¦-inv"></a><a id="43767" href="/Denotational/#43767" class="Function">â†¦âŠ‘â†¦-inv</a> <a id="43775" class="Symbol">:</a> <a id="43777" class="Symbol">âˆ€{</a><a id="43779" href="plfa.part3.Denotational.html#43779" class="Bound">v</a> <a id="43781" href="plfa.part3.Denotational.html#43781" class="Bound">w</a> <a id="43783" href="plfa.part3.Denotational.html#43783" class="Bound">vâ€²</a> <a id="43786" href="plfa.part3.Denotational.html#43786" class="Bound">wâ€²</a><a id="43788" class="Symbol">}</a>
        <a id="43798" class="Symbol">â†’</a> <a id="43800" href="/Denotational/#43779" class="Bound">v</a> <a id="43802" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="43804" href="plfa.part3.Denotational.html#43781" class="Bound">w</a> <a id="43806" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43808" href="plfa.part3.Denotational.html#43783" class="Bound">vâ€²</a> <a id="43811" href="plfa.part3.Denotational.html#4183" class="InductiveConstructor Operator">â†¦</a> <a id="43813" href="plfa.part3.Denotational.html#43786" class="Bound">wâ€²</a>
          <a id="43826" class="Comment">-----------------</a>
        <a id="43852" class="Symbol">â†’</a> <a id="43854" href="/Denotational/#43783" class="Bound">vâ€²</a> <a id="43857" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43859" href="plfa.part3.Denotational.html#43779" class="Bound">v</a> <a id="43861" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">Ã—</a> <a id="43863" href="plfa.part3.Denotational.html#43781" class="Bound">w</a> <a id="43865" href="plfa.part3.Denotational.html#4508" class="Datatype Operator">âŠ‘</a> <a id="43867" href="plfa.part3.Denotational.html#43786" class="Bound">wâ€²</a>
<a id="43870" href="/Denotational/#43767" class="Function">â†¦âŠ‘â†¦-inv</a><a id="43877" class="Symbol">{</a><a id="43878" href="plfa.part3.Denotational.html#43878" class="Bound">v</a><a id="43879" class="Symbol">}{</a><a id="43881" href="plfa.part3.Denotational.html#43881" class="Bound">w</a><a id="43882" class="Symbol">}{</a><a id="43884" href="plfa.part3.Denotational.html#43884" class="Bound">vâ€²</a><a id="43886" class="Symbol">}{</a><a id="43888" href="plfa.part3.Denotational.html#43888" class="Bound">wâ€²</a><a id="43890" class="Symbol">}</a> <a id="43892" href="plfa.part3.Denotational.html#43892" class="Bound">lt</a>
    <a id="43899" class="Keyword">with</a> <a id="43904" href="/Denotational/#43163" class="Function">sub-inv-fun</a> <a id="43916" href="plfa.part3.Denotational.html#43892" class="Bound">lt</a>
<a id="43919" class="Symbol">...</a> <a id="43923" class="Symbol">|</a> <a id="43925" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43927" href="/Denotational/#43927" class="Bound">Î“</a> <a id="43929" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43931" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43933" href="plfa.part3.Denotational.html#43933" class="Bound">f</a> <a id="43935" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43937" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43939" href="plfa.part3.Denotational.html#43939" class="Bound">Î“âŠ†v34</a> <a id="43945" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43947" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43949" href="plfa.part3.Denotational.html#43949" class="Bound">lt1</a> <a id="43953" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="43955" href="plfa.part3.Denotational.html#43955" class="Bound">lt2</a> <a id="43959" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43961" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43963" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="43965" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="43971" class="Keyword">with</a> <a id="43976" href="/Denotational/#32356" class="Function">all-funsâˆˆ</a> <a id="43986" href="plfa.part3.Denotational.html#43933" class="Bound">f</a>
<a id="43988" class="Symbol">...</a> <a id="43992" class="Symbol">|</a> <a id="43994" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="43996" href="/Denotational/#43996" class="Bound">u</a> <a id="43998" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="44000" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="44002" href="plfa.part3.Denotational.html#44002" class="Bound">uâ€²</a> <a id="44005" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="44007" href="plfa.part3.Denotational.html#44007" class="Bound">uâ†¦uâ€²âˆˆÎ“</a> <a id="44014" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a> <a id="44016" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
    <a id="44022" class="Keyword">with</a> <a id="44027" class="Bound">Î“âŠ†v34</a> <a id="44033" href="/Denotational/#44007" class="Bound">uâ†¦uâ€²âˆˆÎ“</a>
<a id="44040" class="Symbol">...</a> <a id="44044" class="Symbol">|</a> <a id="44046" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="44051" class="Symbol">=</a>
  <a id="44055" class="Keyword">let</a> <a id="44059" href="/Denotational/#44059" class="Bound">â¨†codÎ“âŠ†wâ€²</a> <a id="44068" class="Symbol">=</a> <a id="44070" href="plfa.part3.Denotational.html#34105" class="Function">âŠ†â†¦â†’â¨†codâŠ†</a> <a id="44079" class="Bound">Î“âŠ†v34</a> <a id="44085" class="Keyword">in</a>
  <a id="44090" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ¨</a> <a id="44092" class="Bound">lt1</a> <a id="44096" class="Bound">uâ†¦uâ€²âˆˆÎ“</a> <a id="44103" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="44105" href="/Denotational/#4798" class="InductiveConstructor">âŠ‘-trans</a> <a id="44113" class="Bound">lt2</a> <a id="44117" class="Symbol">(</a><a id="44118" href="plfa.part3.Denotational.html#30857" class="Function">âŠ†â†’âŠ‘</a> <a id="44122" href="plfa.part3.Denotational.html#44059" class="Bound">â¨†codÎ“âŠ†wâ€²</a><a id="44130" class="Symbol">)</a> <a id="44132" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">âŸ©</a>
</pre>

<h2 id="notes">Notes</h2>

<p>The denotational semantics presented in this chapter is an example of
a <em>filter model</em> (Barendregt, Coppo, Dezani-Ciancaglini, 1983). Filter
models use type systems with intersection types to precisely
characterize runtime behavior (Coppo, Dezani-Ciancaglini, and Salle,
1979). The notation that we use in this chapter is not that of type
systems and intersection types, but the <code class="language-plaintext highlighter-rouge">Value</code> data type is isomorphic
to types (<code class="language-plaintext highlighter-rouge">â†¦</code> is <code class="language-plaintext highlighter-rouge">â†’</code>, <code class="language-plaintext highlighter-rouge">âŠ”</code> is <code class="language-plaintext highlighter-rouge">âˆ§</code>, <code class="language-plaintext highlighter-rouge">âŠ¥</code> is <code class="language-plaintext highlighter-rouge">âŠ¤</code>), the <code class="language-plaintext highlighter-rouge">âŠ‘</code> relation is the
inverse of subtyping <code class="language-plaintext highlighter-rouge">&lt;:</code>, and the evaluation relation <code class="language-plaintext highlighter-rouge">Ï âŠ¢ M â†“ v</code> is
isomorphic to a type system. Write <code class="language-plaintext highlighter-rouge">Î“</code> instead of <code class="language-plaintext highlighter-rouge">Ï</code>, <code class="language-plaintext highlighter-rouge">A</code> instead of <code class="language-plaintext highlighter-rouge">v</code>, and
replace <code class="language-plaintext highlighter-rouge">â†“</code> with <code class="language-plaintext highlighter-rouge">:</code> and one has a typing judgement <code class="language-plaintext highlighter-rouge">Î“ âŠ¢ M : A</code>.
By varying the definition of subtyping and using different choices of
type atoms, intersection type systems provide semantics for many different
untyped Î» calculi, from full beta to the lazy and call-by-value calculi
(Alessi, Barbanera, and Dezani-Ciancaglini, 2006) (Rocca and Paolini, 2004).
The denotational semantics in this chapter corresponds to the BCD
system (Barendregt, Coppo, Dezani-Ciancaglini, 1983).  Part 3 of the
book <em>Lambda Calculus with Types</em> describes a framework for
intersection type systems that enables results similar to the ones in
this chapter, but for the entire family of intersection type systems
(Barendregt, Dekkers, and Statman, 2013).</p>

<p>The two ideas of using finite tables to represent functions and of
relaxing table lookup to enable self application first appeared in a
technical report by Gordon Plotkin (1972) and are later described in
an article in Theoretical Computer Science (Plotkin 1993).  In that
work, the inductive definition of <code class="language-plaintext highlighter-rouge">Value</code> is a bit different than the
one we use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Value = C + â„˜f(Value) Ã— â„˜f(Value)
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">C</code> is a set of constants and <code class="language-plaintext highlighter-rouge">â„˜f</code> means finite powerset.  The
pairs in <code class="language-plaintext highlighter-rouge">â„˜f(Value) Ã— â„˜f(Value)</code> represent input-output mappings, just
as in this chapter. The finite powersets are used to enable a function
table to appear in the input and in the output. These differences
amount to changing where the recursion appears in the definition of
<code class="language-plaintext highlighter-rouge">Value</code>.  Plotkinâ€™s model is an example of a <em>graph model</em> of the
untyped lambda calculus (Barendregt, 1984). In a graph model, the
semantics is presented as a function from programs and environments to
(possibly infinite) sets of values. The semantics in this chapter is
instead defined as a relation, but set-valued functions are isomorphic
to relations. Indeed, we present the semantics as a function in the
next chapter and prove that it is equivalent to the relational
version.</p>

<p>Dana Scottâ€™s â„˜(Ï‰) (1976) and Engelerâ€™s B(A) (1981) are two more
examples of graph models. Both use the following inductive definition
of <code class="language-plaintext highlighter-rouge">Value</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Value = C + â„˜f(Value) Ã— Value
</code></pre></div></div>

<p>The use of <code class="language-plaintext highlighter-rouge">Value</code> instead of <code class="language-plaintext highlighter-rouge">â„˜f(Value)</code> in the output does not restrict
expressiveness compared to Plotkinâ€™s model because the semantics use
sets of values and a pair of sets <code class="language-plaintext highlighter-rouge">(V, Vâ€²)</code> can be represented as a set
of pairs <code class="language-plaintext highlighter-rouge">{ (V, vâ€²) | vâ€² âˆˆ Vâ€² }</code>.  In Scottâ€™s â„˜(Ï‰), the above values are
mapped to and from the natural numbers using a kind of Godel encoding.</p>

<h2 id="references">References</h2>

<ul>
  <li>
    <p>Intersection Types and Lambda Models.  Fabio Alessi, Franco
Barbanera, and Mariangiola Dezani-Ciancaglini, Theoretical
Compututer Science, vol. 355, pages 108-126, 2006.</p>
  </li>
  <li>
    <p>The Lambda Calculus. H.P. Barendregt, 1984.</p>
  </li>
  <li>
    <p>A filter lambda model and the completeness of type assignment.  Henk
Barendregt, Mario Coppo, and Mariangiola Dezani-Ciancaglini, Journal
of Symbolic Logic, vol. 48, pages 931-940, 1983.</p>
  </li>
  <li>
    <p>Lambda Calculus with Types. Henk Barendregt, Wil Dekkers, and
Richard Statman, Cambridge University Press, Perspectives in Logic,
2013.</p>
  </li>
  <li>
    <p>Functional characterization of some semantic equalities inside
Î»-calculus. Mario Coppo, Mariangiola Dezani-Ciancaglini, and Patrick
Salle, in Sixth Colloquium on Automata, Languages and Programming.
Springer, pages 133â€“146, 1979.</p>
  </li>
  <li>
    <p>Algebras and combinators. Erwin Engeler, Algebra Universalis,
vol. 13, pages 389-392, 1981.</p>
  </li>
  <li>
    <p>A Set-Theoretical Definition of Application. Gordon D. Plotkin,
University of Edinburgh, Technical Report MIP-R-95, 1972.</p>
  </li>
  <li>
    <p>Set-theoretical and other elementary models of the Î»-calculus.
Gordon D. Plotkin, Theoretical Computer Science, vol. 121,
pages 351-409, 1993.</p>
  </li>
  <li>
    <p>The Parametric Lambda Calculus. Simona Ronchi Della Rocca and Luca
Paolini, Springer, 2004.</p>
  </li>
  <li>
    <p>Data Types as Lattices. Dana Scott, SIAM Journal on Computing,
vol. 5, pages 522-587, 1976.</p>
  </li>
</ul>

<h2 id="unicode">Unicode</h2>

<p>This chapter uses the following unicode:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âŠ¥  U+22A5  UP TACK (\bot)
â†¦  U+21A6  RIGHTWARDS ARROW FROM BAR (\mapsto)
âŠ”  U+2294  SQUARE CUP (\lub)
âŠ‘  U+2291  SQUARE IMAGE OF OR EQUAL TO (\sqsubseteq)
â¨† U+2A06  N-ARY SQUARE UNION OPERATOR (\Lub)
âŠ¢  U+22A2  RIGHT TACK (\|- or \vdash)
â†“  U+2193  DOWNWARDS ARROW (\d)
á¶œ  U+1D9C  MODIFIER LETTER SMALL C (\^c)
â„°  U+2130  SCRIPT CAPITAL E (\McE)
â‰ƒ  U+2243  ASYMPTOTICALLY EQUAL TO (\~- or \simeq)
âˆˆ  U+2208  ELEMENT OF (\in)
âŠ†  U+2286  SUBSET OF OR EQUAL TO (\sub= or \subseteq)
</code></pre></div></div>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/BigStep/">Prev</a>
    
    
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Denotational.lagda.md">Source</a>
    
    
    &bullet;
    
    
    <a alt="Next chapter" href="/Compositional/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jeremy Siek</li>
          <li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jsiek"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jsiek</span></a></li><li><a href="https://www.twitter.com/jeremysiek"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jeremysiek</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha256-E4RlfxwyJVmkkk0szw7LYJxuPlp6evtPSBDlWHsYYL8=" crossorigin="anonymous"></script>
<script type="text/javascript">
  anchors.add();
</script>

<script type="text/javascript">

 // Makes sandwhich menu works
 $('.menu-icon').click(function(){
   $('.trigger').toggle();
 });

 // Script which allows for foldable code blocks
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
